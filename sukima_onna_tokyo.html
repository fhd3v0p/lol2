<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÈöôÈñìÂ•≥ | –ú–Å–†–¢–í–´–ï –ü–ò–ö–°–ï–õ–ò</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono:wght@400&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;700&display=swap');
        
        :root {
            --bg-dark: #0a0a0f;
            --bg-secondary: #1a1a2e;
            --text-primary: #00ffaa;
            --text-secondary: #666;
            --accent-pink: #ff0080;
            --accent-blue: #0099ff;
            --accent-purple: #8a2be2;
            --border-color: #333;
            --choice-bg: #001a0f;
            --choice-hover: #002a1f;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: var(--bg-dark);
            color: var(--text-primary);
            font-family: 'Share Tech Mono', 'Noto Sans JP', monospace;
            height: 100vh;
            overflow: hidden;
            position: relative;
        }

        /* Glitch —ç—Ñ—Ñ–µ–∫—Ç—ã –∫–∞–∫ –≤ 2005-2006 */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                repeating-linear-gradient(
                    0deg,
                    transparent,
                    transparent 2px,
                    rgba(0, 255, 170, 0.03) 2px,
                    rgba(0, 255, 170, 0.03) 4px
                );
            pointer-events: none;
            z-index: 1;
            animation: scanlines 2s linear infinite;
        }

        @keyframes scanlines {
            0% { transform: translateY(0); }
            100% { transform: translateY(4px); }
        }

        .phone-container {
            width: 380px;
            height: 720px;
            margin: 20px auto;
            background: linear-gradient(145deg, #2a2a2a, #1a1a1a);
            border: 4px solid var(--border-color);
            border-radius: 25px;
            padding: 20px;
            box-shadow: 0 0 30px rgba(0, 255, 170, 0.3);
            position: relative;
            z-index: 2;
        }

        .screen {
            width: 100%;
            height: 100%;
            background: var(--bg-dark);
            border-radius: 15px;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .phone-header {
            background: var(--bg-secondary);
            padding: 8px 12px;
            font-size: 0.7rem;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .japanese-text {
            font-family: 'Noto Sans JP', sans-serif;
            font-weight: 300;
        }

        .glitch-text {
            animation: textGlitch 2s infinite;
        }

        @keyframes textGlitch {
            0%, 90% { transform: translateX(0); }
            92% { transform: translateX(-2px); }
            94% { transform: translateX(2px); }
            96% { transform: translateX(-1px); }
            98% { transform: translateX(1px); }
            100% { transform: translateX(0); }
        }

        .battery {
            color: var(--accent-pink);
            animation: batteryBlink 2s infinite;
        }

        @keyframes batteryBlink {
            0%, 70% { opacity: 1; }
            85%, 100% { opacity: 0.3; }
        }

        .content-area {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
        }

        .screen-title {
            color: var(--text-primary);
            font-size: 16px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 0 0 10px var(--text-primary);
        }

        /* BOOT SCREEN */
        .boot-screen {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100%;
            text-align: center;
        }

        .device-logo {
            font-size: 36px;
            color: var(--text-primary);
            font-weight: bold;
            margin-bottom: 20px;
            animation: logoGlow 3s infinite alternate;
        }

        @keyframes logoGlow {
            from { text-shadow: 0 0 10px var(--text-primary); }
            to { text-shadow: 0 0 30px var(--text-primary), 0 0 40px var(--text-primary); }
        }

        .progress-bar {
            width: 220px;
            height: 20px;
            background: #333;
            border: 2px solid #666;
            border-radius: 3px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--text-primary), var(--accent-blue));
            width: 0%;
            transition: width 0.3s ease;
        }

        .boot-message {
            color: #ccc;
            font-size: 14px;
            margin-top: 10px;
        }

        /* MEMORY ENTRIES */
        .memory-entry {
            margin: 8px 0;
            padding: 12px;
            border-radius: 8px;
            animation: messageSlide 0.3s ease-out;
            position: relative;
        }

        @keyframes messageSlide {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .memory-entry.normal {
            background: rgba(0, 255, 170, 0.1);
            border: 1px solid rgba(0, 255, 170, 0.3);
        }

        .memory-entry.corrupted {
            background: linear-gradient(45deg, rgba(255, 0, 128, 0.2), rgba(0, 0, 0, 0.8));
            border: 1px solid var(--accent-pink);
            animation: memoryGlitch 0.5s ease-out;
        }

        .memory-entry.system {
            background: rgba(138, 43, 226, 0.2);
            border: 1px solid var(--accent-purple);
            text-align: center;
            font-size: 12px;
        }

        @keyframes memoryGlitch {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-2px); }
            75% { transform: translateX(2px); }
        }

        .memory-header {
            font-size: 10px;
            color: var(--text-secondary);
            margin-bottom: 6px;
            display: flex;
            justify-content: space-between;
        }

        .memory-text {
            font-size: 14px;
            line-height: 1.4;
            margin-bottom: 8px;
        }

        .memory-timestamp {
            font-size: 10px;
            color: var(--text-secondary);
            text-align: right;
        }

        .japanese-symbol {
            font-family: 'Noto Sans JP', sans-serif;
            font-size: 18px;
            color: var(--accent-pink);
            display: inline-block;
            margin-right: 8px;
        }

        /* NAVIGATION */
        .nav-button {
            background: rgba(0, 255, 170, 0.2);
            border: 1px solid var(--text-primary);
            padding: 8px 12px;
            border-radius: 4px;
            color: var(--text-primary);
            cursor: pointer;
            font-size: 12px;
            margin: 4px;
            transition: all 0.3s ease;
        }

        .nav-button:hover {
            background: rgba(0, 255, 170, 0.4);
            box-shadow: 0 0 10px rgba(0, 255, 170, 0.3);
        }

        .choice-button {
            width: 100%;
            padding: 12px;
            margin: 6px 0;
            background: var(--choice-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-primary);
            font-family: inherit;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
        }

        .choice-button:hover {
            background: var(--choice-hover);
            border-color: var(--text-primary);
            box-shadow: 0 0 10px rgba(0, 255, 170, 0.3);
        }

        .choice-button.dangerous {
            border-color: var(--accent-pink);
            color: var(--accent-pink);
        }

        .choice-button.dangerous:hover {
            background: rgba(255, 0, 128, 0.1);
            box-shadow: 0 0 10px rgba(255, 0, 128, 0.3);
        }

        .choices {
            padding: 15px;
            border-top: 1px solid var(--border-color);
            background: var(--bg-secondary);
        }

        .loading {
            text-align: center;
            color: var(--text-secondary);
            font-size: 12px;
            padding: 20px;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        .hidden { display: none; }
        .text-center { text-align: center; }
        .text-pink { color: var(--accent-pink); }
        .text-blue { color: var(--accent-blue); }
        .text-purple { color: var(--accent-purple); }

        .status-bar {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 8px;
            background: rgba(0, 0, 0, 0.8);
            padding: 3px 6px;
            border-radius: 3px;
            z-index: 100;
        }

        /* Course integration styles */
        .course-button {
            background: rgba(255, 0, 128, 0.2);
            border: 1px solid var(--accent-pink);
            padding: 6px 12px;
            border-radius: 4px;
            color: var(--accent-pink);
            font-size: 10px;
            margin-top: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .course-button:hover {
            background: rgba(255, 0, 128, 0.4);
            box-shadow: 0 0 10px rgba(255, 0, 128, 0.3);
        }
    </style>
</head>
<body>
    <div class="status-bar japanese-text">ÈöôÈñìÂ•≥ v1.0</div>

    <div class="phone-container">
        <div class="screen">
            <div class="phone-header">
                <div>
                    <span style="display: flex; gap: 2px;">
                        <div style="width: 3px; height: 8px; background: var(--text-primary); opacity: 1;"></div>
                        <div style="width: 3px; height: 8px; background: var(--text-primary); opacity: 1;"></div>
                        <div style="width: 3px; height: 8px; background: var(--text-primary); opacity: 0.3;"></div>
                        <div style="width: 3px; height: 8px; background: var(--text-primary); opacity: 0.3;"></div>
                    </span>
                    <span class="japanese-text">DoCoMo P901i</span>
                </div>
                <div class="battery">12% ‚ö†Ô∏è</div>
            </div>

            <div id="gameContent" class="content-area"></div>

            <div id="choicesContainer" class="choices">
                <div class="loading japanese-text">„Ç∑„Çπ„ÉÜ„É†ÂàùÊúüÂåñ‰∏≠...</div>
            </div>
        </div>
    </div>

    <script>
        // Telegram Web App API
        const tg = window.Telegram?.WebApp;
        if (tg) {
            tg.ready();
            tg.expand();
        }

        class SukimaOnnaGame {
            constructor() {
                this.gameContent = document.getElementById('gameContent');
                this.choicesContainer = document.getElementById('choicesContainer');
                this.currentMemory = 0;
                this.gameState = {
                    deviceBooted: false,
                    memoriesUnlocked: 0,
                    investigationStarted: false,
                    truthRevealed: false,
                    finalChoice: null,
                    coursesViewed: false
                };
                this.playerData = {
                    name: null,
                    discoveries: [],
                    suspicions: []
                };

                // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram
                if (tg?.initDataUnsafe?.user) {
                    this.playerData.telegramUser = tg.initDataUnsafe.user;
                }

                this.init();
            }

            init() {
                this.showBootScreen();
            }

            showBootScreen() {
                this.gameContent.innerHTML = `
                    <div class="boot-screen">
                        <div class="device-logo japanese-text glitch-text">ÈöôÈñìÂ•≥</div>
                        <div style="text-align: center; margin-bottom: 30px;">
                            <div style="font-size: 18px; color: var(--text-primary); margin-bottom: 8px;">–ú–Å–†–¢–í–´–ï –ü–ò–ö–°–ï–õ–ò</div>
                            <div style="font-size: 14px; color: var(--accent-pink); margin-bottom: 4px;">üì± –¢–µ–ª–µ—Ñ–æ–Ω –Ω–∞—à–ª–∏ –≤ —â–µ–ª–∏ –º–µ–∂–¥—É –∑–¥–∞–Ω–∏—è–º–∏</div>
                            <div style="font-size: 12px; color: var(--text-secondary);">–ó–∞–ø–∏—Å–∏ –ê–∏—Ä—ã –ú–∞—Ü—É–∏ ‚Ä¢ –¢–æ–∫–∏–æ 2005</div>
                        </div>
                        <div class="progress-bar">
                            <div id="progressFill" class="progress-fill"></div>
                        </div>
                        <div id="bootMessage" class="boot-message japanese-text">„É°„É¢„É™Âæ©ÂÖÉ‰∏≠...</div>
                    </div>
                `;

                const messages = [
                    '„É°„É¢„É™Âæ©ÂÖÉ‰∏≠... (–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏...)',
                    '„Éá„Éº„ÇøËß£Êûê‰∏≠... (–ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö...)',
                    'ÊöóÂè∑Ëß£Ë™≠‰∏≠... (–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞...)',
                    'ÊúÄÂæå„ÅÆË®òÈå≤Áô∫Ë¶ã... (–ù–∞–π–¥–µ–Ω—ã –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø–∏—Å–∏...)',
                    '„Ç∑„Çπ„ÉÜ„É†Ê∫ñÂÇôÂÆå‰∫Ü (–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞)'
                ];

                let progress = 0;
                const progressBar = document.getElementById('progressFill');
                const messageEl = document.getElementById('bootMessage');

                const bootInterval = setInterval(() => {
                    progress += 20;
                    progressBar.style.width = progress + '%';
                    
                    if (progress <= 100) {
                        messageEl.innerHTML = messages[Math.floor(progress / 20) - 1] || messages[messages.length - 1];
                    }
                    
                    if (progress >= 100) {
                        clearInterval(bootInterval);
                        setTimeout(() => {
                            this.gameState.deviceBooted = true;
                            this.showMainInterface();
                        }, 1000);
                    }
                }, 800);
            }

            showMainInterface() {
                this.gameContent.innerHTML = `
                    <div style="padding: 15px;">
                        <div style="text-align: center; margin-bottom: 20px;">
                            <div class="japanese-text" style="font-size: 14px; color: var(--accent-pink); margin-bottom: 8px;">
                                <span class="japanese-symbol">Èöô</span>–©–ï–õ–¨ –í –°–¢–ï–ù–ï
                            </div>
                            <div style="font-size: 12px; color: var(--text-secondary);">
                                –ó–∞–ø–∏—Å–∏ –ê–∏—Ä—ã –ú–∞—Ü—É–∏ (Êùæ‰∫ïÊÑõËâØ) ‚Ä¢ –¢–æ–∫–∏–æ, 2005
                            </div>
                            <div style="font-size: 11px; color: var(--text-secondary); margin-top: 4px;">
                                –¢–∞—Ç—É-–º–∞—Å—Ç–µ—Ä ‚Ä¢ –ù–∞–π–¥–µ–Ω–∞ –º–µ—Ä—Ç–≤–æ–π –≤ —É–∑–∫–æ–π —â–µ–ª–∏
                            </div>
                        </div>

                        <div style="background: rgba(255, 0, 128, 0.1); border: 1px solid var(--accent-pink); border-radius: 8px; padding: 12px; margin-bottom: 15px;">
                            <div style="font-size: 11px; color: var(--accent-pink); margin-bottom: 4px;">‚ö†Ô∏è –ü–û–õ–ò–¶–ï–ô–°–ö–ò–ô –û–¢–ß–ï–¢</div>
                            <div style="font-size: 12px;">–¢–µ–ª–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ –º–µ–∂–¥—É –¥–≤—É–º—è –∑–¥–∞–Ω–∏—è–º–∏ –≤ –°–∏–±—É—è. –©–µ–ª—å —à–∏—Ä–∏–Ω–æ–π 15 —Å–º. –ü—Ä–∏—á–∏–Ω–∞ —Å–º–µ—Ä—Ç–∏: —Å–¥–∞–≤–ª–∏–≤–∞–Ω–∏–µ. –ö–∞–∫ –∂–µ—Ä—Ç–≤–∞ —Ç—É–¥–∞ –ø–æ–ø–∞–ª–∞ - –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ. –¢–µ–ª–µ—Ñ–æ–Ω –Ω–∞–π–¥–µ–Ω —Ä—è–¥–æ–º —Å —Ç–µ–ª–æ–º.</div>
                        </div>

                        <div id="memoryList"></div>
                    </div>
                `;

                this.choicesContainer.innerHTML = '';
                this.addChoice('üîç –ù–∞—á–∞—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–ø–∏—Å–µ–π', 'start_investigation', false, () => {
                    this.startInvestigation();
                });
                this.addChoice('üì± –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ', 'device_info', false, () => {
                    this.showDeviceInfo();
                });
            }

            startInvestigation() {
                this.gameState.investigationStarted = true;
                this.showMemory(1);
            }

            showMemory(memoryNumber) {
                this.currentMemory = memoryNumber;
                this.gameState.memoriesUnlocked = Math.max(this.gameState.memoriesUnlocked, memoryNumber);

                const memories = this.getMemories();
                const memory = memories[memoryNumber - 1];

                if (!memory) {
                    this.showEnding();
                    return;
                }

                this.gameContent.innerHTML = `
                    <div style="padding: 15px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                            <div class="nav-button" onclick="game.showMainInterface()">‚Üê –ù–∞–∑–∞–¥</div>
                            <div style="font-size: 12px; color: var(--text-secondary);">
                                Ë®òÈå≤ ${memoryNumber} / ${memories.length}
                            </div>
                            ${memoryNumber < memories.length ? `<div class="nav-button" onclick="game.showMemory(${memoryNumber + 1})">–î–∞–ª–µ–µ ‚Üí</div>` : '<div></div>'}
                        </div>

                        <div class="memory-entry ${memory.type}">
                            <div class="memory-header">
                                <span><span class="japanese-symbol">${memory.symbol}</span>${memory.title}</span>
                                <span>${memory.timestamp}</span>
                            </div>
                            <div class="memory-text">${memory.content}</div>
                            ${memory.timestamp ? `<div class="memory-timestamp">${memory.metadata || ''}</div>` : ''}
                        </div>

                        ${memory.courses ? `
                            <div style="margin-top: 15px; padding: 12px; background: rgba(0, 255, 170, 0.1); border: 1px solid var(--text-primary); border-radius: 8px;">
                                <div style="font-size: 11px; color: var(--text-primary); margin-bottom: 8px;">üìö –û–ë–£–ß–ê–Æ–©–ò–ï –ú–ê–¢–ï–†–ò–ê–õ–´</div>
                                <div style="font-size: 12px; margin-bottom: 8px;">${memory.coursesText}</div>
                                ${memory.courses.map(course => `
                                    <button class="course-button" onclick="game.showCourse('${course.id}')">
                                        üéì ${course.title} - ${course.price}
                                    </button>
                                `).join('')}
                            </div>
                        ` : ''}
                    </div>
                `;

                this.updateChoicesForMemory(memory, memoryNumber);
            }

            getMemories() {
                return [
                    {
                        symbol: 'ÈßÖ',
                        title: '–ñ–µ–Ω—â–∏–Ω–∞ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ –°–∏–Ω–¥–∑—é–∫—É',
                        timestamp: '15.11.05 - 23:42',
                        type: 'normal',
                        content: `–°–µ–≥–æ–¥–Ω—è –≤–∏–¥–µ–ª–∞ —á—Ç–æ-—Ç–æ —Å—Ç—Ä–∞–Ω–Ω–æ–µ –Ω–∞ —Å—Ç–∞–Ω—Ü–∏–∏ –°–∏–Ω–¥–∑—é–∫—É. –ñ–µ–Ω—â–∏–Ω–∞ —Å—Ç–æ—è–ª–∞ –º–µ–∂–¥—É –ø–æ–µ–∑–¥–∞–º–∏ - –≤ —â–µ–ª–∏ –º–µ–∂–¥—É –≤–∞–≥–æ–Ω–∞–º–∏.

–ö–æ–≥–¥–∞ –ø–æ–µ–∑–¥ —Ç—Ä–æ–Ω—É–ª—Å—è, –æ–Ω–∞ –Ω–µ —É–ø–∞–ª–∞. –ü—Ä–æ—Å—Ç–æ... –ø–æ–µ—Ö–∞–ª–∞ –≤–º–µ—Å—Ç–µ —Å –Ω–∏–º. –ü–ª–æ—Å–∫–∞—è, –∫–∞–∫ –ª–∏—Å—Ç –±—É–º–∞–≥–∏.

–í—Å–µ –ø—Ä–æ—à–ª–∏ –º–∏–º–æ, –∫–∞–∫ –±—É–¥—Ç–æ –Ω–µ –≤–∏–¥–µ–ª–∏. –¢–æ–ª—å–∫–æ —è –∑–∞–º–µ—Ç–∏–ª–∞.`,
                        metadata: '–ì–æ–ª–æ—Å–æ–≤–∞—è –∑–∞–ø–∏—Å—å ‚Üí —Ç–µ–∫—Å—Ç',
                        courses: [
                            { id: 'full_course', title: '–ü–æ–ª–Ω—ã–π –∫—É—Ä—Å —Ç–∞—Ç—É-–º–∞—Å—Ç–µ—Ä–∞', price: '22,500‚ÇΩ' },
                            { id: 'basic_course', title: '–ë–∞–∑–æ–≤—ã–π –∫—É—Ä—Å —Å –≤–∏–¥–µ–æ', price: '12,500‚ÇΩ' }
                        ],
                        coursesText: '–ì–æ—Ä–æ–¥—Å–∫–∏–µ –ª–µ–≥–µ–Ω–¥—ã –¢–æ–∫–∏–æ —á–∞—Å—Ç–æ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –æ—Å–Ω–æ–≤–æ–π –¥–ª—è —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Ç–∞—Ç—É-–¥–∏–∑–∞–π–Ω–æ–≤. –ò–∑—É—á–∏ –∏—Å–∫—É—Å—Å—Ç–≤–æ –≤–æ–ø–ª–æ—â–µ–Ω–∏—è –º–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –æ–±—Ä–∞–∑–æ–≤.'
                    },
                    {
                        symbol: 'Èöô',
                        title: '–ö–ª–∏–µ–Ω—Ç–∫–∞ –∏–∑ —â–µ–ª–∏',
                        timestamp: '18.11.05 - 14:30',
                        type: 'normal',
                        content: `–ü—Ä–∏—à–ª–∞ —Å—Ç—Ä–∞–Ω–Ω–∞—è –∫–ª–∏–µ–Ω—Ç–∫–∞. –•–æ—Ç–µ–ª–∞ —Ç–∞—Ç—É - —Å–∏–ª—É—ç—Ç —á–µ–ª–æ–≤–µ–∫–∞, —Å–¥–∞–≤–ª–µ–Ω–Ω–æ–≥–æ –º–µ–∂–¥—É —Å—Ç–µ–Ω–∞–º–∏.

"–Ø –∑–Ω–∞—é —ç—Ç–æ –º–µ—Å—Ç–æ," - —Å–∫–∞–∑–∞–ª–∞ –æ–Ω–∞. "–©–µ–ª—å –≤ –°–∏–±—É—è. –¢–∞–º —Ç–∏—Ö–æ. –¢–∞–º –º–æ–∂–Ω–æ —Å–ø—Ä—è—Ç–∞—Ç—å—Å—è –æ—Ç –≤—Å–µ–≥–æ."

–ö–æ–≥–¥–∞ –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–ª–∞—Å—å –±–æ–∫–æ–º - –∏—Å—á–µ–∑–∞–ª–∞. –ë—É–∫–≤–∞–ª—å–Ω–æ. –ö–∞–∫ –±—É–¥—Ç–æ –µ—ë —Ç–æ–ª—â–∏–Ω–∞ = 0.`,
                        metadata: '–†–∞–±–æ—á–∏–µ –∑–∞–º–µ—Ç–∫–∏',
                        courses: [
                            { id: 'text_course', title: '–¢–µ–∫—Å—Ç–æ–≤—ã–π –∫—É—Ä—Å', price: '5,500‚ÇΩ' },
                            { id: 'procreate_course', title: '–†–∏—Å–æ–≤–∞–Ω–∏–µ –≤ Procreate', price: '7,500‚ÇΩ' }
                        ],
                        coursesText: '–†–∞–±–æ—Ç–∞ —Å –Ω–µ–æ–±—ã—á–Ω—ã–º–∏ –∫–ª–∏–µ–Ω—Ç–∞–º–∏ —Ç—Ä–µ–±—É–µ—Ç –æ—Å–æ–±—ã—Ö –Ω–∞–≤—ã–∫–æ–≤. –ò–∑—É—á–∏ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—é —Ç–∞—Ç—É–∏—Ä–æ–≤–æ–∫ –∏ —Å–∏–º–≤–æ–ª–∏–∫—É.'
                    },
                    {
                        symbol: 'Èè°',
                        title: '–ö–∏—Å–∞–∏-–º–æ—Ç–æ–∫–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è',
                        timestamp: '20.11.05 - 02:15',
                        type: 'corrupted',
                        content: `–í –∑–µ—Ä–∫–∞–ª–µ —Å—Ç—É–¥–∏–∏... –æ–Ω–∞ –µ—Å—Ç—å. –ö–∏—Å–∞–∏-–º–æ—Ç–æ–∫–æ –∏–∑ –≥–æ—Ä–æ–¥—Å–∫–æ–π –ª–µ–≥–µ–Ω–¥—ã.

–ù–æ –Ω–µ —Ä–µ–±—ë–Ω–æ–∫. –í–∑—Ä–æ—Å–ª–∞—è –∂–µ–Ω—â–∏–Ω–∞, —Å–ø–ª—é—â–µ–Ω–Ω–∞—è –¥–æ —Ç–æ–ª—â–∏–Ω—ã –±—É–º–∞–≥–∏. –ü—ã—Ç–∞–µ—Ç—Å—è –≤—ã–±—Ä–∞—Ç—å—Å—è –∏–∑ —Ä–∞–º—ã –∑–µ—Ä–∫–∞–ª–∞.

–ú–∞—à–µ—Ç –º–Ω–µ —Ä—É–∫–æ–π. –ó–æ–≤—ë—Ç –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è.`,
                        metadata: '–§–ê–ô–õ –ü–û–í–†–ï–ñ–î–Å–ù - –ß–ê–°–¢–ò–ß–ù–û–ï –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï'
                    },
                    {
                        symbol: 'Ë°ó',
                        title: '–û—Ö–æ—Ç–∞ –Ω–∞ —â–µ–ª–∏',
                        timestamp: '25.11.05 - 14:33',
                        type: 'corrupted',
                        content: `–ù–∞—á–∞–ª–∞ –∏—Å–∫–∞—Ç—å —â–µ–ª–∏ –ø–æ –≤—Å–µ–º—É –¢–æ–∫–∏–æ. –ú–µ–∂–¥—É –∑–¥–∞–Ω–∏—è–º–∏, –º–µ–∂–¥—É —ç—Å–∫–∞–ª–∞—Ç–æ—Ä–∞–º–∏ –≤ –º–µ—Ç—Ä–æ, –≤ –ø–µ—Ä–µ—Ö–æ–¥–∞—Ö –°–∏–±—É—è.

–ò –≤ –∫–∞–∂–¥–æ–π - —Å–∏–ª—É—ç—Ç—ã –ª—é–¥–µ–π. –ü–ª–æ—Å–∫–∏–µ, –∫–∞–∫ —Ç–µ–Ω–∏. –û–Ω–∏ –º–∞—à—É—Ç –º–Ω–µ. –ü—Ä–∏–≥–ª–∞—à–∞—é—Ç –≤–æ–π—Ç–∏.

–°–µ–≥–æ–¥–Ω—è –ø–æ–ø—Ä–æ–±–æ–≤–∞–ª–∞ –ø—Ä–æ—Ç–∏—Å–Ω—É—Ç—å—Å—è –≤ —É–∑–∫–∏–π –ø—Ä–æ—Ö–æ–¥. –ü–æ–ª—É—á–∏–ª–æ—Å—å! –°—Ç–∞–ª–∞ —Ç–æ–Ω—å—à–µ. –ö–æ–∂–∞ —Ä–∞—Å—Ç—è–Ω—É–ª–∞—Å—å, –Ω–æ –Ω–µ –ø–æ—Ä–≤–∞–ª–∞—Å—å.`,
                        metadata: '–ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ',
                        courses: [
                            { id: 'smm_course', title: '–í–µ–¥–µ–Ω–∏–µ —Å–æ—Ü—Å–µ—Ç–µ–π –¥–ª—è —Ç–∞—Ç—É', price: '12,500‚ÇΩ' }
                        ],
                        coursesText: '–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π –Ω–µ–æ–±—ã—á–Ω—ã–µ –º–µ—Å—Ç–∞ –¢–æ–∫–∏–æ –≤ —Å–æ—Ü—Å–µ—Ç—è—Ö. –£—Ä–±–∞–Ω–∏—Å—Ç–∏—á–µ—Å–∫–∞—è —ç—Å—Ç–µ—Ç–∏–∫–∞ –ø–æ–ø—É–ª—è—Ä–Ω–∞ —É –º–æ–ª–æ–¥–µ–∂–∏.'
                    },
                    {
                        symbol: 'Áóõ',
                        title: '–§–∏–∑–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è',
                        timestamp: '28.11.05 - 09:45',
                        type: 'corrupted',
                        content: `–¢–µ–ª–æ –º–µ–Ω—è–µ—Ç—Å—è. –°—Ç–∞–Ω–æ–≤–ª—é—Å—å –ø–ª–æ—Å–∫–æ–π. –†—ë–±—Ä–∞ –ø–æ—á—Ç–∏ –Ω–µ –ø—Ä–æ—â—É–ø—ã–≤–∞—é—Ç—Å—è.

–ö–ª–∏–µ–Ω—Ç—ã –∂–∞–ª—É—é—Ç—Å—è: "–ö–æ–≥–¥–∞ —Ç—ã –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ—à—å—Å—è –±–æ–∫–æ–º, —Ç–µ–±—è –Ω–µ –≤–∏–¥–Ω–æ."

–°–µ–≥–æ–¥–Ω—è –ø—Ä–æ—à–ª–∞ –º–µ–∂–¥—É –¥–≤—É–º—è –ø—Ä–∏–ø–∞—Ä–∫–æ–≤–∞–Ω–Ω—ã–º–∏ –º–∞—à–∏–Ω–∞–º–∏. –ë–æ–∫–æ–º. –ó–∞–∑–æ—Ä 10 —Å–º. –ö–∞–∫ –ª–∏—Å—Ç –±—É–º–∞–≥–∏.`,
                        metadata: '–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –∑–∞–º–µ—Ç–∫–∏'
                    },
                    {
                        symbol: 'Ë®ò',
                        title: '–ö–æ–ª–ª–µ–∫—Ç–∏–≤–Ω–∞—è –ø–∞–º—è—Ç—å —â–µ–ª–µ–π',
                        timestamp: '01.12.05 - 16:20',
                        type: 'system',
                        content: `–í–ù–ò–ú–ê–ù–ò–ï: –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è –¥—Ä—É–≥–∏—Ö –ª—é–¥–µ–π.

–§–ê–ô–õ: gap_memories.dat
–°–û–î–ï–†–ñ–ê–ù–ò–ï: –í–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è –ª—é–¥–µ–π, "–ø—Ä–æ–≤–∞–ª–∏–≤—à–∏—Ö—Å—è" –≤ —â–µ–ª–∏ –¢–æ–∫–∏–æ —Å 1960-—Ö.

–û—Ñ–∏—Å–Ω—ã–µ —Ä–∞–±–æ—Ç–Ω–∏–∫–∏, —Å—Ç—É–¥–µ–Ω—Ç—ã, –¥–æ–º–æ—Ö–æ–∑—è–π–∫–∏. –í—Å–µ –∏—Å–∫–∞–ª–∏ –º–µ—Å—Ç–æ, –≥–¥–µ –º–æ–∂–Ω–æ —Å–ø—Ä—è—Ç–∞—Ç—å—Å—è –æ—Ç –∫–∞—Ä—å–µ—Ä—ã, —ç–∫–∑–∞–º–µ–Ω–æ–≤, —Å–µ–º–µ–π–Ω–æ–≥–æ –¥–∞–≤–ª–µ–Ω–∏—è.

–°–¢–ê–¢–£–°: –ö–æ–ª–ª–µ–∫—Ç–∏–≤–Ω–æ–µ —Å–æ–∑–Ω–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ.`,
                        metadata: '–°–ò–°–¢–ï–ú–ù–û–ï –°–û–û–ë–©–ï–ù–ò–ï'
                    },
                    {
                        symbol: 'È≠Ç',
                        title: '–ü—Ä–∞–≤–¥–∞ –æ –©–µ–ª–∏',
                        timestamp: '05.12.05 - 22:17',
                        type: 'corrupted',
                        content: `–ü–æ–Ω–∏–º–∞—é —Ç–µ–ø–µ—Ä—å. –©–µ–ª—å –≤ –°–∏–±—É—è - —ç—Ç–æ –Ω–µ –º–µ—Å—Ç–æ. –≠—Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ.

–°–ø–æ—Å–æ–± —Å—Ç–∞—Ç—å –Ω–µ–≤–∏–¥–∏–º–æ–π –≤ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–Ω–æ–º –≥–æ—Ä–æ–¥–µ. –ò—Å—á–µ–∑–Ω—É—Ç—å –º–µ–∂–¥—É –∑–¥–∞–Ω–∏—è–º–∏, –º–µ–∂–¥—É –ª—é–¥—å–º–∏, –º–µ–∂–¥—É –æ–∂–∏–¥–∞–Ω–∏—è–º–∏.

–ö–ª–∏–µ–Ω—Ç–∫–∞ –Ω–∞—É—á–∏–ª–∞ –º–µ–Ω—è. –Ø –±–æ–ª—å—à–µ –Ω–µ —Ç—Ä—ë—Ö–º–µ—Ä–Ω–∞—è. –Ø –∂–∏–≤—É –º–µ–∂–¥—É –∏–∑–º–µ—Ä–µ–Ω–∏—è–º–∏.`,
                        metadata: '–õ–∏—á–Ω—ã–π –¥–Ω–µ–≤–Ω–∏–∫ - –ø–æ—Å–ª–µ–¥–Ω—è—è –∑–∞–ø–∏—Å—å'
                    },
                    {
                        symbol: 'ÈÅ∏',
                        title: '–ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—ã–±–æ—Ä',
                        timestamp: '07.12.05 - 03:00',
                        type: 'system',
                        content: `–ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –°–û–°–¢–û–Ø–ù–ò–ï: –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è.

–ê–∏—Ä–∞ –º–æ–∂–µ—Ç –≤—ã–±—Ä–∞—Ç—å:
1. –û—Å—Ç–∞—Ç—å—Å—è –≤ —â–µ–ª–∏ –Ω–∞–≤—Å–µ–≥–¥–∞ - —Å—Ç–∞—Ç—å —á–∞—Å—Ç—å—é –∫–æ–ª–ª–µ–∫—Ç–∏–≤–Ω–æ–≥–æ —Å–æ–∑–Ω–∞–Ω–∏—è –ø–ª–æ—Å–∫–∏—Ö –ª—é–¥–µ–π
2. –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ 3D-–º–∏—Ä - –Ω–æ –ø–æ—Ç–µ—Ä—è—Ç—å —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —Å–∫—Ä—ã–≤–∞—Ç—å—Å—è
3. –°—Ç–∞—Ç—å –ø—Ä–æ–≤–æ–¥–Ω–∏–∫–æ–º - –ø–æ–º–æ–≥–∞—Ç—å –¥—Ä—É–≥–∏–º –Ω–∞—Ö–æ–¥–∏—Ç—å —â–µ–ª–∏

–¢–†–ï–ë–£–ï–¢–°–Ø –†–ï–®–ï–ù–ò–ï –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø.`,
                        metadata: '–¢–†–ï–ë–£–ï–¢–°–Ø –†–ï–®–ï–ù–ò–ï',
                        courses: [
                            { id: 'consultation', title: '–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è —Ç–∞—Ç—É-–º–∞—Å—Ç–µ—Ä–∞', price: '3,000‚ÇΩ' }
                        ],
                        coursesText: '–°–ª–æ–∂–Ω—ã–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–µ –≤—ã–±–æ—Ä—ã —Ç—Ä–µ–±—É—é—Ç –º—É–¥—Ä–æ—Å—Ç–∏. –ü–æ–ª—É—á–∏ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é –æ –ø–æ–∏—Å–∫–µ —Å–≤–æ–µ–≥–æ –ø—É—Ç–∏.'
                    }
                ];
            }

            updateChoicesForMemory(memory, memoryNumber) {
                this.choicesContainer.innerHTML = '';

                if (memoryNumber < this.getMemories().length) {
                    this.addChoice('üìñ –°–ª–µ–¥—É—é—â–∞—è –∑–∞–ø–∏—Å—å', 'next_memory', false, () => {
                        this.showMemory(memoryNumber + 1);
                    });
                }

                if (memoryNumber >= 3) {
                    this.addChoice('üó∫Ô∏è –ù–∞–π—Ç–∏ —â–µ–ª–∏ –≤ –¢–æ–∫–∏–æ', 'find_gaps', false, () => {
                        this.showGapMap();
                    });
                }

                if (memoryNumber >= 6) {
                    this.addChoice('üë• –ò—Å—Ç–æ—Ä–∏–∏ –¥—Ä—É–≥–∏—Ö "–ø–ª–æ—Å–∫–∏—Ö"', 'flat_people', false, () => {
                        this.showFlatPeopleStories();
                    });
                }

                if (memoryNumber === 8) {
                    this.addChoice('üè† –û—Å—Ç–∞—Ç—å—Å—è –≤ —â–µ–ª–∏ –Ω–∞–≤—Å–µ–≥–¥–∞', 'stay_gap', true, () => {
                        this.showEnding('stay');
                    });
                    this.addChoice('üåç –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –æ–±—ã—á–Ω—ã–π –º–∏—Ä', 'return_3d', false, () => {
                        this.showEnding('return');
                    });
                    this.addChoice('ü§ù –°—Ç–∞—Ç—å –ø—Ä–æ–≤–æ–¥–Ω–∏–∫–æ–º –º–µ–∂–¥—É –º–∏—Ä–∞–º–∏', 'become_guide', false, () => {
                        this.showEnding('guide');
                    });
                }

                if (!this.gameState.coursesViewed && memoryNumber >= 2) {
                    this.addChoice('üéì –ò–∑—É—á–∏—Ç—å —Ç–∞—Ç—É-–º–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ', 'view_courses', false, () => {
                        this.showCoursesOverview();
                    });
                }
            }

            showGapMap() {
                this.gameContent.innerHTML = `
                    <div style="padding: 15px;">
                        <div class="nav-button" onclick="game.showMemory(${this.currentMemory})" style="margin-bottom: 15px;">‚Üê –ö –∑–∞–ø–∏—Å—è–º</div>
                        
                        <div style="text-align: center; margin-bottom: 20px;">
                            <div class="japanese-text" style="font-size: 16px; color: var(--accent-blue);">
                                <span class="japanese-symbol">Èöô</span>–ö–ê–†–¢–ê –©–ï–õ–ï–ô –¢–û–ö–ò–û
                            </div>
                        </div>

                        <div class="memory-entry normal">
                            <div class="memory-text">
                                üìç <strong>–°–∏–±—É—è</strong> - –ì–ª–∞–≤–Ω–∞—è —â–µ–ª—å –º–µ–∂–¥—É –∑–¥–∞–Ω–∏—è–º–∏ 109 –∏ —Ü–µ–Ω—Ç—Ä–æ–º. –®–∏—Ä–∏–Ω–∞: 15 —Å–º.
                                <br><br>
                                –ó–¥–µ—Å—å –Ω–∞—á–∞–ª–æ—Å—å –≤—Å—ë. –ü–æ—Ä—Ç–∞–ª –º–µ–∂–¥—É –∏–∑–º–µ—Ä–µ–Ω–∏—è–º–∏.
                            </div>
                        </div>

                        <div class="memory-entry normal">
                            <div class="memory-text">
                                üöá <strong>–°—Ç–∞–Ω—Ü–∏—è –°–∏–Ω–¥–∑—é–∫—É</strong> - –©–µ–ª–∏ –º–µ–∂–¥—É –≤–∞–≥–æ–Ω–∞–º–∏ –ø–æ–µ–∑–¥–æ–≤ JR.
                                <br><br>
                                –ü–ª–æ—Å–∫–∏–µ –ª—é–¥–∏ –ø—É—Ç–µ—à–µ—Å—Ç–≤—É—é—Ç –ø–æ –≥–æ—Ä–æ–¥—É, –∑–∞–∂–∞—Ç—ã–µ –º–µ–∂–¥—É —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–æ–º.
                            </div>
                        </div>

                        <div class="memory-entry corrupted">
                            <div class="memory-text">
                                üè¢ <strong>–†–∞–π–æ–Ω –ì–∏–Ω–∑–∞</strong> - –ú–∏–∫—Ä–æ—â–µ–ª–∏ –º–µ–∂–¥—É –≤–∏—Ç—Ä–∏–Ω–∞–º–∏ –º–∞–≥–∞–∑–∏–Ω–æ–≤.
                                <br><br>
                                –û—Ñ–∏—Å–Ω—ã–µ —Ä–∞–±–æ—Ç–Ω–∏–∫–∏ –ø—Ä—è—á—É—Ç—Å—è –æ—Ç –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –¥–∞–≤–ª–µ–Ω–∏—è.
                            </div>
                        </div>

                        <div class="memory-entry system">
                            <div class="memory-text">
                                –í–°–ï–ì–û –û–ë–ù–ê–†–£–ñ–ï–ù–û: 47 –∞–∫—Ç–∏–≤–Ω—ã—Ö —â–µ–ª–µ–π
                                <br>
                                –ù–ê–°–ï–õ–Å–ù–ù–û–°–¢–¨: ~200 –ø–ª–æ—Å–∫–∏—Ö –ª—é–¥–µ–π
                                <br>
                                –°–¢–ê–¢–£–°: –ü–æ–ø—É–ª—è—Ü–∏—è —Ä–∞—Å—Ç—ë—Ç
                            </div>
                        </div>
                    </div>
                `;

                this.choicesContainer.innerHTML = '';
                this.addChoice('üì± –°—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä–æ–≤–∞—Ç—å —â–µ–ª–∏', 'photo_gaps', false, () => {
                    this.showGapPhotos();
                });
                this.addChoice('üö∂‚Äç‚ôÄÔ∏è –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –≤–æ–π—Ç–∏ –≤ —â–µ–ª—å', 'enter_gap', true, () => {
                    this.showGapEntry();
                });
            }

            showFlatPeopleStories() {
                this.gameContent.innerHTML = `
                    <div style="padding: 15px;">
                        <div class="nav-button" onclick="game.showMemory(${this.currentMemory})" style="margin-bottom: 15px;">‚Üê –ö –∑–∞–ø–∏—Å—è–º</div>
                        
                        <div style="text-align: center; margin-bottom: 20px;">
                            <div class="japanese-text" style="font-size: 16px; color: var(--accent-purple);">
                                <span class="japanese-symbol">‰∫∫</span>–ò–°–¢–û–†–ò–ò –ü–õ–û–°–ö–ò–• –õ–Æ–î–ï–ô
                            </div>
                        </div>

                        <div class="memory-entry normal">
                            <div class="memory-header">
                                <span>–¢–∞–Ω–∞–∫–∞ –•–∏—Ä–æ—à–∏ ‚Ä¢ –°–∞–ª–∞—Ä–∏–º–∞–Ω ‚Ä¢ 1987</span>
                                <span>–í–æ–∑—Ä–∞—Å—Ç: 35</span>
                            </div>
                            <div class="memory-text">
                                "–†–∞–±–æ—Ç–∞–ª –ø–æ 16 —á–∞—Å–æ–≤ –≤ –¥–µ–Ω—å. –©–µ–ª—å –º–µ–∂–¥—É –æ—Ñ–∏—Å–Ω—ã–º–∏ –∑–¥–∞–Ω–∏—è–º–∏ —Å—Ç–∞–ª–∞ –º–æ–∏–º —É–±–µ–∂–∏—â–µ–º. –¢–µ–ø–µ—Ä—å –∂–∏–≤—É —Ç–∞–º. –ù–∏–∫—Ç–æ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –æ—Ç—á—ë—Ç–æ–≤."
                            </div>
                        </div>

                        <div class="memory-entry normal">
                            <div class="memory-header">
                                <span>–Ø–º–∞–¥–∞ –ú–∏–∫–∏ ‚Ä¢ –°—Ç—É–¥–µ–Ω—Ç–∫–∞ ‚Ä¢ 2003</span>
                                <span>–í–æ–∑—Ä–∞—Å—Ç: 19</span>
                            </div>
                            <div class="memory-text">
                                "–†–æ–¥–∏—Ç–µ–ª–∏ –∂–¥–∞–ª–∏, —á—Ç–æ –ø–æ—Å—Ç—É–ø–ª—é –≤ –¢–æ–∫–∏–π—Å–∫–∏–π —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç. –î–∞–≤–ª–µ–Ω–∏–µ –±—ã–ª–æ –Ω–µ–≤—ã–Ω–æ—Å–∏–º—ã–º. –í —â–µ–ª–∏ —Ç–∏—Ö–æ. –ú–æ–∂–Ω–æ –±—ã—Ç—å —Å–æ–±–æ–π."
                            </div>
                        </div>

                        <div class="memory-entry corrupted">
                            <div class="memory-header">
                                <span>–°–∞—Ç–æ –≠–º–∏ ‚Ä¢ –î–æ–º–æ—Ö–æ–∑—è–π–∫–∞ ‚Ä¢ 1999</span>
                                <span>–í–æ–∑—Ä–∞—Å—Ç: 28</span>
                            </div>
                            <div class="memory-text">
                                "–ú—É–∂, —Å–≤–µ–∫—Ä–æ–≤—å, –¥–µ—Ç–∏ - –≤—Å–µ —Ç—Ä–µ–±–æ–≤–∞–ª–∏ –∏–¥–µ–∞–ª—å–Ω–æ—Å—Ç–∏. –Ø —Å—Ç–∞–ª–∞ –ø–ª–æ—Å–∫–æ–π –æ—Ç –∏—Ö –æ–∂–∏–¥–∞–Ω–∏–π. –©–µ–ª—å –ø—Ä–æ—Å—Ç–æ —Å–¥–µ–ª–∞–ª–∞ —ç—Ç–æ –±—É–∫–≤–∞–ª—å–Ω—ã–º."
                            </div>
                        </div>

                        <div class="memory-entry system">
                            <div class="memory-text">
                                –ü–ê–¢–¢–ï–†–ù: –í—Å–µ –ø–ª–æ—Å–∫–∏–µ –ª—é–¥–∏ - –∂–µ—Ä—Ç–≤—ã —Å–æ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –¥–∞–≤–ª–µ–Ω–∏—è —è–ø–æ–Ω—Å–∫–æ–≥–æ –æ–±—â–µ—Å—Ç–≤–∞.
                                <br><br>
                                –©–µ–ª–∏ = –º–µ—Ç–∞—Ñ–æ—Ä–∞ —ç—Å–∫–∞–ø–∏–∑–º–∞.
                            </div>
                        </div>
                    </div>
                `;

                this.choicesContainer.innerHTML = '';
                this.addChoice('üí¨ –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø–æ–≥–æ–≤–æ—Ä–∏—Ç—å —Å –Ω–∏–º–∏', 'talk_flat', false, () => {
                    this.showFlatConversation();
                });
                this.addChoice('üìñ –ó–∞–ø–∏—Å–∞—Ç—å –∏—Ö –∏—Å—Ç–æ—Ä–∏–∏', 'record_stories', false, () => {
                    this.showStoryRecording();
                });
            }

            showCoursesOverview() {
                this.gameState.coursesViewed = true;
                
                this.gameContent.innerHTML = `
                    <div style="padding: 15px;">
                        <div class="nav-button" onclick="game.showMemory(${this.currentMemory})" style="margin-bottom: 15px;">‚Üê –ö –∑–∞–ø–∏—Å—è–º</div>
                        
                        <div style="text-align: center; margin-bottom: 20px;">
                            <div class="japanese-text" style="font-size: 16px; color: var(--text-primary);">
                                <span class="japanese-symbol">Â≠¶</span>–ê–ö–ê–î–ï–ú–ò–Ø –¢–ê–¢–£-–ú–ê–°–¢–ï–†–°–¢–í–ê
                            </div>
                            <div style="font-size: 12px; color: var(--text-secondary);">–ü–æ —Å–ª–µ–¥–∞–º –ê–∏—Ä—ã –ú–∞—Ü—É–∏</div>
                        </div>

                        <div class="memory-entry normal">
                            <div class="memory-text">
                                –ò—Å—Ç–æ—Ä–∏—è –ê–∏—Ä—ã –ø–æ–∫–∞–∑–∞–ª–∞ —Ç—ë–º–Ω—É—é —Å—Ç–æ—Ä–æ–Ω—É –∏–∑–æ–ª—è—Ü–∏–∏. –ù–æ –µ—Å—Ç—å –∏ —Å–≤–µ—Ç–ª–∞—è - –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ, –∫–æ—Ç–æ—Ä–æ–µ –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –ª—é–¥–µ–π —á–µ—Ä–µ–∑ –∏—Å–∫—É—Å—Å—Ç–≤–æ.
                            </div>
                        </div>

                        <div style="margin: 15px 0; background: rgba(0, 255, 170, 0.1); border: 1px solid var(--text-primary); border-radius: 8px; padding: 15px;">
                            <div style="font-size: 13px; font-weight: bold; margin-bottom: 10px; color: var(--text-primary);">–î–û–°–¢–£–ü–ù–´–ï –ö–£–†–°–´:</div>
                            
                            <div style="margin: 8px 0; padding: 8px; background: rgba(255, 0, 128, 0.1); border-radius: 4px;">
                                <strong>–ü–æ–ª–Ω—ã–π –∫—É—Ä—Å —Ç–∞—Ç—É-–º–∞—Å—Ç–µ—Ä–∞</strong> - 22,500‚ÇΩ (–±—ã–ª–æ 45,000‚ÇΩ)
                                <br><small>–¢–µ–æ—Ä–∏—è + –≤–∏–¥–µ–æ + –Ω–∞—Å—Ç–∞–≤–Ω–∏—á–µ—Å—Ç–≤–æ ‚Ä¢ 1-2 –º–µ—Å—è—Ü–∞</small>
                                <button class="course-button" onclick="game.showCourse('full_course')">üéì –ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
                            </div>

                            <div style="margin: 8px 0; padding: 8px; background: rgba(0, 153, 255, 0.1); border-radius: 4px;">
                                <strong>–ë–∞–∑–æ–≤—ã–π –∫—É—Ä—Å —Å –≤–∏–¥–µ–æ</strong> - 12,500‚ÇΩ (–±—ã–ª–æ 25,000‚ÇΩ)
                                <br><small>–¢–µ–æ—Ä–∏—è + –≤–∏–¥–µ–æ + —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Å–æ–∑–≤–æ–Ω</small>
                                <button class="course-button" onclick="game.showCourse('basic_course')">üéì –ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
                            </div>

                            <div style="margin: 8px 0; padding: 8px; background: rgba(138, 43, 226, 0.1); border-radius: 4px;">
                                <strong>–í–µ–¥–µ–Ω–∏–µ —Å–æ—Ü—Å–µ—Ç–µ–π –¥–ª—è —Ç–∞—Ç—É</strong> - 12,500‚ÇΩ (–±—ã–ª–æ 25,000‚ÇΩ)
                                <br><small>Reels, TikTok, –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ ‚Ä¢ 3 –Ω–µ–¥–µ–ª–∏</small>
                                <button class="course-button" onclick="game.showCourse('smm_course')">üéì –ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
                            </div>
                        </div>

                        <div class="memory-entry system">
                            <div class="memory-text">
                                üéÅ –ü—Ä–æ–º–æ–∫–æ–¥ SUKIMA50 - —Å–∫–∏–¥–∫–∞ 50% –Ω–∞ –≤—Å–µ –∫—É—Ä—Å—ã
                                <br>+ –ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è —Å –º–∞—Å—Ç–µ—Ä–æ–º
                                <br><br>
                                <em>–í –ø–∞–º—è—Ç—å –æ–± –ê–∏—Ä–µ - –Ω–∞–π–¥–∏ —Å–≤—è–∑—å —Å –º–∏—Ä–æ–º —á–µ—Ä–µ–∑ –∏—Å–∫—É—Å—Å—Ç–≤–æ</em>
                            </div>
                        </div>
                    </div>
                `;

                this.choicesContainer.innerHTML = '';
                this.addChoice('üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥', 'copy_promo', false, () => {
                    if (navigator.clipboard) {
                        navigator.clipboard.writeText('SUKIMA50');
                    }
                    this.showNotification('–ü—Ä–æ–º–æ–∫–æ–¥ SUKIMA50 —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!');
                });
            }

            showCourse(courseId) {
                const courses = {
                    'full_course': {
                        title: '–ü–û–õ–ù–´–ô –ö–£–†–° –¢–ê–¢–£-–ú–ê–°–¢–ï–†–ê',
                        description: '–°—Ç–∞–Ω—å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–º —Ç–∞—Ç—É-–º–∞—Å—Ç–µ—Ä–æ–º, –∫–∞–∫ –ê–∏—Ä–∞. –°–æ–∑–¥–∞–≤–∞–π –∏—Å–∫—É—Å—Å—Ç–≤–æ, –∫–æ—Ç–æ—Ä–æ–µ –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç, –∞ –Ω–µ –∏–∑–æ–ª–∏—Ä—É–µ—Ç.',
                        skills: ['–¢–µ–æ—Ä–∏—è —Ç–∞—Ç—É–∏—Ä–æ–≤–∫–∏', '–†–∞–±–æ—Ç–∞ —Å –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ–º', '–≠—Å–∫–∏–∑—ã –∏ –¥–∏–∑–∞–π–Ω', '–ì–∏–≥–∏–µ–Ω–∞ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å', '–ü—Å–∏—Ö–æ–ª–æ–≥–∏—è –∫–ª–∏–µ–Ω—Ç–∞', '–†–∞–∑–≤–∏—Ç–∏–µ —Å—Ç—É–¥–∏–∏'],
                        duration: '1-2 –º–µ—Å—è—Ü–∞',
                        project: '–°–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è —Ç–∞—Ç—É-—Å—Ç—É–¥–∏—è',
                        price: '45,000‚ÇΩ',
                        salePrice: '22,500‚ÇΩ'
                    },
                    'basic_course': {
                        title: '–ë–ê–ó–û–í–´–ô –ö–£–†–° –° –í–ò–î–ï–û',
                        description: '–û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ä—Ç –≤ —Ç–∞—Ç—É-–º–∞—Å—Ç–µ—Ä—Å—Ç–≤–µ. –¢–µ–æ—Ä–∏—è + –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –≤–∏–¥–µ–æ-—É—Ä–æ–∫–∏ –æ—Ç –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–æ–≤.',
                        skills: ['–û—Å–Ω–æ–≤—ã —Ç–∞—Ç—É–∏—Ä–æ–≤–∫–∏', '–í–∏–¥–µ–æ-—É—Ä–æ–∫–∏', '–°–æ–∑–¥–∞–Ω–∏–µ —ç—Å–∫–∏–∑–æ–≤', '–†–∞–±–æ—Ç–∞ —Å –ø–∏–≥–º–µ–Ω—Ç–æ–º', '–ë–∞–∑–æ–≤–æ–µ –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ'],
                        duration: '1-2 –º–µ—Å—è—Ü–∞',
                        project: '–ü–µ—Ä–≤—ã–µ —Ç–∞—Ç—É–∏—Ä–æ–≤–∫–∏',
                        price: '25,000‚ÇΩ',
                        salePrice: '12,500‚ÇΩ'
                    },
                    'smm_course': {
                        title: '–í–ï–î–ï–ù–ò–ï –°–û–¶–°–ï–¢–ï–ô –î–õ–Ø –¢–ê–¢–£',
                        description: '–ù–∞—É—á–∏—Å—å —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏–∏ —á–µ—Ä–µ–∑ —Å–æ—Ü—Å–µ—Ç–∏. –ö–∞–∫ –ê–∏—Ä–∞ –≤–µ–ª–∞ –¥–Ω–µ–≤–Ω–∏–∫, –Ω–æ —Å –ø–æ–ª—å–∑–æ–π –¥–ª—è –±–∏–∑–Ω–µ—Å–∞.',
                        skills: ['–ë—Ä–µ–Ω–¥ —Ç–∞—Ç—É-–º–∞—Å—Ç–µ—Ä–∞', '–ö–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è Instagram', 'TikTok –∏ Reels', '–†–∞–±–æ—Ç–∞ —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏', '–ü—Ä–æ–¥–∞–∂–∏ –≤ —Å–æ—Ü—Å–µ—Ç—è—Ö'],
                        duration: '3 –Ω–µ–¥–µ–ª–∏',
                        project: '–ü–æ–ø—É–ª—è—Ä–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å',
                        price: '25,000‚ÇΩ',
                        salePrice: '12,500‚ÇΩ'
                    }
                };

                const course = courses[courseId];
                this.gameContent.innerHTML = `
                    <div style="padding: 15px;">
                        <div class="nav-button" onclick="game.showCoursesOverview()" style="margin-bottom: 15px;">‚Üê –ö –∫—É—Ä—Å–∞–º</div>
                        
                        <div style="text-align: center; margin-bottom: 20px;">
                            <div style="font-size: 16px; color: var(--accent-pink);">${course.title}</div>
                        </div>
                        
                        <div class="memory-entry normal">
                            <div class="memory-text">${course.description}</div>
                        </div>

                        <div class="memory-entry system">
                            <div class="memory-text">
                                <strong>–ò–∑—É—á–∏—à—å:</strong><br>
                                ${course.skills.map(skill => `‚Ä¢ ${skill}`).join('<br>')}
                            </div>
                        </div>

                        <div class="memory-entry normal">
                            <div class="memory-text">
                                <strong>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</strong> ${course.duration}<br>
                                <strong>–ò—Ç–æ–≥–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç:</strong> ${course.project}
                            </div>
                        </div>

                        <div class="memory-entry corrupted">
                            <div class="memory-text">
                                <span style="text-decoration: line-through; opacity: 0.6;">${course.price}</span><br>
                                <strong style="font-size: 18px; color: var(--text-primary);">${course.salePrice}</strong><br>
                                <span style="font-size: 10px;">üî• –°–∫–∏–¥–∫–∞ 50% –≤ –ø–∞–º—è—Ç—å –æ–± –ê–∏—Ä–µ</span>
                            </div>
                        </div>
                    </div>
                `;

                this.choicesContainer.innerHTML = '';
                this.addChoice('üí≥ –ö—É–ø–∏—Ç—å –∫—É—Ä—Å', 'buy_course', false, () => {
                    this.showPayment(course);
                });
                this.addChoice('üì± –£–∑–Ω–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ', 'more_info', false, () => {
                    if (tg) {
                        tg.openTelegramLink('https://t.me/your_support_bot');
                    }
                });
            }

            showPayment(course) {
                this.gameContent.innerHTML = `
                    <div style="padding: 15px; text-align: center;">
                        <div style="font-size: 16px; color: var(--text-primary); margin-bottom: 20px;">–û–§–û–†–ú–õ–ï–ù–ò–ï –ü–û–ö–£–ü–ö–ò</div>
                        
                        <div class="memory-entry system">
                            <div class="memory-text">–ö—É—Ä—Å: ${course.title}</div>
                        </div>

                        <div class="memory-entry normal">
                            <div class="memory-text">–ö –æ–ø–ª–∞—Ç–µ: <strong>${course.salePrice}</strong></div>
                        </div>

                        <div class="memory-entry corrupted">
                            <div class="memory-text">‚ö†Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ Telegram Payments</div>
                        </div>
                    </div>
                `;

                this.choicesContainer.innerHTML = '';
                this.addChoice('üí≥ –û–ø–ª–∞—Ç–∏—Ç—å —á–µ—Ä–µ–∑ Telegram', 'process_payment', false, () => {
                    this.processTelegramPayment(course);
                    this.showPaymentSuccess(course);
                });
            }

            showPaymentSuccess(course) {
                this.gameContent.innerHTML = `
                    <div style="padding: 15px; text-align: center;">
                        <div style="font-size: 16px; color: var(--text-primary); margin-bottom: 20px;">–ü–û–ö–£–ü–ö–ê –ó–ê–í–ï–†–®–ï–ù–ê</div>
                        
                        <div class="memory-entry system">
                            <div class="memory-text">‚úÖ –ö—É—Ä—Å "${course.title}" –ø—Ä–∏–æ–±—Ä–µ—Ç—ë–Ω!</div>
                        </div>

                        <div class="memory-entry normal">
                            <div class="memory-text">üìß –°—Å—ã–ª–∫–∞ –Ω–∞ –æ–±—É—á–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞<br>üí¨ –î–æ—Å—Ç—É–ø –∫ —á–∞—Ç—É —Å—Ç—É–¥–µ–Ω—Ç–æ–≤<br>üìö –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–æ—Å—Ç—É–ø–Ω—ã —Å—Ä–∞–∑—É</div>
                        </div>

                        <div class="memory-entry corrupted">
                            <div class="memory-text">üåü –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –ê–∏—Ä—ã, —Ç—ã –≤—ã–±—Ä–∞–ª–∞ —Å–≤—è–∑—å —Å –ª—é–¥—å–º–∏ —á–µ—Ä–µ–∑ –∏—Å–∫—É—Å—Å—Ç–≤–æ, –∞ –Ω–µ –∏–∑–æ–ª—è—Ü–∏—é –≤ —â–µ–ª—è—Ö.</div>
                        </div>
                    </div>
                `;

                this.choicesContainer.innerHTML = '';
                this.addChoice('üéì –ù–∞—á–∞—Ç—å –æ–±—É—á–µ–Ω–∏–µ', 'start_learning', false, () => {
                    if (tg) {
                        tg.openTelegramLink('https://your-learning-platform.com/start');
                    }
                    this.showCoursesOverview();
                });
            }

            showEnding(choice = null) {
                this.gameState.finalChoice = choice;
                this.gameState.truthRevealed = true;

                let endingContent = '';
                
                if (choice === 'stay') {
                    endingContent = `
                        <div class="memory-entry system">
                            <div class="memory-text">–ö–û–ù–¶–û–í–ö–ê: –ñ–ò–ó–ù–¨ –í –©–ï–õ–ò</div>
                        </div>
                        <div class="memory-entry corrupted">
                            <div class="memory-text">–¢—ã –≤—ã–±–∏—Ä–∞–µ—à—å –æ—Å—Ç–∞—Ç—å—Å—è –≤ –¥–≤—É–º–µ—Ä–Ω–æ–º –º–∏—Ä–µ. –°—Ç–∞–Ω–æ–≤–∏—à—å—Å—è —á–∞—Å—Ç—å—é –∫–æ–ª–ª–µ–∫—Ç–∏–≤–Ω–æ–≥–æ —Å–æ–∑–Ω–∞–Ω–∏—è –ø–ª–æ—Å–∫–∏—Ö –ª—é–¥–µ–π.</div>
                        </div>
                        <div class="memory-entry normal">
                            <div class="memory-text">–ë–æ–ª—å—à–µ –Ω–∏–∫–∞–∫–æ–≥–æ –¥–∞–≤–ª–µ–Ω–∏—è, –Ω–∏–∫–∞–∫–∏—Ö –æ–∂–∏–¥–∞–Ω–∏–π. –¢–æ–ª—å–∫–æ —Ç–∏—à–∏–Ω–∞ –º–µ–∂–¥—É –∑–¥–∞–Ω–∏—è–º–∏ –¢–æ–∫–∏–æ.</div>
                        </div>
                        <div class="memory-entry system">
                            <div class="memory-text">–ù–æ –∏ –Ω–∏–∫–∞–∫–∏—Ö –Ω–æ–≤—ã—Ö –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏–π. –í–µ—á–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è –æ—Ç –º–∏—Ä–∞.</div>
                        </div>
                    `;
                } else if (choice === 'return') {
                    endingContent = `
                        <div class="memory-entry system">
                            <div class="memory-text">–ö–û–ù–¶–û–í–ö–ê: –í–û–ó–í–†–ê–©–ï–ù–ò–ï</div>
                        </div>
                        <div class="memory-entry normal">
                            <div class="memory-text">–¢—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ—à—å—Å—è –≤ —Ç—Ä—ë—Ö–º–µ—Ä–Ω—ã–π –º–∏—Ä. –¢–æ–ª—â–∏–Ω–∞ —Ç–µ–ª–∞ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è.</div>
                        </div>
                        <div class="memory-entry corrupted">
                            <div class="memory-text">–ù–æ –æ–ø—ã—Ç –æ—Å—Ç–∞–µ—Ç—Å—è. –¢—ã –∑–Ω–∞–µ—à—å, –∫–∞–∫ —É–±–µ–∂–∞—Ç—å –æ—Ç –ø—Ä–æ–±–ª–µ–º. –ò —ç—Ç–æ –∑–Ω–∞–Ω–∏–µ –æ–ø–∞—Å–Ω–æ.</div>
                        </div>
                        <div class="memory-entry system">
                            <div class="memory-text">–ü—Ä–∏–¥—ë—Ç—Å—è —É—á–∏—Ç—å—Å—è —Å–ø—Ä–∞–≤–ª—è—Ç—å—Å—è —Å –¥–∞–≤–ª–µ–Ω–∏–µ–º –∑–¥–æ—Ä–æ–≤—ã–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏.</div>
                        </div>
                    `;
                } else if (choice === 'guide') {
                    endingContent = `
                        <div class="memory-entry system">
                            <div class="memory-text">–ö–û–ù–¶–û–í–ö–ê: –ü–†–û–í–û–î–ù–ò–ö</div>
                        </div>
                        <div class="memory-entry normal">
                            <div class="memory-text">–¢—ã —Å—Ç–∞–Ω–æ–≤–∏—à—å—Å—è –º–æ—Å—Ç–æ–º –º–µ–∂–¥—É –º–∏—Ä–∞–º–∏. –ü–æ–º–æ–≥–∞–µ—à—å –ª—é–¥—è–º –Ω–∞–π—Ç–∏ –±–∞–ª–∞–Ω—Å.</div>
                        </div>
                        <div class="memory-entry corrupted">
                            <div class="memory-text">–ù–µ–∫–æ—Ç–æ—Ä—ã—Ö —É—á–∏—à—å –Ω–∞—Ö–æ–¥–∏—Ç—å —â–µ–ª–∏ –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –æ—Ç–¥—ã—Ö–∞. –î—Ä—É–≥–∏—Ö - –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è –∫ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏.</div>
                        </div>
                        <div class="memory-entry system">
                            <div class="memory-text">–ú—É–¥—Ä—ã–π –≤—ã–±–æ—Ä. –ò–∑–æ–ª—è—Ü–∏—è –∏ —Å–≤—è–∑—å –¥–æ–ª–∂–Ω—ã –¥–æ–ø–æ–ª–Ω—è—Ç—å –¥—Ä—É–≥ –¥—Ä—É–≥–∞.</div>
                        </div>
                    `;
                } else {
                    endingContent = `
                        <div class="memory-entry system">
                            <div class="memory-text">–¢–ê–ô–ù–ê –†–ê–°–ö–†–´–¢–ê</div>
                        </div>
                        <div class="memory-entry normal">
                            <div class="memory-text">–¢–µ–ª–µ—Ñ–æ–Ω –≤—ã–∫–ª—é—á–∞–µ—Ç—Å—è. –ó–∞–ø–∏—Å–∏ –∏—Å—á–µ–∑–∞—é—Ç. –û—Å—Ç–∞—ë—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤–æ–ø—Ä–æ—Å...</div>
                        </div>
                        <div class="memory-entry corrupted">
                            <div class="memory-text">–°–∫–æ–ª—å–∫–æ –ª—é–¥–µ–π –≤ –¢–æ–∫–∏–æ –∂–∏–≤—ë—Ç –≤ —â–µ–ª—è—Ö –º–µ–∂–¥—É –∑–¥–∞–Ω–∏—è–º–∏? –ò –≥–æ—Ç–æ–≤–∞ –ª–∏ —Ç—ã –∏—Ö –Ω–∞–π—Ç–∏?</div>
                        </div>
                    `;
                }

                this.gameContent.innerHTML = `
                    <div style="padding: 15px;">
                        <div style="text-align: center; margin-bottom: 20px;">
                            <div class="japanese-text" style="font-size: 18px; color: var(--accent-pink);">
                                <span class="japanese-symbol">ÁµÇ</span>–§–ò–ù–ê–õ
                            </div>
                        </div>

                        ${endingContent}

                        <div style="margin-top: 20px; padding: 12px; background: rgba(0, 255, 170, 0.1); border: 1px solid var(--text-primary); border-radius: 8px;">
                            <div style="font-size: 11px; color: var(--text-primary); margin-bottom: 8px;">üí° –ü–û–°–õ–ï–°–õ–û–í–ò–ï</div>
                            <div style="font-size: 12px;">–ò—Å—Ç–æ—Ä–∏—è –ê–∏—Ä—ã –ø–æ–∫–∞–∑–∞–ª–∞ –≤–∞–∂–Ω–æ—Å—Ç—å –±–∞–ª–∞–Ω—Å–∞ –º–µ–∂–¥—É –æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–æ–º –∏ —Å–≤—è–∑—å—é —Å –ª—é–¥—å–º–∏. –¢–∞—Ç—É-–∏—Å–∫—É—Å—Å—Ç–≤–æ –º–æ–∂–µ—Ç —Å—Ç–∞—Ç—å —Å–ø–æ—Å–æ–±–æ–º –Ω–∞–π—Ç–∏ —ç—Ç–æ—Ç –±–∞–ª–∞–Ω—Å.</div>
                            <button class="course-button" onclick="game.showCoursesOverview()">
                                üéì –ò–∑—É—á–∏—Ç—å —Ç–∞—Ç—É-–º–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ
                            </button>
                        </div>
                    </div>
                `;

                this.choicesContainer.innerHTML = '';
                this.addChoice('üîÑ –ü—Ä–æ–π—Ç–∏ —Å–Ω–æ–≤–∞', 'restart', false, () => {
                    location.reload();
                });
                this.addChoice('üì± –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –∏—Å—Ç–æ—Ä–∏–µ–π', 'share', false, () => {
                    if (tg) {
                        tg.switchInlineQuery('–ü—Ä–æ—à–ª–∞ –º–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –∫–≤–µ—Å—Ç –ø—Ä–æ –ø–ª–æ—Å–∫–∏—Ö –ª—é–¥–µ–π –¢–æ–∫–∏–æ üì±ÈöôÈñìÂ•≥');
                    }
                });
            }

            addChoice(text, id, dangerous = false, callback) {
                const button = document.createElement('button');
                button.className = `choice-button ${dangerous ? 'dangerous' : ''}`;
                button.textContent = text;
                button.onclick = callback;
                this.choicesContainer.appendChild(button);
            }

            showNotification(text) {
                const notification = document.createElement('div');
                notification.style.cssText = `position: fixed; top: 50px; right: 20px; background: var(--accent-pink); color: white; padding: 10px; border-radius: 5px; z-index: 1000;`;
                notification.textContent = text;
                document.body.appendChild(notification);
                setTimeout(() => notification.remove(), 3000);
            }

            showDeviceInfo() {
                this.gameContent.innerHTML = `
                    <div style="padding: 15px;">
                        <div class="nav-button" onclick="game.showMainInterface()" style="margin-bottom: 15px;">‚Üê –ù–∞–∑–∞–¥</div>
                        
                        <div style="text-align: center; margin-bottom: 20px;">
                            <div class="japanese-text" style="font-size: 16px; color: var(--accent-blue);">
                                <span class="japanese-symbol">Ê©ü</span>–ò–ù–§–û–†–ú–ê–¶–ò–Ø –û–ë –£–°–¢–†–û–ô–°–¢–í–ï
                            </div>
                        </div>

                        <div class="memory-entry system">
                            <div class="memory-text">
                                –ú–æ–¥–µ–ª—å: DoCoMo P901i (2005)<br>
                                –í–ª–∞–¥–µ–ª–µ—Ü: Êùæ‰∫ïÊÑõËâØ (–ê–∏—Ä–∞ –ú–∞—Ü—É–∏)<br>
                                –°—Ç–∞—Ç—É—Å: –ù–∞–π–¥–µ–Ω–∞ –º–µ—Ä—Ç–≤–æ–π –≤ —â–µ–ª–∏<br>
                                –ü–∞–º—è—Ç—å: 10MB (—á–∞—Å—Ç–∏—á–Ω–æ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∞)<br>
                                GPS: –ê–Ω–æ–º–∞–ª—å–Ω—ã–µ –ø–æ–∫–∞–∑–∞–Ω–∏—è
                            </div>
                        </div>

                        <div class="memory-entry corrupted">
                            <div class="memory-text">
                                ‚ö†Ô∏è –ê–ù–û–ú–ê–õ–ò–ò:<br>
                                ‚Ä¢ GPS –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤–Ω—É—Ç—Ä–∏ —Å—Ç–µ–Ω<br>
                                ‚Ä¢ –ö–∞–º–µ—Ä–∞ —Å–Ω–∏–º–∞–µ—Ç —â–µ–ª–∏, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç<br>
                                ‚Ä¢ –ó–∞–ø–∏—Å–∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –∏–∑ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã—Ö —Å–µ–∫—Ç–æ—Ä–æ–≤<br>
                                ‚Ä¢ –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –±–∞—Ç–∞—Ä–µ–∏
                            </div>
                        </div>
                    </div>
                `;

                this.choicesContainer.innerHTML = '';
                this.addChoice('üîç –ö —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—é', 'back_to_investigation', false, () => {
                    this.showMainInterface();
                });
            }

            processTelegramPayment(course) {
                if (tg && tg.initDataUnsafe?.user) {
                    const paymentData = {
                        course: course.title,
                        price: course.salePrice,
                        userId: tg.initDataUnsafe.user.id,
                        userName: tg.initDataUnsafe.user.first_name,
                        timestamp: Date.now(),
                        promo: 'SUKIMA50'
                    };
                    
                    tg.sendData(JSON.stringify({
                        type: 'purchase',
                        data: paymentData
                    }));
                }
            }
        }

        let game;
        document.addEventListener('DOMContentLoaded', () => {
            game = new SukimaOnnaGame();
            
            if (tg) {
                tg.MainButton.text = "–ù–ê–ß–ê–¢–¨ –†–ê–°–°–õ–ï–î–û–í–ê–ù–ò–ï";
                tg.MainButton.show();
                tg.MainButton.onClick(() => {
                    if (!game.gameState.deviceBooted) {
                        game.showBootScreen();
                    }
                });
                
                tg.setHeaderColor('#0a0a0f');
                tg.setBackgroundColor('#0a0a0f');
            }
        });

        // –ì–ª–∏—Ç—á —ç—Ñ—Ñ–µ–∫—Ç—ã –≤ —Å—Ç–∏–ª–µ 2005-2006
        setInterval(() => {
            if (Math.random() < 0.02) {
                document.body.style.filter = `hue-rotate(${Math.random() * 360}deg) saturate(${1 + Math.random()})`; 
                setTimeout(() => { document.body.style.filter = 'none'; }, 100);
            }
        }, 3000);

        // –ú–∏–≥–∞–Ω–∏–µ —è–ø–æ–Ω—Å–∫–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
        setInterval(() => {
            const japaneseElements = document.querySelectorAll('.japanese-text');
            japaneseElements.forEach(el => {
                if (Math.random() < 0.05) {
                    el.style.opacity = Math.random() > 0.5 ? '1' : '0.7';
                    setTimeout(() => { el.style.opacity = '1'; }, 150);
                }
            });
        }, 2000);
    </script>
</body>
</html>
