<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÈöôÈñìÂ•≥ | –ú–Å–†–¢–í–´–ï –ü–ò–ö–°–ï–õ–ò</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono:wght@400&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;700&display=swap');
        
        :root {
            --bg-dark: #0a0a0f;
            --bg-secondary: #1a1a2e;
            --text-primary: #00ffaa;
            --text-secondary: #666;
            --accent-pink: #ff0080;
            --accent-blue: #0099ff;
            --accent-purple: #8a2be2;
            --border-color: #333;
            --choice-bg: #001a0f;
            --choice-hover: #002a1f;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: var(--bg-dark);
            color: var(--text-primary);
            font-family: 'Share Tech Mono', 'Noto Sans JP', monospace;
            height: 100vh;
            overflow: hidden;
            position: relative;
        }

        /* Glitch —ç—Ñ—Ñ–µ–∫—Ç—ã –∫–∞–∫ –≤ Ghost in the Shell */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                repeating-linear-gradient(
                    0deg,
                    transparent,
                    transparent 2px,
                    rgba(0, 255, 170, 0.03) 2px,
                    rgba(0, 255, 170, 0.03) 4px
                );
            pointer-events: none;
            z-index: 1;
            animation: scanlines 2s linear infinite;
        }

        @keyframes scanlines {
            0% { transform: translateY(0); }
            100% { transform: translateY(4px); }
        }

        .phone-container {
            width: 380px;
            height: 720px;
            margin: 20px auto;
            background: linear-gradient(145deg, #2a2a2a, #1a1a1a);
            border: 4px solid var(--border-color);
            border-radius: 25px;
            padding: 20px;
            box-shadow: 0 0 30px rgba(0, 255, 170, 0.3);
            position: relative;
            z-index: 2;
        }

        .screen {
            width: 100%;
            height: 100%;
            background: var(--bg-dark);
            border-radius: 15px;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .phone-header {
            background: var(--bg-secondary);
            padding: 8px 12px;
            font-size: 0.7rem;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .japanese-text {
            font-family: 'Noto Sans JP', sans-serif;
            font-weight: 300;
        }

        .glitch-text {
            animation: textGlitch 2s infinite;
        }

        @keyframes textGlitch {
            0%, 90% { transform: translateX(0); }
            92% { transform: translateX(-2px); }
            94% { transform: translateX(2px); }
            96% { transform: translateX(-1px); }
            98% { transform: translateX(1px); }
            100% { transform: translateX(0); }
        }

        .battery {
            color: var(--accent-pink);
            animation: batteryBlink 2s infinite;
        }

        @keyframes batteryBlink {
            0%, 70% { opacity: 1; }
            85%, 100% { opacity: 0.3; }
        }

        .content-area {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
        }

        .screen-title {
            color: var(--text-primary);
            font-size: 16px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 0 0 10px var(--text-primary);
        }

        /* BOOT SCREEN */
        .boot-screen {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100%;
            text-align: center;
        }

        .device-logo {
            font-size: 36px;
            color: var(--text-primary);
            font-weight: bold;
            margin-bottom: 20px;
            animation: logoGlow 3s infinite alternate;
        }

        @keyframes logoGlow {
            from { text-shadow: 0 0 10px var(--text-primary); }
            to { text-shadow: 0 0 30px var(--text-primary), 0 0 40px var(--text-primary); }
        }

        .progress-bar {
            width: 220px;
            height: 20px;
            background: #333;
            border: 2px solid #666;
            border-radius: 3px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--text-primary), var(--accent-blue));
            width: 0%;
            transition: width 0.3s ease;
        }

        .boot-message {
            color: #ccc;
            font-size: 14px;
            margin-top: 10px;
        }

        /* MEMORY ENTRIES */
        .memory-entry {
            margin: 8px 0;
            padding: 12px;
            border-radius: 8px;
            animation: messageSlide 0.3s ease-out;
            position: relative;
        }

        @keyframes messageSlide {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .memory-entry.normal {
            background: rgba(0, 255, 170, 0.1);
            border: 1px solid rgba(0, 255, 170, 0.3);
        }

        .memory-entry.corrupted {
            background: linear-gradient(45deg, rgba(255, 0, 128, 0.2), rgba(0, 0, 0, 0.8));
            border: 1px solid var(--accent-pink);
            animation: memoryGlitch 0.5s ease-out;
        }

        .memory-entry.system {
            background: rgba(138, 43, 226, 0.2);
            border: 1px solid var(--accent-purple);
            text-align: center;
            font-size: 12px;
        }

        @keyframes memoryGlitch {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-2px); }
            75% { transform: translateX(2px); }
        }

        .memory-header {
            font-size: 10px;
            color: var(--text-secondary);
            margin-bottom: 6px;
            display: flex;
            justify-content: space-between;
        }

        .memory-text {
            font-size: 14px;
            line-height: 1.4;
            margin-bottom: 8px;
        }

        .memory-timestamp {
            font-size: 10px;
            color: var(--text-secondary);
            text-align: right;
        }

        .japanese-symbol {
            font-family: 'Noto Sans JP', sans-serif;
            font-size: 18px;
            color: var(--accent-pink);
            display: inline-block;
            margin-right: 8px;
        }

        /* NAVIGATION */
        .nav-button {
            background: rgba(0, 255, 170, 0.2);
            border: 1px solid var(--text-primary);
            padding: 8px 12px;
            border-radius: 4px;
            color: var(--text-primary);
            cursor: pointer;
            font-size: 12px;
            margin: 4px;
            transition: all 0.3s ease;
        }

        .nav-button:hover {
            background: rgba(0, 255, 170, 0.4);
            box-shadow: 0 0 10px rgba(0, 255, 170, 0.3);
        }

        .choice-button {
            width: 100%;
            padding: 12px;
            margin: 6px 0;
            background: var(--choice-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-primary);
            font-family: inherit;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
        }

        .choice-button:hover {
            background: var(--choice-hover);
            border-color: var(--text-primary);
            box-shadow: 0 0 10px rgba(0, 255, 170, 0.3);
        }

        .choice-button.dangerous {
            border-color: var(--accent-pink);
            color: var(--accent-pink);
        }

        .choice-button.dangerous:hover {
            background: rgba(255, 0, 128, 0.1);
            box-shadow: 0 0 10px rgba(255, 0, 128, 0.3);
        }

        .choices {
            padding: 15px;
            border-top: 1px solid var(--border-color);
            background: var(--bg-secondary);
        }

        .loading {
            text-align: center;
            color: var(--text-secondary);
            font-size: 12px;
            padding: 20px;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        .hidden { display: none; }
        .text-center { text-align: center; }
        .text-pink { color: var(--accent-pink); }
        .text-blue { color: var(--accent-blue); }
        .text-purple { color: var(--accent-purple); }

        .status-bar {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 8px;
            background: rgba(0, 0, 0, 0.8);
            padding: 3px 6px;
            border-radius: 3px;
            z-index: 100;
        }

        /* Course integration styles */
        .course-button {
            background: rgba(255, 0, 128, 0.2);
            border: 1px solid var(--accent-pink);
            padding: 6px 12px;
            border-radius: 4px;
            color: var(--accent-pink);
            font-size: 10px;
            margin-top: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .course-button:hover {
            background: rgba(255, 0, 128, 0.4);
            box-shadow: 0 0 10px rgba(255, 0, 128, 0.3);
        }
    </style>
</head>
<body>
        <div class="status-bar japanese-text">ÈöôÈñìÂ•≥ v1.0</div>

    <div class="phone-container">
        <div class="screen">
            <div class="phone-header">
                <div>
                    <span style="display: flex; gap: 2px;">
                        <div style="width: 3px; height: 8px; background: var(--text-primary); opacity: 1;"></div>
                        <div style="width: 3px; height: 8px; background: var(--text-primary); opacity: 1;"></div>
                        <div style="width: 3px; height: 8px; background: var(--text-primary); opacity: 0.3;"></div>
                        <div style="width: 3px; height: 8px; background: var(--text-primary); opacity: 0.3;"></div>
                    </span>
                    <span class="japanese-text">DoCoMo FOMA P901i</span>
                </div>
                <div class="battery">12% ‚ö†Ô∏è</div>
            </div>

            <div id="gameContent" class="content-area"></div>

            <div id="choicesContainer" class="choices">
                <div class="loading japanese-text">„Ç∑„Çπ„ÉÜ„É†ÂàùÊúüÂåñ‰∏≠...</div>
            </div>
        </div>
    </div>

    <script>
        // Telegram Web App API
        const tg = window.Telegram?.WebApp;
        if (tg) {
            tg.ready();
            tg.expand();
        }

        class SukimaOnnaGame {
            constructor() {
                this.gameContent = document.getElementById('gameContent');
                this.choicesContainer = document.getElementById('choicesContainer');
                this.currentMemory = 0;
                this.gameState = {
                    deviceBooted: false,
                    memoriesUnlocked: 0,
                    investigationStarted: false,
                    truthRevealed: false,
                    finalChoice: null,
                    coursesViewed: false
                };
                this.playerData = {
                    name: null,
                    discoveries: [],
                    suspicions: []
                };

                // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram
                if (tg?.initDataUnsafe?.user) {
                    this.playerData.telegramUser = tg.initDataUnsafe.user;
                }

                this.init();
            }

            init() {
                this.showBootScreen();
            }

            showBootScreen() {
                this.gameContent.innerHTML = `
                    <div class="boot-screen">
                        <div class="device-logo japanese-text glitch-text">ÈöôÈñìÂ•≥</div>
                        <div style="text-align: center; margin-bottom: 30px;">
                            <div style="font-size: 18px; color: var(--text-primary); margin-bottom: 8px;">–ú–Å–†–¢–í–´–ï –ü–ò–ö–°–ï–õ–ò</div>
                            <div style="font-size: 14px; color: var(--accent-pink); margin-bottom: 4px;">üì± –¢–µ–ª–µ—Ñ–æ–Ω –Ω–∞—à–ª–∏ –≤ —â–µ–ª–∏ –º–µ–∂–¥—É –∑–¥–∞–Ω–∏—è–º–∏</div>
                            <div style="font-size: 12px; color: var(--text-secondary);">–ó–∞–ø–∏—Å–∏ –ê–∏—Ä—ã –ú–∞—Ü—É–∏ ‚Ä¢ –¢–æ–∫–∏–æ 2005</div>
                        </div>
                        <div class="progress-bar">
                            <div id="progressFill" class="progress-fill"></div>
                        </div>
                        <div id="bootMessage" class="boot-message japanese-text">„É°„É¢„É™Âæ©ÂÖÉ‰∏≠...</div>
                    </div>
                `;

                const messages = [
                    '„É°„É¢„É™Âæ©ÂÖÉ‰∏≠... (–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏...)',
                    '„Éá„Éº„ÇøËß£Êûê‰∏≠... (–ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö...)',
                    'ÊöóÂè∑Ëß£Ë™≠‰∏≠... (–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞...)',
                    'ÊúÄÂæå„ÅÆË®òÈå≤Áô∫Ë¶ã... (–ù–∞–π–¥–µ–Ω—ã –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø–∏—Å–∏...)',
                    '„Ç∑„Çπ„ÉÜ„É†Ê∫ñÂÇôÂÆå‰∫Ü (–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞)'
                ];

                let progress = 0;
                const progressBar = document.getElementById('progressFill');
                const messageEl = document.getElementById('bootMessage');

                const bootInterval = setInterval(() => {
                    progress += 20;
                    progressBar.style.width = progress + '%';
                    
                    if (progress <= 100) {
                        messageEl.innerHTML = messages[Math.floor(progress / 20) - 1] || messages[messages.length - 1];
                    }
                    
                    if (progress >= 100) {
                        clearInterval(bootInterval);
                        setTimeout(() => {
                            this.gameState.deviceBooted = true;
                            this.showMainInterface();
                        }, 1000);
                    }
                }, 800);
            }

            showMainInterface() {
                this.gameContent.innerHTML = `
                    <div style="padding: 15px;">
                        <div style="text-align: center; margin-bottom: 20px;">
                            <div class="japanese-text" style="font-size: 14px; color: var(--accent-pink); margin-bottom: 8px;">
                                <span class="japanese-symbol">Èöô</span>–©–ï–õ–¨ –í –°–¢–ï–ù–ï
                            </div>
                            <div style="font-size: 12px; color: var(--text-secondary);">
                                –ó–∞–ø–∏—Å–∏ –ê–∏—Ä—ã –ú–∞—Ü—É–∏ (Êùæ‰∫ïÊÑõËâØ) ‚Ä¢ –¢–æ–∫–∏–æ, 2005
                            </div>
                            <div style="font-size: 11px; color: var(--text-secondary); margin-top: 4px;">
                                –¢–∞—Ç—É-–º–∞—Å—Ç–µ—Ä ‚Ä¢ –ù–∞–π–¥–µ–Ω–∞ –º–µ—Ä—Ç–≤–æ–π –≤ —É–∑–∫–æ–π —â–µ–ª–∏
                            </div>
                        </div>

                        <div style="background: rgba(255, 0, 128, 0.1); border: 1px solid var(--accent-pink); border-radius: 8px; padding: 12px; margin-bottom: 15px;">
                            <div style="font-size: 11px; color: var(--accent-pink); margin-bottom: 4px;">‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï</div>
                            <div style="font-size: 12px;">–¢–µ–ª–µ—Ñ–æ–Ω –Ω–∞–π–¥–µ–Ω –≤ —â–µ–ª–∏ –º–µ–∂–¥—É –∑–¥–∞–Ω–∏—è–º–∏ –≤ —Ä–∞–π–æ–Ω–µ –°–∏–±—É—è. –í–ª–∞–¥–µ–ª–∏—Ü–∞ –Ω–∞–π–¥–µ–Ω–∞ –º–µ—Ä—Ç–≤–æ–π –≤ —Ç–æ–º –∂–µ –º–µ—Å—Ç–µ. –ü—Ä–∏—á–∏–Ω–∞ —Å–º–µ—Ä—Ç–∏ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞ - —Ç–µ–ª–æ –±—ã–ª–æ —Å–¥–∞–≤–ª–µ–Ω–æ, –Ω–æ —â–µ–ª—å —Å–ª–∏—à–∫–æ–º —É–∑–∫–∞—è –¥–ª—è —á–µ–ª–æ–≤–µ–∫–∞.</div>
                        </div>

                        <div id="memoryList"></div>
                    </div>
                `;

                this.choicesContainer.innerHTML = '';
                this.addChoice('üîç –ù–∞—á–∞—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–ø–∏—Å–µ–π', 'start_investigation', false, () => {
                    this.startInvestigation();
                });
                this.addChoice('üì± –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ', 'device_info', false, () => {
                    this.showDeviceInfo();
                });
            }

            startInvestigation() {
                this.gameState.investigationStarted = true;
                this.showMemory(1);
            }

            showMemory(memoryNumber) {
                this.currentMemory = memoryNumber;
                this.gameState.memoriesUnlocked = Math.max(this.gameState.memoriesUnlocked, memoryNumber);

                const memories = this.getMemories();
                const memory = memories[memoryNumber - 1];

                if (!memory) {
                    this.showEnding();
                    return;
                }

                this.gameContent.innerHTML = `
                    <div style="padding: 15px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                            <div class="nav-button" onclick="game.showMainInterface()">‚Üê –ù–∞–∑–∞–¥</div>
                            <div style="font-size: 12px; color: var(--text-secondary);">
                                Ë®òÈå≤ ${memoryNumber} / ${memories.length}
                            </div>
                            ${memoryNumber < memories.length ? `<div class="nav-button" onclick="game.showMemory(${memoryNumber + 1})">–î–∞–ª–µ–µ ‚Üí</div>` : '<div></div>'}
                        </div>

                        <div class="memory-entry ${memory.type}">
                            <div class="memory-header">
                                <span><span class="japanese-symbol">${memory.symbol}</span>${memory.title}</span>
                                <span>${memory.timestamp}</span>
                            </div>
                            <div class="memory-text">${memory.content}</div>
                            ${memory.timestamp ? `<div class="memory-timestamp">${memory.metadata || ''}</div>` : ''}
                        </div>

                        ${memory.courses ? `
                            <div style="margin-top: 15px; padding: 12px; background: rgba(0, 255, 170, 0.1); border: 1px solid var(--text-primary); border-radius: 8px;">
                                <div style="font-size: 11px; color: var(--text-primary); margin-bottom: 8px;">üìö –û–ë–£–ß–ê–Æ–©–ò–ï –ú–ê–¢–ï–†–ò–ê–õ–´</div>
                                <div style="font-size: 12px; margin-bottom: 8px;">${memory.coursesText}</div>
                                ${memory.courses.map(course => `
                                    <button class="course-button" onclick="game.showCourse('${course.id}')">
                                        üéì ${course.title} - ${course.price}
                                    </button>
                                `).join('')}
                            </div>
                        ` : ''}
                    </div>
                `;

                this.updateChoicesForMemory(memory, memoryNumber);
            }

            getMemories() {
                return [
                    {
                        symbol: 'ÈßÖ',
                        title: '–ñ–µ–Ω—â–∏–Ω–∞ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ',
                        timestamp: '15.11.05 - 23:42',
                        type: 'normal',
                        content: `–í—á–µ—Ä–∞ –Ω–∞ —Å—Ç–∞–Ω—Ü–∏–∏ –°–∏–Ω–¥–∑—é–∫—É –≤–∏–¥–µ–ª–∞ —Å—Ç—Ä–∞–Ω–Ω—É—é –∂–µ–Ω—â–∏–Ω—É. –°—Ç–æ—è–ª–∞ –Ω–∞ —Å–∞–º–æ–º –∫—Ä–∞—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã, –º–µ–∂–¥—É –≤–∞–≥–æ–Ω–∞–º–∏ –ø–æ–µ–∑–¥–∞. –í –©–ï–õ–ò. –ö–∞–∫ –æ–Ω–∞ —Ç—É–¥–∞ –ø–æ–º–µ—Å—Ç–∏–ª–∞—Å—å?

–ö–æ–≥–¥–∞ –ø–æ–µ–∑–¥ —Ç—Ä–æ–Ω—É–ª—Å—è, –æ–Ω–∞ –Ω–µ –∏—Å—á–µ–∑–ª–∞. –ü—Ä–æ—Å—Ç–æ... —Å–ø–ª—é—â–∏–ª–∞—Å—å –∏ –ø–æ–µ—Ö–∞–ª–∞ –≤–º–µ—Å—Ç–µ —Å –ø–æ–µ–∑–¥–æ–º. –ö–∞–∫ —Ç–µ–Ω—å –º–µ–∂–¥—É –≤–∞–≥–æ–Ω–∞–º–∏.

–ó–∞–ø–∏—Å—ã–≤–∞—é, —á—Ç–æ–±—ã –∑–∞–ø–æ–º–Ω–∏—Ç—å. –ú–æ–∂–µ—Ç, —ç—Ç–æ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ç–∞—Ç—É-–¥–∏–∑–∞–π–Ω–∞.`,
                        metadata: '–ì–æ–ª–æ—Å–æ–≤–∞—è –∑–∞–ø–∏—Å—å ‚Üí —Ç–µ–∫—Å—Ç',
                        courses: [
                            { id: 'full_course', title: '–ü–æ–ª–Ω—ã–π –∫—É—Ä—Å —Ç–∞—Ç—É-–º–∞—Å—Ç–µ—Ä–∞', price: '22,500‚ÇΩ' },
                            { id: 'basic_course', title: '–ë–∞–∑–æ–≤—ã–π –∫—É—Ä—Å —Å –≤–∏–¥–µ–æ', price: '12,500‚ÇΩ' }
                        ],
                        coursesText: '–°—Ç—Ä–∞–Ω–Ω—ã–µ –≤–∏–¥–µ–Ω–∏—è —á–∞—Å—Ç–æ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –æ—Å–Ω–æ–≤–æ–π –¥–ª—è —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Ç–∞—Ç—É-–¥–∏–∑–∞–π–Ω–æ–≤. –ò–∑—É—á–∏ –∏—Å–∫—É—Å—Å—Ç–≤–æ –≤–æ–ø–ª–æ—â–µ–Ω–∏—è –æ–±—Ä–∞–∑–æ–≤ –≤ –∫–æ–∂–µ.'
                    },
                    {
                        symbol: 'Èöô',
                        title: '–ö–ª–∏–µ–Ω—Ç–∫–∞ –∏–∑ —â–µ–ª–∏',
                        timestamp: '18.11.05 - 14:30',
                        type: 'normal',
                        content: `–°–µ–≥–æ–¥–Ω—è –ø—Ä–∏—à–ª–∞ —Ç–∞ —Å–∞–º–∞—è –∂–µ–Ω—â–∏–Ω–∞ —Å –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã! –û–Ω–∞ —Ö–æ—Ç–µ–ª–∞ —Ç–∞—Ç—É - —Å–∏–ª—É—ç—Ç —á–µ–ª–æ–≤–µ–∫–∞, —Å–¥–∞–≤–ª–µ–Ω–Ω–æ–≥–æ –º–µ–∂–¥—É —Å—Ç–µ–Ω–∞–º–∏. –û—á–µ–Ω—å —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–π –∑–∞–ø—Ä–æ—Å.

–ö–æ–≥–¥–∞ —è –¥–µ–ª–∞–ª–∞ –Ω–∞–±—Ä–æ—Å–æ–∫, –æ–Ω–∞ —Å–∫–∞–∑–∞–ª–∞: "–Ø –∑–Ω–∞—é —ç—Ç–æ –º–µ—Å—Ç–æ. –©–µ–ª—å –º–µ–∂–¥—É –∑–¥–∞–Ω–∏—è–º–∏ –≤ –°–∏–±—É—è. –¢–∞–º –º–æ–∂–Ω–æ —Å–ø—Ä—è—Ç–∞—Ç—å—Å—è –æ—Ç –≤—Å–µ–≥–æ –º–∏—Ä–∞."

–°–∞–º–æ–µ —Å—Ç—Ä–∞–Ω–Ω–æ–µ - –∫–æ–≥–¥–∞ –æ–Ω–∞ –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–ª–∞—Å—å –±–æ–∫–æ–º, —Ç–æ –ø–æ—á—Ç–∏ –∏—Å—á–µ–∑–∞–ª–∞. –ö–∞–∫ –±—É–¥—Ç–æ –æ–Ω–∞ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø–ª–æ—Å–∫–∞—è.`,
                        metadata: '–†–∞–±–æ—á–∏–µ –∑–∞–º–µ—Ç–∫–∏',
                        courses: [
                            { id: 'text_course', title: '–¢–µ–∫—Å—Ç–æ–≤—ã–π –∫—É—Ä—Å', price: '5,500‚ÇΩ' },
                            { id: 'procreate_course', title: '–†–∏—Å–æ–≤–∞–Ω–∏–µ –≤ Procreate', price: '7,500‚ÇΩ' }
                        ],
                        coursesText: '–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã —Ç—Ä–µ–±—É—é—Ç –æ—Å–æ–±–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞. –ò–∑—É—á–∏ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—é —Ä–∞–±–æ—Ç—ã —Å –Ω–µ–æ–±—ã—á–Ω—ã–º–∏ –∑–∞–∫–∞–∑—á–∏–∫–∞–º–∏.'
                    },
                    {
                        symbol: 'Èè°',
                        title: '–ö–∏—Å–∞–∏-–º–æ—Ç–æ–∫–æ –≤ –∑–µ—Ä–∫–∞–ª–µ',
                        timestamp: '20.11.05 - 02:15',
                        type: 'corrupted',
                        content: `–ù–µ –º–æ–≥—É —Å–ø–∞—Ç—å. –í —Å—Ç—É–¥–∏–π–Ω–æ–º –∑–µ—Ä–∫–∞–ª–µ... –æ–Ω–∞ –µ—Å—Ç—å. –ö–∏—Å–∞–∏-–º–æ—Ç–æ–∫–æ. –î–µ–≤–æ—á–∫–∞ –∏–∑ –≥–æ—Ä–æ–¥—Å–∫–æ–π –ª–µ–≥–µ–Ω–¥—ã.

–ù–æ –æ–Ω–∞ –Ω–µ —Ä–µ–±—ë–Ω–æ–∫. –≠—Ç–æ –≤–∑—Ä–æ—Å–ª–∞—è –∂–µ–Ω—â–∏–Ω–∞, —Å–ø–ª—é—â–µ–Ω–Ω–∞—è –∫–∞–∫ –ª–∏—Å—Ç –±—É–º–∞–≥–∏. –û–Ω–∞ –ø—ã—Ç–∞–µ—Ç—Å—è –≤—ã–±—Ä–∞—Ç—å—Å—è –∏–∑ –∑–µ—Ä–∫–∞–ª–∞, –Ω–æ –∑–∞—Å—Ç—Ä–µ–≤–∞–µ—Ç –≤ —Ä–∞–º–µ.

–ö–∞–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –Ω–µ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –µ—ë. –ù–æ –∫–æ–≥–¥–∞ —Å–º–æ—Ç—Ä—é –≤ –∑–µ—Ä–∫–∞–ª–æ –≤ —Ç–µ–º–Ω–æ—Ç–µ - –æ–Ω–∞ —Ç–∞–º. –ú–∞—à–µ—Ç –ø–ª–æ—Å–∫–æ–π —Ä—É–∫–æ–π.`,
                        metadata: '–§–ê–ô–õ –ü–û–í–†–ï–ñ–î–Å–ù - –ß–ê–°–¢–ò–ß–ù–û–ï –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï'
                    },
                    {
                        symbol: 'Ë°ó',
                        title: '–©–µ–ª–∏ –≤ –≥–æ—Ä–æ–¥–µ',
                        timestamp: '25.11.05 - 14:33',
                        type: 'corrupted',
                        content: `–ù–∞—á–∞–ª–∞ –∑–∞–º–µ—á–∞—Ç—å —â–µ–ª–∏ –≤–µ–∑–¥–µ. –ú–µ–∂–¥—É –∑–¥–∞–Ω–∏—è–º–∏ –≤ –°–∏–±—É—è, –º–µ–∂–¥—É –≤–∞–≥–æ–Ω–∞–º–∏ –ø–æ–µ–∑–¥–∞, –º–µ–∂–¥—É –ø–ª–∏—Ç–∫–∞–º–∏ –≤ –º–µ—Ç—Ä–æ.

–ò –≤ –∫–∞–∂–¥–æ–π —â–µ–ª–∏ - —Å–∏–ª—É—ç—Ç—ã. –ü–ª–æ—Å–∫–∏–µ –ª—é–¥–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ç–∞–º –∂–∏–≤—É—Ç. –û–Ω–∏ –º–∞—à—É—Ç –º–Ω–µ. –ó–æ–≤—É—Ç –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è.

–í—á–µ—Ä–∞ —Å–∞–º–∞ –ø–æ–ø—Ä–æ–±–æ–≤–∞–ª–∞ –ø—Ä–æ—Ç–∏—Å–Ω—É—Ç—å—Å—è –≤ —É–∑–∫–∏–π –ø—Ä–æ—Ö–æ–¥ –º–µ–∂–¥—É –¥–≤—É–º—è –¥–æ–º–∞–º–∏. –ü–æ–ª—É—á–∏–ª–æ—Å—å! –Ø —Å—Ç–∞–ª–∞ —Ç–æ–Ω—å—à–µ. –ö–æ–∂–∞ –Ω–∞—Ç—è–Ω—É–ª–∞—Å—å, –Ω–æ –Ω–µ –ø–æ—Ä–≤–∞–ª–∞—Å—å.`,
                        metadata: '–ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ',
                        courses: [
                            { id: 'smm_course', title: '–í–µ–¥–µ–Ω–∏–µ —Å–æ—Ü—Å–µ—Ç–µ–π –¥–ª—è —Ç–∞—Ç—É', price: '12,500‚ÇΩ' }
                        ],
                        coursesText: '–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π –Ω–µ–æ–±—ã—á–Ω—ã–µ –º–µ—Å—Ç–∞ –¢–æ–∫–∏–æ –≤ —Å–æ—Ü—Å–µ—Ç—è—Ö. –£—Ä–±–∞–Ω–∏—Å—Ç–∏—á–µ—Å–∫–∞—è —ç—Å—Ç–µ—Ç–∏–∫–∞ –ø–æ–ø—É–ª—è—Ä–Ω–∞ —Å—Ä–µ–¥–∏ –º–æ–ª–æ–¥–µ–∂–∏.'
                    },
                    {
                        symbol: 'Áóõ',
                        title: '–°—Ç–∞–Ω–æ–≤–ª—é—Å—å –ø–ª–æ—Å–∫–æ–π',
                        timestamp: '28.11.05 - 09:45',
                        type: 'corrupted',
                        content: `–ß—Ç–æ-—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å –º–æ–∏–º —Ç–µ–ª–æ–º. –°—Ç–∞–Ω–æ–≤–ª—é—Å—å –≤—Å—ë —Ç–æ–Ω—å—à–µ. –†—ë–±—Ä–∞ –ø–æ—á—Ç–∏ –Ω–µ –ø—Ä–æ—â—É–ø—ã–≤–∞—é—Ç—Å—è. –ú–æ–≥—É –ø—Ä–æ—Ç–∏—Å–Ω—É—Ç—å—Å—è –≤ —â–µ–ª–∏, –≤ –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–Ω—å—à–µ –Ω–µ –ø–æ–º–µ—â–∞–ª–∞—Å—å —Ä—É–∫–∞.

–ö–ª–∏–µ–Ω—Ç—ã –Ω–∞—á–∞–ª–∏ –∂–∞–ª–æ–≤–∞—Ç—å—Å—è - –≥–æ–≤–æ—Ä—è—Ç, —á—Ç–æ –∫–æ–≥–¥–∞ —è –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞—é—Å—å –±–æ–∫–æ–º, –º–µ–Ω—è –ø–æ—á—Ç–∏ –Ω–µ –≤–∏–¥–Ω–æ.

–°–µ–≥–æ–¥–Ω—è –≤–ø–µ—Ä–≤—ã–µ —Å–º–æ–≥–ª–∞ –ø—Ä–æ–π—Ç–∏ –º–µ–∂–¥—É –¥–≤—É–º—è –ø—Ä–∏–ø–∞—Ä–∫–æ–≤–∞–Ω–Ω—ã–º–∏ –º–∞—à–∏–Ω–∞–º–∏. –ë–æ–∫–æ–º. –ö–∞–∫ –ª–∏—Å—Ç –±—É–º–∞–≥–∏.`,
                        metadata: '–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –∑–∞–º–µ—Ç–∫–∏'
                    },
                    {
                        symbol: 'Ë®ò',
                        title: '–ß—É–∂–∏–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è',
                        timestamp: '01.12.05 - 16:20',
                        type: 'system',
                        content: `–í–ù–ò–ú–ê–ù–ò–ï: –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è –¥—Ä—É–≥–∏—Ö –ª—é–¥–µ–π –≤ —â–µ–ª—è—Ö.

–§–ê–ô–õ: gap_memories.dat
–°–û–î–ï–†–ñ–ê–ù–ò–ï: –í–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è –ª—é–¥–µ–π, –∫–æ—Ç–æ—Ä—ã–µ "–ø—Ä–æ–≤–∞–ª–∏–ª–∏—Å—å" –≤ —â–µ–ª–∏ –¢–æ–∫–∏–æ —Å 1960-—Ö –≥–æ–¥–æ–≤. –û—Ñ–∏—Å–Ω—ã–µ —Ä–∞–±–æ—Ç–Ω–∏–∫–∏, —Å—Ç—É–¥–µ–Ω—Ç—ã, –¥–æ–º–æ—Ö–æ–∑—è–π–∫–∏.

–í—Å–µ –æ–Ω–∏ –∏—Å–∫–∞–ª–∏ –º–µ—Å—Ç–æ, –≥–¥–µ –º–æ–∂–Ω–æ —Å–ø—Ä—è—Ç–∞—Ç—å—Å—è –æ—Ç –¥–∞–≤–ª–µ–Ω–∏—è –æ–±—â–µ—Å—Ç–≤–∞. –ò –Ω–∞—à–ª–∏.

–°–¢–ê–¢–£–°: –ö–æ–ª–ª–µ–∫—Ç–∏–≤–Ω–∞—è –ø–∞–º—è—Ç—å –∞–∫—Ç–∏–≤–Ω–∞. –í–ª–∏—è–µ—Ç –Ω–∞ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.`,
                        metadata: '–°–ò–°–¢–ï–ú–ù–û–ï –°–û–û–ë–©–ï–ù–ò–ï'
                    },
                    {
                        symbol: 'È≠Ç',
                        title: '–ü—Ä–∞–≤–¥–∞ –æ –©–µ–ª–∏',
                        timestamp: '05.12.05 - 22:17',
                        type: 'corrupted',
                        content: `–ï—ë –∑–æ–≤—É—Ç –ú–∏Ïöî–∫–æ –¢–∞–Ω–∞–∫–∞. –ñ–∏–ª–∞ –≤ 16 –≤–µ–∫–µ. –ú–∞—Å—Ç–µ—Ä —Ç–∞—Ç—É–∏—Ä–æ–≤–∫–∏, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–∫—Ä—ã–ª —Å–ø–æ—Å–æ–± –ø–µ—Ä–µ–Ω–æ—Å–∞ –¥—É—à–∏ —á–µ—Ä–µ–∑ –∏—Å–∫—É—Å—Å—Ç–≤–æ.

–ö–∞–∂–¥—ã–µ 100 –ª–µ—Ç –æ–Ω–∞ –≤—ã–±–∏—Ä–∞–µ—Ç –Ω–æ–≤–æ–≥–æ –Ω–æ—Å–∏—Ç–µ–ª—è. –ú–æ–ª–æ–¥–æ–≥–æ –º–∞—Å—Ç–µ—Ä–∞ —Å —Ç–∞–ª–∞–Ω—Ç–æ–º. –ü–µ—Ä–µ–Ω–æ—Å–∏—Ç –≤ –Ω–µ–≥–æ —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è –∏... —Å–µ–±—è.

–Ø –Ω–µ –ø–µ—Ä–≤–∞—è. –ë—ã–ª–æ –º–Ω–æ–≥–æ –¥—Ä—É–≥–∏—Ö. –ò—Ö –∏–º–µ–Ω–∞ –Ω–∞–ø–∏—Å–∞–Ω—ã –≤ –∑–µ—Ä–∫–∞–ª–µ, –Ω–æ —Ç–æ–ª—å–∫–æ —è –∏—Ö –≤–∏–∂—É.`,
                        metadata: '–õ–∏—á–Ω—ã–π –¥–Ω–µ–≤–Ω–∏–∫ - –ø–æ—Å–ª–µ–¥–Ω—è—è –∑–∞–ø–∏—Å—å'
                    },
                    {
                        symbol: 'ÈÅ∏',
                        title: '–ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—ã–±–æ—Ä',
                        timestamp: '22.03.24 - 03:00',
                        type: 'system',
                        content: `–ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –°–û–°–¢–û–Ø–ù–ò–ï: –ü—Ä–æ—Ü–µ—Å—Å —Å–ª–∏—è–Ω–∏—è —Å–æ–∑–Ω–∞–Ω–∏–π –∑–∞–ø—É—â–µ–Ω.

–ú–∏–π–æ–∫–æ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Å–¥–µ–ª–∫—É: —Ä–∞–∑–¥–µ–ª–∏—Ç—å —Ç–µ–ª–æ. –û–Ω–∞ –¥–∞—Å—Ç –º–Ω–µ –≤—Å–µ –∑–Ω–∞–Ω–∏—è —Ç—ã—Å—è—á–µ–ª–µ—Ç–Ω–µ–π —Ç—Ä–∞–¥–∏—Ü–∏–∏ —Ç–∞—Ç—É–∏—Ä–æ–≤–∫–∏, —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏, –¥–æ—Å—Ç—É–ø –∫ –¥—Ä–µ–≤–Ω–∏–º —Å–∏–º–≤–æ–ª–∞–º —Å–∏–ª—ã.

–í–∑–∞–º–µ–Ω - –ø–æ–ª–æ–≤–∏–Ω—É –∂–∏–∑–Ω–∏. –ò —Å—Ç—É–¥–∏—é. –ù–∞–≤—Å–µ–≥–¥–∞.

–ü–æ—Å–ª–µ–¥–Ω–∏–π —à–∞–Ω—Å –æ—Ç–∫–∞–∑–∞—Ç—å—Å—è. –ò–ª–∏ –ø—Ä–∏–Ω—è—Ç—å –Ω–∞—Å–ª–µ–¥–∏–µ.`,
                        metadata: '–¢–†–ï–ë–£–ï–¢–°–Ø –†–ï–®–ï–ù–ò–ï –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø',
                        courses: [
                            { id: 'consultation', title: '–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è —Ç–∞—Ç—É-–º–∞—Å—Ç–µ—Ä–∞', price: '3,000‚ÇΩ' }
                        ],
                        coursesText: '–ü–µ—Ä–µ–¥ –ø—Ä–∏–Ω—è—Ç–∏–µ–º –≤–∞–∂–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π –ª—É—á—à–µ –ø–æ—Å–æ–≤–µ—Ç–æ–≤–∞—Ç—å—Å—è —Å –æ–ø—ã—Ç–Ω—ã–º –º–∞—Å—Ç–µ—Ä–æ–º. –ü–æ–ª—É—á–∏ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é –æ –≤—ã–±–æ—Ä–µ –ø—É—Ç–∏ –≤ —Ç–∞—Ç—É-–∏—Å–∫—É—Å—Å—Ç–≤–µ.'
                    }
                ];
            }

            updateChoicesForMemory(memory, memoryNumber) {
                this.choicesContainer.innerHTML = '';

                if (memoryNumber < this.getMemories().length) {
                    this.addChoice('üìñ –°–ª–µ–¥—É—é—â–∞—è –∑–∞–ø–∏—Å—å', 'next_memory', false, () => {
                        this.showMemory(memoryNumber + 1);
                    });
                }

                if (memoryNumber >= 3) {
                    this.addChoice('üîç –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å —Å—Ç—É–¥–∏—é', 'investigate_studio', false, () => {
                        this.showStudioInvestigation();
                    });
                }

                if (memoryNumber >= 6) {
                    this.addChoice('üë• –ù–∞–π—Ç–∏ –¥—Ä—É–≥–∏—Ö –∂–µ—Ä—Ç–≤', 'find_victims', false, () => {
                        this.showVictimsStories();
                    });
                }

                if (memoryNumber === 8) {
                    this.addChoice('ü§ù –ü—Ä–∏–Ω—è—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ú–∏–π–æ–∫–æ', 'accept_deal', true, () => {
                        this.showEnding('accept');
                    });
                    this.addChoice('‚ùå –û—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç —Å–¥–µ–ª–∫–∏', 'reject_deal', false, () => {
                        this.showEnding('reject');
                    });
                    this.addChoice('‚öîÔ∏è –ü–æ–ø—ã—Ç–∞—Ç—å—Å—è –∏–∑–≥–Ω–∞—Ç—å –¥—É—Ö', 'exorcise', true, () => {
                        this.showEnding('fight');
                    });
                }

                if (!this.gameState.coursesViewed && memoryNumber >= 2) {
                    this.addChoice('üéì –ò–∑—É—á–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—ã –æ —Ç–∞—Ç—É-–º–∞—Å—Ç–µ—Ä—Å—Ç–≤–µ', 'view_courses', false, () => {
                        this.showCoursesOverview();
                    });
                }
            }

            showStudioInvestigation() {
                this.gameContent.innerHTML = `
                    <div style="padding: 15px;">
                        <div class="nav-button" onclick="game.showMemory(${this.currentMemory})" style="margin-bottom: 15px;">‚Üê –ö –∑–∞–ø–∏—Å—è–º</div>
                        
                        <div style="text-align: center; margin-bottom: 20px;">
                            <div class="japanese-text" style="font-size: 16px; color: var(--accent-pink);">
                                <span class="japanese-symbol">ÂΩ±</span>–ò–°–°–õ–ï–î–û–í–ê–ù–ò–ï –°–¢–£–î–ò–ò
                            </div>
                        </div>

                        <div class="memory-entry corrupted">
                            <div class="memory-text">
                                –¢—ã –ø—Ä–∏—Ö–æ–¥–∏—à—å –≤ —Å—Ç—É–¥–∏—é –ø–æ–∑–¥–Ω–∏–º –≤–µ—á–µ—Ä–æ–º. –î–≤–µ—Ä–∏ –∑–∞–ø–µ—Ä—Ç—ã, –Ω–æ –∑–∞–º–æ–∫... —Å—Ç–∞—Ä–∏–Ω–Ω—ã–π. –Ø–≤–Ω–æ –Ω–µ –∏–∑ —ç—Ç–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.
                            </div>
                        </div>

                        <div class="memory-entry normal">
                            <div class="memory-text">
                                –í–Ω—É—Ç—Ä–∏ —Å—Ç—É–¥–∏—è –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫, –∫–∞–∫ –±—É–¥—Ç–æ —Ä–∞–±–æ—Ç–∞ –æ—Å—Ç–∞–Ω–æ–≤–∏–ª–∞—Å—å –º–≥–Ω–æ–≤–µ–Ω–∏–µ –Ω–∞–∑–∞–¥. –ù–∞ —Å—Ç–æ–ª–µ - –Ω–µ–¥–æ–¥–µ–ª–∞–Ω–Ω—ã–π —ç—Å–∫–∏–∑ –¥—Ä–∞–∫–æ–Ω–∞. –ú–∞—à–∏–Ω–∫–∞ –¥–ª—è —Ç–∞—Ç—É –≤–∫–ª—é—á–µ–Ω–∞, –∏–≥–ª—ã —á–∏—Å—Ç—ã–µ.
                            </div>
                        </div>

                        <div class="memory-entry system">
                            <div class="memory-text">
                                –í –∑–µ—Ä–∫–∞–ª–µ —Ç—ã –≤–∏–¥–∏—à—å —Å—Ç—É–¥–∏—é, –Ω–æ –¥—Ä—É–≥—É—é. –î—Ä–µ–≤–Ω—é—é. –°–≤–µ—Ç –æ—Ç —Å–≤–µ—á–µ–π, –±–∞–º–±—É–∫–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, –¥–µ–≤—É—à–∫–∞ –≤ –∫–∏–º–æ–Ω–æ —Å–∫–ª–æ–Ω—è–µ—Ç—Å—è –Ω–∞–¥ –∫–ª–∏–µ–Ω—Ç–∫–æ–π.
                            </div>
                        </div>

                        <div class="memory-entry corrupted">
                            <div class="memory-text">
                                –û—Ç—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –∫ —Ç–µ–±–µ. –£–ª—ã–±–∞–µ—Ç—Å—è. 
                                <br><br>
                                <span class="japanese-text">"„ÇÑ„Å£„Å®Êù•„Åæ„Åó„Åü„Å≠" (–ù–∞–∫–æ–Ω–µ—Ü-—Ç–æ –≤—ã –ø—Ä–∏—à–ª–∏)</span>
                                <br><br>
                                –ú–∏–π–æ–∫–æ –∂–¥–∞–ª–∞.
                            </div>
                        </div>
                    </div>
                `;

                this.choicesContainer.innerHTML = '';
                this.addChoice('ü™û –ü–æ–¥–æ–π—Ç–∏ –∫ –∑–µ—Ä–∫–∞–ª—É', 'approach_mirror', true, () => {
                    this.showMirrorScene();
                });
                this.addChoice('üìù –ò–∑—É—á–∏—Ç—å —ç—Å–∫–∏–∑—ã', 'study_sketches', false, () => {
                    this.showSketchesScene();
                });
                this.addChoice('üö™ –£–π—Ç–∏ –∏–∑ —Å—Ç—É–¥–∏–∏', 'leave_studio', false, () => {
                    this.showMemory(this.currentMemory);
                });
            }

            showVictimsStories() {
                this.gameContent.innerHTML = `
                    <div style="padding: 15px;">
                        <div class="nav-button" onclick="game.showMemory(${this.currentMemory})" style="margin-bottom: 15px;">‚Üê –ö –∑–∞–ø–∏—Å—è–º</div>
                        
                        <div style="text-align: center; margin-bottom: 20px;">
                            <div class="japanese-text" style="font-size: 16px; color: var(--accent-purple);">
                                <span class="japanese-symbol">Ë®ò</span>–ê–†–•–ò–í –ñ–ï–†–¢–í
                            </div>
                        </div>

                        <div class="memory-entry normal">
                            <div class="memory-header">
                                <span>–ê–∫–∞—Ä–∏ –°—É–∑—É–∫–∏ (Èà¥Êú®Êòé) ‚Ä¢ 1923 –≥–æ–¥</span>
                                <span>–í–æ–∑—Ä–∞—Å—Ç: 19</span>
                            </div>
                            <div class="memory-text">
                                –ú–æ–ª–æ–¥–∞—è –≥–µ–π—à–∞, –º–µ—á—Ç–∞–≤—à–∞—è —Å—Ç–∞—Ç—å –º–∞—Å—Ç–µ—Ä–æ–º —Ç–∞—Ç—É. –ü–æ—Å–ª–µ–¥–Ω—è—è –∑–∞–ø–∏—Å—å: "–°—Ç–∞—Ä–∞—è –º–∞—Å—Ç–µ—Ä –Ω–∞—É—á–∏–ª–∞ –º–µ–Ω—è —Å–µ–∫—Ä–µ—Ç—É –≤–µ—á–Ω–æ–π –∫—Ä–∞—Å–æ—Ç—ã. –ó–∞–≤—Ç—Ä–∞ —è —Å—Ç–∞–Ω—É –±–µ—Å—Å–º–µ—Ä—Ç–Ω–æ–π."
                            </div>
                        </div>

                        <div class="memory-entry normal">
                            <div class="memory-header">
                                <span>–•–∏–¥—ç–∫–æ –Ø–º–∞–¥–∞ (Â±±Áî∞ÁßÄÂ≠ê) ‚Ä¢ 1967 –≥–æ–¥</span>
                                <span>–í–æ–∑—Ä–∞—Å—Ç: 24</span>
                            </div>
                            <div class="memory-text">
                                –•—É–¥–æ–∂–Ω–∏—Ü–∞, —É–≤–ª–µ–∫–∞–≤—à–∞—è—Å—è —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–º –∏—Å–∫—É—Å—Å—Ç–≤–æ–º. –ù–∞—à–ª–∞ –¥—Ä–µ–≤–Ω–∏–µ —Å–≤–∏—Ç–∫–∏ —Å —Ç–µ—Ö–Ω–∏–∫–∞–º–∏. –ò—Å—á–µ–∑–ª–∞ –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ —Å–¥–µ–ª–∞–ª–∞ —Å–µ–±–µ —Ç–∞—Ç—É–∏—Ä–æ–≤–∫—É –¥—Ä–∞–∫–æ–Ω–∞.
                            </div>
                        </div>

                        <div class="memory-entry corrupted">
                            <div class="memory-header">
                                <span>–†–µ–π–∫–æ –ö–∞—Ç–æ (Âä†Ëó§Áé≤Â≠ê) ‚Ä¢ 1989 –≥–æ–¥</span>
                                <span>–í–æ–∑—Ä–∞—Å—Ç: 21</span>
                            </div>
                            <div class="memory-text">
                                –ü–∞–Ω–∫-—Ä–æ–∫–µ—Ä—à–∞, –¥–µ–ª–∞–ª–∞ —Ç–∞—Ç—É –≤ –ø–æ–¥–ø–æ–ª—å–Ω—ã—Ö —Å–∞–ª–æ–Ω–∞—Ö. –ü–æ—Å–ª–µ–¥–Ω–µ–µ –≤–∏–¥–µ–æ: "–Ø –≤—Å—Ç—Ä–µ—Ç–∏–ª–∞ –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ –º–∞—Å—Ç–µ—Ä–∞. –û–Ω–∞ –ø–æ–∫–∞–∂–µ—Ç –º–Ω–µ —Ç–µ—Ö–Ω–∏–∫–∏, –∫–æ—Ç–æ—Ä—ã–º 400 –ª–µ—Ç. –Ø –±—É–¥—É –ø–µ—Ä–≤–æ–π!"
                                <br><br>
                                <em>–¢–µ–ª–æ —Ç–∞–∫ –∏ –Ω–µ –Ω–∞—à–ª–∏.</em>
                            </div>
                        </div>

                        <div class="memory-entry system">
                            <div class="memory-text">
                                –ü–ê–¢–¢–ï–†–ù –û–ë–ù–ê–†–£–ñ–ï–ù: –ö–∞–∂–¥—ã–µ 20-30 –ª–µ—Ç –ú–∏–π–æ–∫–æ –≤—ã–±–∏—Ä–∞–µ—Ç –Ω–æ–≤—É—é –∂–µ—Ä—Ç–≤—É. –í—Å–µ–≥–¥–∞ –º–æ–ª–æ–¥—ã–µ –∂–µ–Ω—â–∏–Ω—ã, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –∏—Å–∫—É—Å—Å—Ç–≤–æ–º.
                                <br><br>
                                –Æ–∫–∏–Ω–æ - –Ω–µ –ø–µ—Ä–≤–∞—è. –ò –Ω–µ –ø–æ—Å–ª–µ–¥–Ω—è—è.
                            </div>
                        </div>
                    </div>
                `;

                this.choicesContainer.innerHTML = '';
                this.addChoice('üîç –ù–∞–π—Ç–∏ —Å–ø–æ—Å–æ–± –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ú–∏–π–æ–∫–æ', 'find_solution', false, () => {
                    this.showSolutionResearch();
                });
                this.addChoice('üìû –ü—Ä–µ–¥—É–ø—Ä–µ–¥–∏—Ç—å –¥—Ä—É–≥–∏—Ö –º–∞—Å—Ç–µ—Ä–æ–≤', 'warn_others', false, () => {
                    this.showWarningScene();
                });
            }

            showCoursesOverview() {
                this.gameState.coursesViewed = true;
                
                this.gameContent.innerHTML = `
                    <div style="padding: 15px;">
                        <div class="nav-button" onclick="game.showMemory(${this.currentMemory})" style="margin-bottom: 15px;">‚Üê –ö –∑–∞–ø–∏—Å—è–º</div>
                        
                        <div style="text-align: center; margin-bottom: 20px;">
                            <div class="japanese-text" style="font-size: 16px; color: var(--text-primary);">
                                <span class="japanese-symbol">Â≠¶</span>–ê–ö–ê–î–ï–ú–ò–Ø –¢–ê–¢–£-–ú–ê–°–¢–ï–†–°–¢–í–ê
                            </div>
                            <div style="font-size: 12px; color: var(--text-secondary);">–°–µ–∫—Ä–µ—Ç–Ω—ã–µ –∑–Ω–∞–Ω–∏—è –∏–∑ –∑–∞–ø–∏—Å–µ–π –Æ–∫–∏–Ω–æ</div>
                        </div>

                        <div class="memory-entry normal">
                            <div class="memory-text">
                                –ü–æ—Å–ª–µ –∏–∑—É—á–µ–Ω–∏—è –∑–∞–ø–∏—Å–µ–π —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —è—Å–Ω–æ - –Æ–∫–∏–Ω–æ –±—ã–ª–∞ –Ω–∞—Å—Ç–æ—è—â–∏–º –º–∞—Å—Ç–µ—Ä–æ–º. –í –µ—ë –∑–∞–º–µ—Ç–∫–∞—Ö –Ω–∞–π–¥–µ–Ω—ã —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ–±—É—á–∞—é—â–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω–∞ –∏–∑—É—á–∞–ª–∞.
                            </div>
                        </div>

                        <div style="margin: 15px 0; background: rgba(0, 255, 170, 0.1); border: 1px solid var(--text-primary); border-radius: 8px; padding: 15px;">
                            <div style="font-size: 13px; font-weight: bold; margin-bottom: 10px; color: var(--text-primary);">–î–û–°–¢–£–ü–ù–´–ï –ö–£–†–°–´:</div>
                            
                            <div style="margin: 8px 0; padding: 8px; background: rgba(255, 0, 128, 0.1); border-radius: 4px;">
                                <strong>–ü–æ–ª–Ω—ã–π –∫—É—Ä—Å —Ç–∞—Ç—É-–º–∞—Å—Ç–µ—Ä–∞</strong> - 22,500‚ÇΩ (–±—ã–ª–æ 45,000‚ÇΩ)
                                <br><small>–¢–µ–æ—Ä–∏—è + –≤–∏–¥–µ–æ + –Ω–∞—Å—Ç–∞–≤–Ω–∏—á–µ—Å—Ç–≤–æ ‚Ä¢ 1-2 –º–µ—Å—è—Ü–∞</small>
                                <button class="course-button" onclick="game.showCourse('full_course')">üéì –ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
                            </div>

                            <div style="margin: 8px 0; padding: 8px; background: rgba(0, 153, 255, 0.1); border-radius: 4px;">
                                <strong>–ë–∞–∑–æ–≤—ã–π –∫—É—Ä—Å —Å –≤–∏–¥–µ–æ</strong> - 12,500‚ÇΩ (–±—ã–ª–æ 25,000‚ÇΩ)
                                <br><small>–¢–µ–æ—Ä–∏—è + –≤–∏–¥–µ–æ + —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Å–æ–∑–≤–æ–Ω</small>
                                <button class="course-button" onclick="game.showCourse('basic_course')">üéì –ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
                            </div>

                            <div style="margin: 8px 0; padding: 8px; background: rgba(138, 43, 226, 0.1); border-radius: 4px;">
                                <strong>–í–µ–¥–µ–Ω–∏–µ —Å–æ—Ü—Å–µ—Ç–µ–π –¥–ª—è —Ç–∞—Ç—É</strong> - 12,500‚ÇΩ (–±—ã–ª–æ 25,000‚ÇΩ)
                                <br><small>Reels, TikTok, –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ ‚Ä¢ 3 –Ω–µ–¥–µ–ª–∏</small>
                                <button class="course-button" onclick="game.showCourse('smm_course')">üéì –ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
                            </div>

                            <div style="margin: 8px 0; padding: 8px; background: rgba(0, 255, 170, 0.1); border-radius: 4px;">
                                <strong>–†–∏—Å–æ–≤–∞–Ω–∏–µ –≤ Procreate</strong> - 7,500‚ÇΩ (–±—ã–ª–æ 15,000‚ÇΩ)
                                <br><small>–¶–∏—Ñ—Ä–æ–≤—ã–µ —ç—Å–∫–∏–∑—ã –¥–ª—è —Ç–∞—Ç—É</small>
                                <button class="course-button" onclick="game.showCourse('procreate_course')">üéì –ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
                            </div>
                        </div>

                        <div class="memory-entry system">
                            <div class="memory-text">
                                üéÅ –ü—Ä–æ–º–æ–∫–æ–¥ SHADOWS50 - —Å–∫–∏–¥–∫–∞ 50% –Ω–∞ –≤—Å–µ –∫—É—Ä—Å—ã
                                <br>+ –ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è —Å –º–∞—Å—Ç–µ—Ä–æ–º
                            </div>
                        </div>
                    </div>
                `;

                this.choicesContainer.innerHTML = '';
                this.addChoice('üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥', 'copy_promo', false, () => {
                    if (navigator.clipboard) {
                        navigator.clipboard.writeText('SHADOWS50');
                    }
                    this.showNotification('–ü—Ä–æ–º–æ–∫–æ–¥ SHADOWS50 —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!');
                });
            }

            showCourse(courseId) {
                const courses = {
                    'full_course': {
                        title: '–ü–û–õ–ù–´–ô –ö–£–†–° –¢–ê–¢–£-–ú–ê–°–¢–ï–†–ê',
                        description: '–°—Ç–∞–Ω—å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–º —Ç–∞—Ç—É-–º–∞—Å—Ç–µ—Ä–æ–º —Å –Ω—É–ª—è, –∫–∞–∫ –Æ–∫–∏–Ω–æ. –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ —Å –Ω–∞—Å—Ç–∞–≤–Ω–∏—á–µ—Å—Ç–≤–æ–º –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π.',
                        skills: ['–¢–µ–æ—Ä–∏—è —Ç–∞—Ç—É–∏—Ä–æ–≤–∫–∏', '–†–∞–±–æ—Ç–∞ —Å –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ–º', '–≠—Å–∫–∏–∑—ã –∏ –¥–∏–∑–∞–π–Ω', '–ì–∏–≥–∏–µ–Ω–∞ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å', '–†–∞–∑–≤–∏—Ç–∏–µ —Å–æ—Ü—Å–µ—Ç–µ–π', '–ü—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ —Å—Ç—É–¥–∏–∏'],
                        duration: '1-2 –º–µ—Å—è—Ü–∞',
                        project: '–ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ —Ç–∞—Ç—É-–º–∞—Å—Ç–µ—Ä–∞',
                        price: '45,000‚ÇΩ',
                        salePrice: '22,500‚ÇΩ'
                    },
                    'basic_course': {
                        title: '–ë–ê–ó–û–í–´–ô –ö–£–†–° –° –í–ò–î–ï–û',
                        description: '–û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –≤—ã–±–æ—Ä –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è —Ç–∞—Ç—É-–∏—Å–∫—É—Å—Å—Ç–≤–∞. –¢–µ–æ—Ä–∏—è + –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –≤–∏–¥–µ–æ-—É—Ä–æ–∫–∏.',
                        skills: ['–¢–µ–æ—Ä–∏—è —Ç–∞—Ç—É–∏—Ä–æ–≤–∫–∏', '–í–∏–¥–µ–æ-—É—Ä–æ–∫–∏ –ø–æ –ø—Ä–∞–∫—Ç–∏–∫–µ', '–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —ç—Å–∫–∏–∑–æ–≤', '–†–∞–±–æ—Ç–∞ —Å –ø–∏–≥–º–µ–Ω—Ç–æ–º', '–û—Å–Ω–æ–≤—ã –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏—è'],
                        duration: '1-2 –º–µ—Å—è—Ü–∞',
                        project: '–ü–µ—Ä–≤—ã–µ —Ç–∞—Ç—É–∏—Ä–æ–≤–∫–∏',
                        price: '25,000‚ÇΩ',
                        salePrice: '12,500‚ÇΩ'
                    },
                    'smm_course': {
                        title: '–í–ï–î–ï–ù–ò–ï –°–û–¶–°–ï–¢–ï–ô –î–õ–Ø –¢–ê–¢–£',
                        description: '–†–∞—Å–∫—Ä—É—Ç–∏ —Å–≤–æ–π —Ç–∞—Ç—É-–ø—Ä–æ—Ñ–∏–ª—å, –∫–∞–∫ —ç—Ç–æ –¥–µ–ª–∞–ª–∞ –Æ–∫–∏–Ω–æ! –ò–∑—É—á–∏ –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ –≤ Instagram, TikTok.',
                        skills: ['–ë—Ä–µ–Ω–¥ —Ç–∞—Ç—É-–º–∞—Å—Ç–µ—Ä–∞', '–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è', '–ö–æ–Ω—Ç–µ–Ω—Ç-–ø–ª–∞–Ω—ã', 'Reels –∏ TikTok', 'Stories –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ', '–ü—Ä–æ–¥–∞–∂–∏ —á–µ—Ä–µ–∑ —Å–æ—Ü—Å–µ—Ç–∏'],
                        duration: '3 –Ω–µ–¥–µ–ª–∏',
                        project: '–†–∞—Å–∫—Ä—É—á–µ–Ω–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å',
                        price: '25,000‚ÇΩ',
                        salePrice: '12,500‚ÇΩ'
                    },
                    'procreate_course': {
                        title: '–†–ò–°–û–í–ê–ù–ò–ï –í PROCREATE',
                        description: '–°–æ–∑–¥–∞–≤–∞–π —ç—Å–∫–∏–∑—ã –¥–ª—è —Ç–∞—Ç—É –≤ —Ü–∏—Ñ—Ä–æ–≤–æ–º —Ñ–æ—Ä–º–∞—Ç–µ, –∫–∞–∫ –≤ –∑–∞–ø–∏—Å—è—Ö –Æ–∫–∏–Ω–æ. –û—Å–≤–æ–π Procreate.',
                        skills: ['–û—Å–Ω–æ–≤—ã Procreate', '–¶–∏—Ñ—Ä–æ–≤–æ–µ —Ä–∏—Å–æ–≤–∞–Ω–∏–µ', '–°–æ–∑–¥–∞–Ω–∏–µ —ç—Å–∫–∏–∑–æ–≤', '–†–∞–±–æ—Ç–∞ —Å —Ü–≤–µ—Ç–æ–º', '–ì—Ä–∞—Ñ–∏–∫–∞ –¥–ª—è —Ç–∞—Ç—É'],
                        duration: '–ì–∏–±–∫–∏–π –≥—Ä–∞—Ñ–∏–∫',
                        project: '–ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ —ç—Å–∫–∏–∑–æ–≤',
                        price: '15,000‚ÇΩ',
                        salePrice: '7,500‚ÇΩ'
                    }
                };

                const course = courses[courseId];
                this.gameContent.innerHTML = `
                    <div style="padding: 15px;">
                        <div class="nav-button" onclick="game.showCoursesOverview()" style="margin-bottom: 15px;">‚Üê –ö –∫—É—Ä—Å–∞–º</div>
                        
                        <div style="text-align: center; margin-bottom: 20px;">
                            <div style="font-size: 16px; color: var(--accent-pink);">${course.title}</div>
                        </div>
                        
                        <div class="memory-entry normal">
                            <div class="memory-text">${course.description}</div>
                        </div>

                        <div class="memory-entry system">
                            <div class="memory-text">
                                <strong>–ò–∑—É—á–∏—à—å:</strong><br>
                                ${course.skills.map(skill => `‚Ä¢ ${skill}`).join('<br>')}
                            </div>
                        </div>

                        <div class="memory-entry normal">
                            <div class="memory-text">
                                <strong>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</strong> ${course.duration}<br>
                                <strong>–ò—Ç–æ–≥–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç:</strong> ${course.project}
                            </div>
                        </div>

                        <div class="memory-entry corrupted">
                            <div class="memory-text">
                                <span style="text-decoration: line-through; opacity: 0.6;">${course.price}</span><br>
                                <strong style="font-size: 18px; color: var(--text-primary);">${course.salePrice}</strong><br>
                                <span style="font-size: 10px;">üî• –°–∫–∏–¥–∫–∞ 50% –¥–æ –∫–æ–Ω—Ü–∞ –º–µ—Å—è—Ü–∞</span>
                            </div>
                        </div>
                    </div>
                `;

                this.choicesContainer.innerHTML = '';
                this.addChoice('üí≥ –ö—É–ø–∏—Ç—å –∫—É—Ä—Å', 'buy_course', false, () => {
                    this.showPayment(course);
                });
                this.addChoice('üì± –£–∑–Ω–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ', 'more_info', false, () => {
                    if (tg) {
                        tg.openLink('https://t.me/your_support_bot');
                    }
                });
            }

            showPayment(course) {
                this.gameContent.innerHTML = `
                    <div style="padding: 15px; text-align: center;">
                        <div style="font-size: 16px; color: var(--text-primary); margin-bottom: 20px;">–û–§–û–†–ú–õ–ï–ù–ò–ï –ü–û–ö–£–ü–ö–ò</div>
                        
                        <div class="memory-entry system">
                            <div class="memory-text">–ö—É—Ä—Å: ${course.title}</div>
                        </div>

                        <div class="memory-entry normal">
                            <div class="memory-text">–ö –æ–ø–ª–∞—Ç–µ: <strong>${course.salePrice}</strong></div>
                        </div>

                        <div class="memory-entry corrupted">
                            <div class="memory-text">‚ö†Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ Telegram Payments</div>
                        </div>
                    </div>
                `;

                this.choicesContainer.innerHTML = '';
                this.addChoice('üí≥ –û–ø–ª–∞—Ç–∏—Ç—å', 'process_payment', false, () => {
                    if (tg) {
                        tg.MainButton.text = "–û–ü–õ–ê–¢–ò–¢–¨ " + course.salePrice;
                        tg.MainButton.show();
                        tg.MainButton.onClick(() => {
                            this.processTelegramPayment(course);
                        });
                    }
                    this.showPaymentSuccess(course);
                });
            }

            showPaymentSuccess(course) {
                this.gameContent.innerHTML = `
                    <div style="padding: 15px; text-align: center;">
                        <div style="font-size: 16px; color: var(--text-primary); margin-bottom: 20px;">–ü–û–ö–£–ü–ö–ê –ó–ê–í–ï–†–®–ï–ù–ê</div>
                        
                        <div class="memory-entry system">
                            <div class="memory-text">‚úÖ –û–ø–ª–∞—Ç–∞ –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ!</div>
                        </div>

                        <div class="memory-entry normal">
                            <div class="memory-text">–ö—É—Ä—Å "${course.title}" –¥–æ–±–∞–≤–ª–µ–Ω –≤ –≤–∞—à—É –±–∏–±–ª–∏–æ—Ç–µ–∫—É.</div>
                        </div>

                        <div class="memory-entry system">
                            <div class="memory-text">üìß –°—Å—ã–ª–∫–∞ –Ω–∞ –æ–±—É—á–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –Ω–∞ email<br>üí¨ –î–æ—Å—Ç—É–ø –∫ –∑–∞–∫—Ä—ã—Ç–æ–º—É —á–∞—Ç—É —Å—Ç—É–¥–µ–Ω—Ç–æ–≤<br>üìö –í—Å–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–æ—Å—Ç—É–ø–Ω—ã —Å—Ä–∞–∑—É</div>
                        </div>
                    </div>
                `;

                this.choicesContainer.innerHTML = '';
                this.addChoice('üéì –ù–∞—á–∞—Ç—å –æ–±—É—á–µ–Ω–∏–µ', 'start_learning', false, () => {
                    if (tg) {
                        tg.openLink('https://your-learning-platform.com/start');
                    }
                    this.showCoursesOverview();
                });
            }

            showEnding(choice = null) {
                this.gameState.finalChoice = choice;
                this.gameState.truthRevealed = true;

                let endingContent = '';
                
                if (choice === 'accept') {
                    endingContent = `
                        <div class="memory-entry system">
                            <div class="memory-text">–ö–û–ù–¶–û–í–ö–ê: –°–õ–ò–Ø–ù–ò–ï –î–£–®</div>
                        </div>
                        <div class="memory-entry corrupted">
                            <div class="memory-text">–¢—ã –ø—Ä–∏–Ω–∏–º–∞–µ—à—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ú–∏–π–æ–∫–æ. –î—Ä–µ–≤–Ω–∏–µ –∑–Ω–∞–Ω–∏—è –≤–ª–∏–≤–∞—é—Ç—Å—è –≤ —Ç–≤–æ–π —Ä–∞–∑—É–º. –°–µ–∫—Ä–µ—Ç—ã, –∫–æ—Ç–æ—Ä—ã–º —Å–æ—Ç–Ω–∏ –ª–µ—Ç.</div>
                        </div>
                        <div class="memory-entry normal">
                            <div class="memory-text">–¢–µ–ø–µ—Ä—å —Ç—ã –≤–ª–∞–¥–µ–µ—à—å —Ç–µ—Ö–Ω–∏–∫–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –∑–Ω–∞–µ—Ç –Ω–∏–∫—Ç–æ –∏–∑ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–∞—Å—Ç–µ—Ä–æ–≤. –¢–≤–æ—è —Å—Ç—É–¥–∏—è —Å—Ç–∞–Ω–µ—Ç –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–π.</div>
                        </div>
                        <div class="memory-entry system">
                            <div class="memory-text">–ù–æ —Ü–µ–Ω–∞... –ø–æ–ª–æ–≤–∏–Ω–∞ –∂–∏–∑–Ω–∏. –ò —á–µ—Ä–µ–∑ 50 –ª–µ—Ç —Ç—ã —Ç–æ–∂–µ –±—É–¥–µ—à—å –∏—Å–∫–∞—Ç—å —É—á–µ–Ω–∏—Ü—É.</div>
                        </div>
                    `;
                } else if (choice === 'reject') {
                    endingContent = `
                        <div class="memory-entry system">
                            <div class="memory-text">–ö–û–ù–¶–û–í–ö–ê: –°–û–ü–†–û–¢–ò–í–õ–ï–ù–ò–ï</div>
                        </div>
                        <div class="memory-entry normal">
                            <div class="memory-text">–¢—ã –æ—Ç–∫–∞–∑—ã–≤–∞–µ—à—å—Å—è –æ—Ç —Å–¥–µ–ª–∫–∏. –ú–∏–π–æ–∫–æ –∏—Å—á–µ–∑–∞–µ—Ç, –Ω–æ –Ω–µ –Ω–∞–≤—Å–µ–≥–¥–∞. –û–Ω–∞ –Ω–∞–π–¥—ë—Ç –¥—Ä—É–≥—É—é –∂–µ—Ä—Ç–≤—É.</div>
                        </div>
                        <div class="memory-entry corrupted">
                            <div class="memory-text">–°—Ç—É–¥–∏—è –ø—É—Å—Ç–∞. –Æ–∫–∏–Ω–æ –Ω–µ –≤–µ—Ä–Ω—ë—Ç—Å—è. –ù–æ –µ—ë –∑–∞–ø–∏—Å–∏ –æ—Å—Ç–∞–ª–∏—Å—å... –∫–∞–∫ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ.</div>
                        </div>
                        <div class="memory-entry system">
                            <div class="memory-text">–¢—ã —Ä–µ—à–∞–µ—à—å –∏–∑—É—á–∏—Ç—å —Ç–∞—Ç—É-–º–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ. –ë–µ–∑–æ–ø–∞—Å–Ω—ã–º –ø—É—Ç—ë–º.</div>
                        </div>
                    `;
                } else if (choice === 'fight') {
                    endingContent = `
                        <div class="memory-entry system">
                            <div class="memory-text">–ö–û–ù–¶–û–í–ö–ê: –≠–ö–ó–û–†–¶–ò–ó–ú</div>
                        </div>
                        <div class="memory-entry corrupted">
                            <div class="memory-text">–¢—ã –ø—ã—Ç–∞–µ—à—å—Å—è –∏–∑–≥–Ω–∞—Ç—å –¥—É—Ö –ú–∏–π–æ–∫–æ. –†–∏—Ç—É–∞–ª –æ–ø–∞—Å–µ–Ω, –Ω–æ —Ç—ã –≥–æ—Ç–æ–≤–∞ —Ä–∏—Å–∫–Ω—É—Ç—å.</div>
                        </div>
                        <div class="memory-entry normal">
                            <div class="memory-text">–ü–æ—Å–ª–µ –±–æ—Ä—å–±—ã –ú–∏–π–æ–∫–æ –ø–æ–±–µ–∂–¥–µ–Ω–∞... –Ω–æ –∑–Ω–∞–Ω–∏—è –ø–æ—Ç–µ—Ä—è–Ω—ã –Ω–∞–≤—Å–µ–≥–¥–∞. –î—Ä–µ–≤–Ω–∏–µ —Ç–µ—Ö–Ω–∏–∫–∏ —É–º–µ—Ä–ª–∏ —Å –Ω–µ–π.</div>
                        </div>
                        <div class="memory-entry system">
                            <div class="memory-text">–Æ–∫–∏–Ω–æ —Å–≤–æ–±–æ–¥–Ω–∞, –Ω–æ –º–Ω–æ–≥–æ–µ –∑–∞–±—ã–ª–∞. –í—ã –≤–º–µ—Å—Ç–µ –Ω–∞—á–∏–Ω–∞–µ—Ç–µ –∏–∑—É—á–∞—Ç—å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ç–∞—Ç—É-–∏—Å–∫—É—Å—Å—Ç–≤–æ.</div>
                        </div>
                    `;
                } else {
                    endingContent = `
                        <div class="memory-entry system">
                            <div class="memory-text">–ó–ê–ì–ê–î–ö–ê –†–ê–°–ö–†–´–¢–ê</div>
                        </div>
                        <div class="memory-entry normal">
                            <div class="memory-text">–¢–µ–ª–µ—Ñ–æ–Ω –≤–Ω–µ–∑–∞–ø–Ω–æ –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è. –ó–∞–ø–∏—Å–∏ –∏—Å—á–µ–∑–∞—é—Ç. –û—Å—Ç–∞—ë—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –≤–æ–ø—Ä–æ—Å...</div>
                        </div>
                        <div class="memory-entry corrupted">
                            <div class="memory-text">–ß—Ç–æ —Å–ª—É—á–∏–ª–æ—Å—å —Å –Æ–∫–∏–Ω–æ? –ò –≥–æ—Ç–æ–≤–∞ –ª–∏ —Ç—ã –≤–æ–π—Ç–∏ –≤ –µ—ë —Å—Ç—É–¥–∏—é?</div>
                        </div>
                    `;
                }

                this.gameContent.innerHTML = `
                    <div style="padding: 15px;">
                        <div style="text-align: center; margin-bottom: 20px;">
                            <div class="japanese-text" style="font-size: 18px; color: var(--accent-pink);">
                                <span class="japanese-symbol">ÁµÇ</span>–§–ò–ù–ê–õ
                            </div>
                        </div>

                        ${endingContent}

                        <div style="margin-top: 20px; padding: 12px; background: rgba(0, 255, 170, 0.1); border: 1px solid var(--text-primary); border-radius: 8px;">
                            <div style="font-size: 11px; color: var(--text-primary); margin-bottom: 8px;">üí° –≠–ü–ò–õ–û–ì</div>
                            <div style="font-size: 12px;">–ò—Å—Ç–æ—Ä–∏—è –Æ–∫–∏–Ω–æ –ø–æ–∫–∞–∑–∞–ª–∞ —Ç–µ–±–µ –º–∏—Ä —Ç–∞—Ç—É-–º–∞—Å—Ç–µ—Ä—Å—Ç–≤–∞. –•–æ—á–µ—à—å –∏–∑—É—á–∏—Ç—å —ç—Ç–æ –∏—Å–∫—É—Å—Å—Ç–≤–æ –≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏? –ù–∞—á–Ω–∏ —Å –Ω–∞—à–∏—Ö –∫—É—Ä—Å–æ–≤!</div>
                            <button class="course-button" onclick="game.showCoursesOverview()">
                                üéì –°—Ç–∞—Ç—å —Ç–∞—Ç—É-–º–∞—Å—Ç–µ—Ä–æ–º
                            </button>
                        </div>
                    </div>
                `;

                this.choicesContainer.innerHTML = '';
                this.addChoice('üîÑ –ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ', 'restart', false, () => {
                    location.reload();
                });
                this.addChoice('üì± –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –∏—Å—Ç–æ—Ä–∏–µ–π', 'share', false, () => {
                    if (tg) {
                        tg.switchInlineQuery('–ü—Ä–æ—à–ª–∞ –º–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –∫–≤–µ—Å—Ç –ø—Ä–æ —Ç–∞—Ç—É-–º–∞—Å—Ç–µ—Ä–∞! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏ –≤—ã üêâ');
                    }
                });
            }

            addChoice(text, id, dangerous = false, callback) {
                const button = document.createElement('button');
                button.className = `choice-button ${dangerous ? 'dangerous' : ''}`;
                button.textContent = text;
                button.onclick = callback;
                this.choicesContainer.appendChild(button);
            }

            showNotification(text) {
                const notification = document.createElement('div');
                notification.style.cssText = `position: fixed; top: 50px; right: 20px; background: var(--accent-pink); color: white; padding: 10px; border-radius: 5px; z-index: 1000;`;
                notification.textContent = text;
                document.body.appendChild(notification);
                setTimeout(() => notification.remove(), 3000);
            }

            showDeviceInfo() {
                this.gameContent.innerHTML = `
                    <div style="padding: 15px;">
                        <div class="nav-button" onclick="game.showMainInterface()" style="margin-bottom: 15px;">‚Üê –ù–∞–∑–∞–¥</div>
                        
                        <div style="text-align: center; margin-bottom: 20px;">
                            <div class="japanese-text" style="font-size: 16px; color: var(--accent-blue);">
                                <span class="japanese-symbol">Ê©ü</span>–ò–ù–§–û–†–ú–ê–¶–ò–Ø –û–ë –£–°–¢–†–û–ô–°–¢–í–ï
                            </div>
                        </div>

                        <div class="memory-entry system">
                            <div class="memory-text">
                                –ú–æ–¥–µ–ª—å: Nokia 3310 Êîπ (Modified)<br>
                                –í–ª–∞–¥–µ–ª–µ—Ü: È´òÊ©ãÈõ™‰πÉ (–Æ–∫–∏–Ω–æ –¢–∞–∫–∞—Ö–∞—Å–∏)<br>
                                –°—Ç–∞—Ç—É—Å: –ü—Ä–æ–ø–∞–≤—à–∞—è –±–µ–∑ –≤–µ—Å—Ç–∏<br>
                                –ü–∞–º—è—Ç—å: 64MB (–ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∞)<br>
                                –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏: –°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è
                            </div>
                        </div>

                        <div class="memory-entry corrupted">
                            <div class="memory-text">
                                ‚ö†Ô∏è –ê–ù–û–ú–ê–õ–ò–ò:<br>
                                ‚Ä¢ –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤–∫–ª—é—á–∞–µ—Ç—Å—è –±–µ–∑ –±–∞—Ç–∞—Ä–µ–∏<br>
                                ‚Ä¢ –ó–∞–ø–∏—Å–∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è —Å–∞–º–∏<br>
                                ‚Ä¢ –ö–∞–º–µ—Ä–∞ —Å–Ω–∏–º–∞–µ—Ç —Ç–æ, —á–µ–≥–æ –Ω–µ—Ç<br>
                                ‚Ä¢ GPS –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –º–µ—Å—Ç–∞ –∏–∑ –ø—Ä–æ—à–ª–æ–≥–æ
                            </div>
                        </div>
                    </div>
                `;

                this.choicesContainer.innerHTML = '';
                this.addChoice('üîç –ö –∑–∞–ø–∏—Å—è–º', 'back_to_memories', false, () => {
                    this.showMainInterface();
                });
            }

            processTelegramPayment(course) {
                if (tg && tg.initDataUnsafe?.user) {
                    const paymentData = {
                        course: course.title,
                        price: course.salePrice,
                        userId: tg.initDataUnsafe.user.id,
                        userName: tg.initDataUnsafe.user.first_name,
                        timestamp: Date.now()
                    };
                    
                    tg.sendData(JSON.stringify({
                        type: 'purchase',
                        data: paymentData
                    }));
                }
            }
        }

        let game;
        document.addEventListener('DOMContentLoaded', () => {
            game = new MizuNoKageGame();
            
            if (tg) {
                tg.MainButton.text = "–ù–ê–ß–ê–¢–¨ –†–ê–°–°–õ–ï–î–û–í–ê–ù–ò–ï";
                tg.MainButton.show();
                tg.MainButton.onClick(() => {
                    if (!game.gameState.deviceBooted) {
                        game.showBootScreen();
                    }
                });
                
                tg.setHeaderColor('#0a0a0f');
                tg.setBackgroundColor('#0a0a0f');
            }
        });

        // –ì–ª–∏—Ç—á —ç—Ñ—Ñ–µ–∫—Ç—ã
        setInterval(() => {
            if (Math.random() < 0.03) {
                document.body.style.filter = `hue-rotate(${Math.random() * 360}deg) saturate(${1 + Math.random()})`; 
                setTimeout(() => { document.body.style.filter = 'none'; }, 150);
            }
        }, 2000);

        // –ú–∏–≥–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
        setInterval(() => {
            const glitchElements = document.querySelectorAll('.glitch-text');
            glitchElements.forEach(el => {
                if (Math.random() < 0.1) {
                    el.style.opacity = Math.random() > 0.5 ? '1' : '0.7';
                    setTimeout(() => { el.style.opacity = '1'; }, 100);
                }
            });
        }, 1000);
    </script>
</body>
</html>
