<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÈòøÈÉ®ÂÆö | –°–ê–î–ê –ê–ë–≠</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono:wght@400&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;700&display=swap');
        
        :root {
            --bg-dark: #0a0a0f;
            --bg-secondary: #1a1a2e;
            --text-primary: #00ffaa;
            --text-secondary: #666;
            --accent-pink: #ff0080;
            --accent-blue: #0099ff;
            --accent-purple: #8a2be2;
            --accent-red: #ff3333;
            --border-color: #333;
            --choice-bg: #001a0f;
            --choice-hover: #002a1f;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: var(--bg-dark);
            color: var(--text-primary);
            font-family: 'Share Tech Mono', 'Noto Sans JP', monospace;
            height: 100vh;
            overflow: hidden;
            position: relative;
        }

        /* –ì–ª–∏—Ç—á —ç—Ñ—Ñ–µ–∫—Ç—ã –∫–∞–∫ –≤ 2005-2006 */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                repeating-linear-gradient(
                    0deg,
                    transparent,
                    transparent 2px,
                    rgba(0, 255, 170, 0.03) 2px,
                    rgba(0, 255, 170, 0.03) 4px
                );
            pointer-events: none;
            z-index: 1;
            animation: scanlines 2s linear infinite;
        }

        @keyframes scanlines {
            0% { transform: translateY(0); }
            100% { transform: translateY(4px); }
        }

        .phone-container {
            width: 380px;
            height: 720px;
            margin: 20px auto;
            background: linear-gradient(145deg, #2a2a2a, #1a1a1a);
            border: 4px solid var(--border-color);
            border-radius: 25px;
            padding: 20px;
            box-shadow: 0 0 30px rgba(255, 0, 128, 0.3);
            position: relative;
            z-index: 2;
        }

        .screen {
            width: 100%;
            height: 100%;
            background: var(--bg-dark);
            border-radius: 15px;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .phone-header {
            background: var(--bg-secondary);
            padding: 8px 12px;
            font-size: 0.7rem;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .japanese-text {
            font-family: 'Noto Sans JP', sans-serif;
            font-weight: 300;
        }

        .glitch-text {
            animation: textGlitch 2s infinite;
        }

        @keyframes textGlitch {
            0%, 90% { transform: translateX(0); }
            92% { transform: translateX(-2px); }
            94% { transform: translateX(2px); }
            96% { transform: translateX(-1px); }
            98% { transform: translateX(1px); }
            100% { transform: translateX(0); }
        }

        .battery {
            color: var(--accent-pink);
            animation: batteryBlink 2s infinite;
        }

        @keyframes batteryBlink {
            0%, 70% { opacity: 1; }
            85%, 100% { opacity: 0.3; }
        }

        .content-area {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
        }

        .screen-title {
            color: var(--text-primary);
            font-size: 16px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 0 0 10px var(--text-primary);
        }

        /* STORY SEGMENTS */
        .story-entry {
            margin: 8px 0;
            padding: 12px;
            border-radius: 8px;
            animation: messageSlide 0.3s ease-out;
            position: relative;
        }

        @keyframes messageSlide {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .story-entry.normal {
            background: rgba(0, 255, 170, 0.1);
            border: 1px solid rgba(0, 255, 170, 0.3);
        }

        .story-entry.passion {
            background: linear-gradient(45deg, rgba(255, 0, 128, 0.2), rgba(0, 0, 0, 0.8));
            border: 1px solid var(--accent-pink);
            animation: passionGlitch 0.5s ease-out;
        }

        .story-entry.danger {
            background: linear-gradient(45deg, rgba(255, 51, 51, 0.2), rgba(0, 0, 0, 0.8));
            border: 1px solid var(--accent-red);
            animation: dangerGlitch 0.5s ease-out;
        }

        .story-entry.geisha {
            background: linear-gradient(45deg, rgba(138, 43, 226, 0.2), rgba(0, 0, 0, 0.8));
            border: 1px solid var(--accent-purple);
        }

        .story-entry.system {
            background: rgba(138, 43, 226, 0.2);
            border: 1px solid var(--accent-purple);
            text-align: center;
            font-size: 12px;
        }

        @keyframes passionGlitch {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-2px); }
            75% { transform: translateX(2px); }
        }

        @keyframes dangerGlitch {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-3px); }
            75% { transform: translateX(3px); }
        }

        .story-header {
            font-size: 10px;
            color: var(--text-secondary);
            margin-bottom: 6px;
            display: flex;
            justify-content: space-between;
        }

        .story-text {
            font-size: 14px;
            line-height: 1.4;
            margin-bottom: 8px;
        }

        .story-timestamp {
            font-size: 10px;
            color: var(--text-secondary);
            text-align: right;
        }

        .japanese-symbol {
            font-family: 'Noto Sans JP', sans-serif;
            font-size: 18px;
            color: var(--accent-pink);
            display: inline-block;
            margin-right: 8px;
        }

        /* CHOICES */
        .choice-button {
            width: 100%;
            padding: 12px;
            margin: 6px 0;
            background: var(--choice-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-primary);
            font-family: inherit;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
        }

        .choice-button:hover {
            background: var(--choice-hover);
            border-color: var(--text-primary);
            box-shadow: 0 0 10px rgba(0, 255, 170, 0.3);
        }

        .choice-button.dangerous {
            border-color: var(--accent-red);
            color: var(--accent-red);
        }

        .choice-button.dangerous:hover {
            background: rgba(255, 51, 51, 0.1);
            box-shadow: 0 0 10px rgba(255, 51, 51, 0.3);
        }

        .choice-button.passionate {
            border-color: var(--accent-pink);
            color: var(--accent-pink);
        }

        .choice-button.passionate:hover {
            background: rgba(255, 0, 128, 0.1);
            box-shadow: 0 0 10px rgba(255, 0, 128, 0.3);
        }

        .choice-button.time-sensitive {
            border-color: var(--accent-blue);
            color: var(--accent-blue);
            animation: timePulse 1s infinite;
        }

        @keyframes timePulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .choices {
            padding: 15px;
            border-top: 1px solid var(--border-color);
            background: var(--bg-secondary);
        }

        .loading {
            text-align: center;
            color: var(--text-secondary);
            font-size: 12px;
            padding: 20px;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        .timer {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255, 0, 128, 0.8);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 10px;
            z-index: 100;
        }

        .hidden { display: none; }
        .text-center { text-align: center; }
        .text-pink { color: var(--accent-pink); }
        .text-blue { color: var(--accent-blue); }
        .text-purple { color: var(--accent-purple); }
        .text-red { color: var(--accent-red); }
    </style>
</head>
<body>
    <div class="phone-container">
        <div class="screen">
            <div class="phone-header">
                <div>
                    <span style="display: flex; gap: 2px;">
                        <div style="width: 3px; height: 8px; background: var(--text-primary); opacity: 1;"></div>
                        <div style="width: 3px; height: 8px; background: var(--text-primary); opacity: 1;"></div>
                        <div style="width: 3px; height: 8px; background: var(--text-primary); opacity: 0.3;"></div>
                        <div style="width: 3px; height: 8px; background: var(--text-primary); opacity: 0.3;"></div>
                    </span>
                    <span class="japanese-text">Taisho 14</span>
                </div>
                <div class="battery">15% ‚ö†Ô∏è</div>
            </div>

            <div id="timer" class="timer hidden">–í—Ä–µ–º—è: 0:00</div>
            <div id="gameContent" class="content-area"></div>
            <div id="choicesContainer" class="choices">
                <div class="loading japanese-text">Êò≠ÂíåÂàùÊúü...</div>
            </div>
        </div>
    </div>

    <script>
        const tg = window.Telegram?.WebApp;
        if (tg) {
            tg.ready();
            tg.expand();
            tg.setHeaderColor('#0a0a0f');
            tg.setBackgroundColor('#0a0a0f');
        }

        class SadaAbeGame {
            constructor() {
                this.gameContent = document.getElementById('gameContent');
                this.choicesContainer = document.getElementById('choicesContainer');
                this.timer = document.getElementById('timer');
                this.currentChapter = 0;
                this.timeElapsed = 0;
                this.gameTimer = null;
                
                this.gameState = {
                    path: 'normal', // normal, rebellion, escape, tragedy
                    loverMet: false,
                    passionLevel: 0,
                    freedomSought: false,
                    tragedyCommitted: false,
                    playerChoices: [],
                    currentYear: 1922,
                    currentLocation: '–ö–∞–Ω–¥–∞, –¢–æ–∫–∏–æ'
                };

                this.story = {
                    playerName: tg?.initDataUnsafe?.user?.first_name || '–°–∞–¥–∞',
                    loverName: '–ö–∏—Ç–∏–¥–∑–æ –ò—Å–∏–¥–∞',
                    fatherName: '–°–∏–≥—ç—ë—Å–∏ –ê–±—ç'
                };

                this.init();
            }

            init() {
                this.showIntro();
            }

            startTimer() {
                this.timer.classList.remove('hidden');
                this.gameTimer = setInterval(() => {
                    this.timeElapsed++;
                    const minutes = Math.floor(this.timeElapsed / 60);
                    const seconds = this.timeElapsed % 60;
                    this.timer.textContent = `–í—Ä–µ–º—è: ${minutes}:${seconds.toString().padStart(2, '0')}`;
                }, 1000);
            }

            stopTimer() {
                if (this.gameTimer) {
                    clearInterval(this.gameTimer);
                    this.timer.classList.add('hidden');
                }
            }

            showIntro() {
                this.gameContent.innerHTML = `
                    <div style="padding: 15px;">
                        <div style="text-align: center; margin-bottom: 20px;">
                            <div class="japanese-text" style="font-size: 16px; color: var(--accent-pink); margin-bottom: 8px;">
                                <span class="japanese-symbol">ÂÆö</span>–°–ê–î–ê –ê–ë–≠
                            </div>
                            <div style="font-size: 12px; color: var(--text-secondary);">
                                –ö–∞–Ω–¥–∞, –¢–æ–∫–∏–æ ‚Ä¢ 1922 –≥–æ–¥
                            </div>
                            <div style="font-size: 11px; color: var(--text-secondary); margin-top: 4px;">
                                –°—Ç—Ä–∞—Å—Ç—å –Ω–µ –∑–Ω–∞–µ—Ç –≥—Ä–∞–Ω–∏—Ü
                            </div>
                        </div>

                        <div class="story-entry normal">
                            <div class="story-header">
                                <span>üë§ –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</span>
                                <span>–ö–û–ù–§–ò–î–ï–ù–¶–ò–ê–õ–¨–ù–û</span>
                            </div>
                            <div class="story-text">
                                <strong>–ò–º—è:</strong> –°–∞–¥–∞ –ê–±—ç, 17 –ª–µ—Ç<br>
                                <strong>–°–µ–º—å—è:</strong> –°—Ä–µ–¥–Ω–∏–π –∫–ª–∞—Å—Å, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–∏ —Ç–∞—Ç–∞–º–∏<br>
                                <strong>–°—Ç–∞—Ç—É—Å:</strong> –ú–ª–∞–¥—à–∞—è –∏–∑ 8 –¥–µ—Ç–µ–π<br><br>
                                –ú–µ—á—Ç–∞–µ—à—å —Å—Ç–∞—Ç—å –≥–µ–π—à–µ–π, –Ω–æ —Å–µ–º—å—è –ø—Ä–æ—Ç–∏–≤ —Ç–≤–æ–∏—Ö "–Ω–µ–ø–æ–¥—Ö–æ–¥—è—â–∏—Ö" —É–≤–ª–µ—á–µ–Ω–∏–π...
                            </div>
                        </div>

                        <div class="story-entry geisha">
                            <div class="story-header">
                                <span>üé≠ –ú–û–ú–ï–ù–¢ –í–´–ë–û–†–ê</span>
                                <span>1922</span>
                            </div>
                            <div class="story-text">
                                –û—Ç–µ—Ü –æ–±–Ω–∞—Ä—É–∂–∏–ª —Ç–≤–æ–∏ —É—Ä–æ–∫–∏ —Å—è–º–∏—Å—ç–Ω–∞ –∏ –º–∞–∫–∏—è–∂ –≤ —Å—Ç–∏–ª–µ –≥–µ–π—à.
                                <br><br>
                                <span style="color: var(--accent-purple);">
                                "–î–æ–≤–æ–ª—å–Ω–æ! –õ–∏–±–æ —Ç—ã –ø—Ä–µ–∫—Ä–∞—â–∞–µ—à—å —ç—Ç–∏ –≥–ª—É–ø–æ—Å—Ç–∏, –ª–∏–±–æ..."
                                </span>
                                <br><br>
                                –°–µ–º–µ–π–Ω—ã–π –∫–æ–Ω—Ñ–ª–∏–∫—Ç –¥–æ—Å—Ç–∏–≥ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π —Ç–æ—á–∫–∏.
                            </div>
                        </div>
                    </div>
                `;

                this.choicesContainer.innerHTML = '';
                this.addChoice('üé≠ –ù–∞—Å—Ç–æ—è—Ç—å –Ω–∞ —Å–≤–æ—ë–º –ø—É—Ç–∏ –≥–µ–π—à–∏', () => {
                    this.gameState.path = 'rebellion';
                    this.becomeGeisha();
                }, false, '–°–ª–µ–¥–æ–≤–∞—Ç—å –º–µ—á—Ç–µ');
                this.addChoice('üë®‚Äçüë©‚Äçüëß‚Äçüë¶ –ü–æ–¥—á–∏–Ω–∏—Ç—å—Å—è —Å–µ–º—å–µ', () => {
                    this.gameState.path = 'normal';
                    this.stayWithFamily();
                }, false, '–ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø—É—Ç—å');
                this.addChoice('üèÉ‚Äç‚ôÄÔ∏è –°–±–µ–∂–∞—Ç—å –∏–∑ –¥–æ–º–∞', () => {
                    this.gameState.path = 'escape';
                    this.runAway();
                }, true, '–û–ø–∞—Å–Ω—ã–π –≤—ã–±–æ—Ä');
            }

            becomeGeisha() {
                this.gameState.currentYear = 1922;
                this.startTimer();
                
                this.gameContent.innerHTML = `
                    <div style="padding: 15px;">
                        <div style="text-align: center; margin-bottom: 20px;">
                            <div style="font-size: 14px; color: var(--accent-purple);">
                                üé≠ –®–ö–û–õ–ê –ì–ï–ô–® –ò–û–ö–û–ì–ê–ú–´
                            </div>
                        </div>

                        <div class="story-entry geisha">
                            <div class="story-header">
                                <span>üé≠ –ù–æ–≤–∞—è –∂–∏–∑–Ω—å</span>
                                <span>–í–µ—Å–Ω–∞ 1922</span>
                            </div>
                            <div class="story-text">
                                –¢—ã –ø–æ—Å—Ç—É–ø–∏–ª–∞ –≤ —à–∫–æ–ª—É –≥–µ–π—à, –Ω–æ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å –æ–∫–∞–∑–∞–ª–∞—Å—å –∂–µ—Å—Ç–æ–∫–æ–π. 
                                –ù–∞—Å—Ç–æ—è—â–∏–µ –≥–µ–π—à–∏ —É—á–∞—Ç—Å—è —Å –¥–µ—Ç—Å—Ç–≤–∞, –∞ —Ç–µ–±–µ —É–∂–µ 17.
                                <br><br>
                                –¢—ã —Å—Ç–∞–Ω–æ–≤–∏—à—å—Å—è <em>–º–∞—Ç–∏–≥—ç–π—Å—è</em> - –∫–≤–∞–∑–∏–≥–µ–π—à–µ–π, —á—å–∏ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ 
                                –¥–∞–ª–µ–∫–∏ –æ—Ç –∏—Å–∫—É—Å—Å—Ç–≤–∞...
                            </div>
                        </div>

                        <div class="story-entry danger">
                            <div class="story-header">
                                <span>‚ö†Ô∏è –†–ï–ê–õ–¨–ù–û–°–¢–¨</span>
                                <span>1927</span>
                            </div>
                            <div class="story-text">
                                5 –ª–µ—Ç —Ç—è–∂—ë–ª–æ–π —Ä–∞–±–æ—Ç—ã. –¢—ã –∑–∞–±–æ–ª–µ–ª–∞ —Å–∏—Ñ–∏–ª–∏—Å–æ–º –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞.
                                <br><br>
                                <span style="color: var(--accent-red);">
                                –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –º–µ–¥–æ—Å–º–æ—Ç—Ä—ã, —É–Ω–∏–∂–µ–Ω–∏—è, –Ω–∏—â–µ—Ç–∞...
                                </span>
                                <br><br>
                                –ü–æ—Ä–∞ –º–µ–Ω—è—Ç—å –∂–∏–∑–Ω—å. –ù–æ –∫–∞–∫?
                            </div>
                        </div>
                    </div>
                `;

                this.choicesContainer.innerHTML = '';
                this.addChoice('üí∞ –°—Ç–∞—Ç—å –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –ø—Ä–æ—Å—Ç–∏—Ç—É—Ç–∫–æ–π', () => {
                    this.becomeProstitute();
                }, false, '–ë–æ–ª—å—à–µ –¥–µ–Ω–µ–≥, –±–æ–ª—å—à–µ –∫–æ–Ω—Ç—Ä–æ–ª—è');
                this.addChoice('‚òï –ù–∞–π—Ç–∏ —Ä–∞–±–æ—Ç—É –æ—Ñ–∏—Ü–∏–∞–Ω—Ç–∫–æ–π', () => {
                    this.becomeWaitress();
                }, false, '–ß–µ—Å—Ç–Ω–∞—è, –Ω–æ –Ω–∏–∑–∫–æ–æ–ø–ª–∞—á–∏–≤–∞–µ–º–∞—è —Ä–∞–±–æ—Ç–∞');
                this.addChoice('üíî –í–µ—Ä–Ω—É—Ç—å—Å—è –¥–æ–º–æ–π —Å –ø–æ–∑–æ—Ä–æ–º', () => {
                    this.returnHome();
                }, false, '–ü—Ä–∏–∑–Ω–∞—Ç—å –ø–æ—Ä–∞–∂–µ–Ω–∏–µ');
            }

            becomeProstitute() {
                this.gameState.currentYear = 1930;
                
                this.gameContent.innerHTML = `
                    <div style="padding: 15px;">
                        <div class="story-entry passion">
                            <div class="story-header">
                                <span>üåÉ –†–∞–π–æ–Ω –¢–æ–±–∏—Ç–∞, –û—Å–∞–∫–∞</span>
                                <span>1930</span>
                            </div>
                            <div class="story-text">
                                –¢—ã —Ä–∞–±–æ—Ç–∞–µ—à—å –≤ –∑–Ω–∞–º–µ–Ω–∏—Ç–æ–º —Ä–∞–π–æ–Ω–µ –∫—Ä–∞—Å–Ω—ã—Ö —Ñ–æ–Ω–∞—Ä–µ–π. 
                                –î–µ–Ω—å–≥–∏ –µ—Å—Ç—å, –Ω–æ —Ç—ã —Å—Ç–∞–ª–∞ "–ø—Ä–æ–±–ª–µ–º–Ω–æ–π –¥–µ–≤—É—à–∫–æ–π" - 
                                –≤–æ—Ä—É–µ—à—å —É –∫–ª–∏–µ–Ω—Ç–æ–≤, –ø—ã—Ç–∞–µ—à—å—Å—è —Å–±–µ–∂–∞—Ç—å.
                                <br><br>
                                –°–∏—Å—Ç–µ–º–∞ –ª–µ–≥–∞–ª—å–Ω–æ–π –ø—Ä–æ—Å—Ç–∏—Ç—É—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —á–∞—Å—ã - 
                                —Ç–µ–±—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ª–æ–≤—è—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç.
                            </div>
                        </div>

                        <div class="story-entry normal">
                            <div class="story-header">
                                <span>üí° –í–û–ó–ú–û–ñ–ù–û–°–¢–¨ –ü–û–ë–ï–ì–ê</span>
                                <span>1932</span>
                            </div>
                            <div class="story-text">
                                –ü–æ—Å–ª–µ –¥–≤—É—Ö –ª–µ—Ç –ø–æ–ø—ã—Ç–æ–∫ —Ç–µ–±–µ –Ω–∞–∫–æ–Ω–µ—Ü —É–¥–∞—ë—Ç—Å—è —Å–±–µ–∂–∞—Ç—å! 
                                –¢—ã —É—Å—Ç—Ä–∞–∏–≤–∞–µ—à—å—Å—è –æ—Ñ–∏—Ü–∏–∞–Ω—Ç–∫–æ–π –≤ –∫–∞—Ñ–µ, –Ω–æ –¥–æ—Ö–æ–¥—ã –º–∏–∑–µ—Ä–Ω—ã–µ...
                                <br><br>
                                –í—Å–∫–æ—Ä–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—à—å—Å—è –∫ —Å—Ç–∞—Ä–æ–º—É —Ä–µ–º–µ—Å–ª—É, –Ω–æ —Ç–µ–ø–µ—Ä—å –≤ –Ω–µ–ª–µ–≥–∞–ª—å–Ω–æ–º –±–æ—Ä–¥–µ–ª–µ.
                            </div>
                        </div>

                        <div class="story-entry system">
                            <div class="story-text">
                                1934 –≥–æ–¥: –£–º–∏—Ä–∞–µ—Ç –º–∞—Ç—å. –¢—ã –Ω–∞–≤–µ—â–∞–µ—à—å –º–æ–≥–∏–ª—É –∏ –±–æ–ª—å–Ω–æ–≥–æ –æ—Ç—Ü–∞...
                            </div>
                        </div>
                    </div>
                `;

                this.choicesContainer.innerHTML = '';
                this.addChoice('üí∏ –ù–∞–π—Ç–∏ –±–æ–≥–∞—Ç–æ–≥–æ –ø–æ–∫—Ä–æ–≤–∏—Ç–µ–ª—è', () => {
                    this.findPatron();
                }, false, '–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –∏ –¥–µ–Ω—å–≥–∏');
                this.addChoice('üéØ –ü—Ä–æ–¥–æ–ª–∂–∞—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º—É—é —Ä–∞–±–æ—Ç—É', () => {
                    this.stayIndependent();
                }, false, '–°–≤–æ–±–æ–¥–∞, –Ω–æ —Ä–∏—Å–∫');
            }

            findPatron() {
                this.gameContent.innerHTML = `
                    <div style="padding: 15px;">
                        <div class="story-entry passion">
                            <div class="story-header">
                                <span>üíé –ö–∏–Ω–Ω–æ—Å—É–∫—ç –ö–∞—Å–∞—Ö–∞—Ä–∞</span>
                                <span>–î–µ–∫–∞–±—Ä—å 1934</span>
                            </div>
                            <div class="story-text">
                                –í–ª–∏—è—Ç–µ–ª—å–Ω—ã–π –º—É–∂—á–∏–Ω–∞ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç —Ç–µ–±—è –∏–∑ –ø–æ–ª–∏—Ü–∏–∏ –∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø–æ–∫—Ä–æ–≤–∏—Ç–µ–ª–µ–º.
                                –û–Ω –ø–æ–∫—É–ø–∞–µ—Ç —Ç–µ–±–µ –¥–æ–º, –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –¥–µ–Ω—å–≥–∞–º–∏.
                                <br><br>
                                <em>"–û–Ω–∞ –±—ã–ª–∞ —Å–∏–ª—å–Ω–æ–π –∏ –≤–ª–∞—Å—Ç–Ω–æ–π... —Ç—Ä–µ–±–æ–≤–∞–ª–∞ –∑–∞–Ω–∏–º–∞—Ç—å—Å—è —ç—Ç–∏–º 
                                –¥–≤–∞–∂–¥—ã, —Ç—Ä–∏–∂–¥—ã, —á–µ—Ç—ã—Ä–µ–∂–¥—ã –∑–∞ –Ω–æ—á—å..."</em> - –≤—Å–ø–æ–º–∏–Ω–∞–µ—Ç –æ–Ω –ø–æ–∑–∂–µ.
                            </div>
                        </div>

                        <div class="story-entry danger">
                            <div class="story-header">
                                <span>üíî –ö–û–ù–§–õ–ò–ö–¢</span>
                                <span>1935</span>
                            </div>
                            <div class="story-text">
                                –¢—ã –ø—Ä–µ–¥–ª–∞–≥–∞–µ—à—å –µ–º—É –±—Ä–æ—Å–∏—Ç—å –∂–µ–Ω—É –∏ –∂–µ–Ω–∏—Ç—å—Å—è –Ω–∞ —Ç–µ–±–µ - –æ—Ç–∫–∞–∑.
                                <br>
                                –ü—Ä–æ—Å–∏—à—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∑–∞–≤–µ—Å—Ç–∏ –¥—Ä—É–≥–æ–≥–æ –ª—é–±–æ–≤–Ω–∏–∫–∞ - —Å–Ω–æ–≤–∞ –æ—Ç–∫–∞–∑.
                                <br><br>
                                <span style="color: var(--accent-red);">
                                "–û–Ω –Ω–µ –ª—é–±–∏–ª –º–µ–Ω—è –∏ –æ–±—Ä–∞—â–∞–ª—Å—è —Å–æ –º–Ω–æ–π, –∫–∞–∫ —Å –∂–∏–≤–æ—Ç–Ω—ã–º!"
                                </span>
                                <br><br>
                                –¢—ã —Å–±–µ–≥–∞–µ—à—å –≤ –ù–∞–≥–æ—é...
                            </div>
                        </div>
                    </div>
                `;

                this.choicesContainer.innerHTML = '';
                this.addChoice('üçΩÔ∏è –°—Ç–∞—Ç—å –æ—Ñ–∏—Ü–∏–∞–Ω—Ç–∫–æ–π –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–µ', () => {
                    this.workInRestaurant();
                }, false, '–ù–æ–≤–æ–µ –Ω–∞—á–∞–ª–æ');
                this.addChoice('üíî –ò—Å–∫–∞—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–∫—Ä–æ–≤–∏—Ç–µ–ª—è', () => {
                    this.findNewPatron();
                }, false, '–ü–æ–≤—Ç–æ—Ä–∏—Ç—å —Å—Ö–µ–º—É');
            }

            workInRestaurant() {
                this.gameState.loverMet = true;
                this.gameState.currentYear = 1936;
                
                this.gameContent.innerHTML = `
                    <div style="padding: 15px;">
                        <div class="story-entry normal">
                            <div class="story-header">
                                <span>üçΩÔ∏è –†–µ—Å—Ç–æ—Ä–∞–Ω "–Å—Å–∏–¥–∞-—è"</span>
                                <span>1 —Ñ–µ–≤—Ä–∞–ª—è 1936</span>
                            </div>
                            <div class="story-text">
                                –ü–æ—Å–ª–µ –ª–µ—á–µ–Ω–∏—è –æ—Ç —Å–∏—Ñ–∏–ª–∏—Å–∞ —Ç—ã —É—Å—Ç—Ä–∞–∏–≤–∞–µ—à—å—Å—è —Å—Ç–∞–∂—ë—Ä–æ–º –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω –≤ –¢–æ–∫–∏–æ.
                                <br><br>
                                –í–ª–∞–¥–µ–ª–µ—Ü - –ö–∏—Ç–∏–¥–∑–æ –ò—Å–∏–¥–∞, 42 –≥–æ–¥–∞. –ò–∑–≤–µ—Å—Ç–Ω—ã–π –¥–∞–º—Å–∫–∏–π —É–≥–æ–¥–Ω–∏–∫, 
                                –∫–æ—Ç–æ—Ä—ã–π –ø–æ—á—Ç–∏ –Ω–µ –∑–∞–Ω–∏–º–∞–µ—Ç—Å—è —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–º. –í—Å–µ–º –∑–∞–ø—Ä–∞–≤–ª—è–µ—Ç –µ–≥–æ –∂–µ–Ω–∞.
                            </div>
                        </div>

                        <div class="story-entry passion">
                            <div class="story-header">
                                <span>üíï –†–û–ö–û–í–ê–Ø –í–°–¢–†–ï–ß–ê</span>
                                <span>–ê–ø—Ä–µ–ª—å 1936</span>
                            </div>
                            <div class="story-text">
                                –ò—Å–∏–¥–∞ –æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–±–µ –∑–Ω–∞–∫–∏ –≤–Ω–∏–º–∞–Ω–∏—è. –¢–≤–æ–π –Ω—ã–Ω–µ—à–Ω–∏–π –ø–æ–∫—Ä–æ–≤–∏—Ç–µ–ª—å –û–º–∏—è 
                                –Ω–µ —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è–µ—Ç —Ç–µ–±—è –≤ –ø–æ—Å—Ç–µ–ª–∏...
                                <br><br>
                                –¢—ã –æ—Ç–¥–∞—ë—à—å—Å—è –ò—Å–∏–¥–µ –ø—Ä—è–º–æ –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–µ –ø–æ–¥ —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫—É—é –º—É–∑—ã–∫—É –≥–µ–π—à–∏.
                                <br><br>
                                <span style="color: var(--accent-pink);">
                                "–¢—Ä—É–¥–Ω–æ –æ–±—ä—è—Å–Ω–∏—Ç—å, —á—Ç–æ –±—ã–ª–æ —Å—Ç–æ–ª—å –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–º –≤ –ò—Å–∏–¥–µ... 
                                –Ø –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –≤—Å—Ç—Ä–µ—á–∞–ª–∞ —Ç–∞–∫–æ–≥–æ —Å–µ–∫—Å—É–∞–ª—å–Ω–æ–≥–æ –º—É–∂—á–∏–Ω—É."
                                </span>
                            </div>
                        </div>
                    </div>
                `;

                this.choicesContainer.innerHTML = '';
                this.addChoice('üè© –£–µ—Ö–∞—Ç—å —Å –Ω–∏–º –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π', () => {
                    this.passionateEscape();
                }, true, '–°—Ç—Ä–∞—Å—Ç–Ω–æ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ');
                this.addChoice('‚öñÔ∏è –ü–æ–ø—ã—Ç–∞—Ç—å—Å—è —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å', () => {
                    this.tryBalance();
                }, false, '–û—Å—Ç–æ—Ä–æ–∂–Ω—ã–π –ø–æ–¥—Ö–æ–¥');
                this.addChoice('üíî –ü—Ä–µ–∫—Ä–∞—Ç–∏—Ç—å –æ—Ç–Ω–æ—à–µ–Ω–∏—è', () => {
                    this.endAffair();
                }, false, '–†–∞–∑—É–º–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ');
            }

            passionateEscape() {
                this.gameState.passionLevel = 5;
                this.startTimer();
                
                this.gameContent.innerHTML = `
                    <div style="padding: 15px;">
                        <div class="story-entry passion">
                            <div class="story-header">
                                <span>üè© –ß–∞–π–Ω—ã–π –¥–æ–º–∏–∫ –≤ –°–∏–±—É—è</span>
                                <span>23 –∞–ø—Ä–µ–ª—è 1936</span>
                            </div>
                            <div class="story-text">
                                –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–≤ –∫–æ—Ä–æ—Ç–∫–æ–µ —Å–≤–∏–¥–∞–Ω–∏–µ, –≤—ã –ø—Ä–æ–≤–æ–¥–∏—Ç–µ –≤ –ø–æ—Å—Ç–µ–ª–∏ —á–µ—Ç—ã—Ä–µ –¥–Ω—è.
                                <br><br>
                                –ó–∞—Ç–µ–º –ø–µ—Ä–µ–µ–∑–∂–∞–µ—Ç–µ –≤ –§—É—Ç–∞–∫–æ-–¢–∞–º–∞–≥–∞–≤–∞, –ø–æ—Ç–æ–º –≤ –û–≥—É...
                                <br><br>
                                –í—ã –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç–µ—Å—å –¥–∞–∂–µ –∫–æ–≥–¥–∞ –≤ –∫–æ–º–Ω–∞—Ç—É –∑–∞—Ö–æ–¥—è—Ç —Å–ª—É–∂–∞–Ω–∫–∏.
                                –ò—Å–∏–¥–∞ –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–µ –¥–æ 8 –º–∞—è.
                            </div>
                        </div>

                        <div class="story-entry danger">
                            <div class="story-header">
                                <span>üíî –†–ê–ó–†–´–í</span>
                                <span>8 –º–∞—è 1936</span>
                            </div>
                            <div class="story-text">
                                –ò—Å–∏–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫ –∂–µ–Ω–µ. –¢—ã –≤–ø–∞–¥–∞–µ—à—å –≤ –¥–µ–ø—Ä–µ—Å—Å–∏—é, –º–Ω–æ–≥–æ –ø—å—ë—à—å.
                                <br><br>
                                <span style="color: var(--accent-red);">
                                –ú—ã—Å–ª—å –æ —Ç–æ–º, —á—Ç–æ –æ–Ω —Å –¥—Ä—É–≥–æ–π, —Å–≤–æ–¥–∏—Ç —Ç–µ–±—è —Å —É–º–∞ –æ—Ç —Ä–µ–≤–Ω–æ—Å—Ç–∏.
                                </span>
                                <br><br>
                                9 –º–∞—è —Ç—ã –≤–∏–¥–∏—à—å —Å–ø–µ–∫—Ç–∞–∫–ª—å, –≥–¥–µ –≥–µ–π—à–∞ –Ω–∞–ø–∞–¥–∞–µ—Ç –Ω–∞ –ª—é–±–æ–≤–Ω–∏–∫–∞ —Å –Ω–æ–∂–æ–º...
                            </div>
                        </div>
                    </div>
                `;

                this.choicesContainer.innerHTML = '';
                this.addChoice('üî™ –ö—É–ø–∏—Ç—å –Ω–æ–∂ –∏ –ø—Ä–∏–≥—Ä–æ–∑–∏—Ç—å –µ–º—É', () => {
                    this.buyKnife();
                }, true, '–û–ü–ê–°–ù–û!');
                this.addChoice('üíå –ù–∞–ø–∏—Å–∞—Ç—å –ª—é–±–æ–≤–Ω–æ–µ –ø–∏—Å—å–º–æ', () => {
                    this.writeLetter();
                }, false, '–ü–æ–ø—ã—Ç–∞—Ç—å—Å—è –≤–µ—Ä–Ω—É—Ç—å');
                this.addChoice('üç∫ –ó–∞–±—ã—Ç—å—Å—è –≤ –∞–ª–∫–æ–≥–æ–ª–µ', () => {
                    this.drinkAway();
                }, false, '–ó–∞–≥–ª—É—à–∏—Ç—å –±–æ–ª—å');
            }

            buyKnife() {
                this.gameState.tragedyCommitted = true;
                
                this.gameContent.innerHTML = `
                    <div style="padding: 15px;">
                        <div class="story-entry danger">
                            <div class="story-header">
                                <span>üî™ 11 –º–∞—è 1936</span>
                                <span>–†–û–ö–û–í–û–ï –†–ï–®–ï–ù–ò–ï</span>
                            </div>
                            <div class="story-text">
                                –¢—ã –ø—Ä–æ–¥–∞—ë—à—å –æ–¥–µ–∂–¥—É –∏ –ø–æ–∫—É–ø–∞–µ—à—å –∫—É—Ö–æ–Ω–Ω—ã–π –Ω–æ–∂.
                                <br><br>
                                –í—Å—Ç—Ä–µ—á–∞–µ—à—å—Å—è —Å –ò—Å–∏–¥–æ–π –∏ —É–≥—Ä–æ–∂–∞–µ—à—å –µ–º—É, –∫–∞–∫ –≤ —Ç–æ–º —Å–ø–µ–∫—Ç–∞–∫–ª–µ:
                                <br><br>
                                <em>"–ö–∏—Ç–∏, —Ç—ã –Ω–∞–¥–µ–≤–∞–ª —ç—Ç–æ –∫–∏–º–æ–Ω–æ –¥–ª—è —Å–≤–æ–µ–π –ª—é–±–∏–º–æ–π –∫–ª–∏–µ–Ω—Ç–∫–∏. 
                                –Ø —É–±—å—é —Ç–µ–±—è –∑–∞ —ç—Ç–æ!"</em>
                                <br><br>
                                –û–Ω –æ–ø–µ—à–∏–ª, –Ω–æ... –µ–º—É —ç—Ç–æ —è–≤–Ω–æ –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å.
                            </div>
                        </div>

                        <div class="story-entry passion">
                            <div class="story-header">
                                <span>üî• –û–ü–ê–°–ù–´–ï –ò–ì–†–´</span>
                                <span>16 –º–∞—è 1936</span>
                            </div>
                            <div class="story-text">
                                –í—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç–µ—Å—å –≤ –û–≥—É. –í–æ –≤—Ä–µ–º—è –±–ª–∏–∑–æ—Å—Ç–∏ —Ç—ã –ø–æ–¥–Ω–æ—Å–∏—à—å –Ω–æ–∂ 
                                –∫ –µ–≥–æ –ø–µ–Ω–∏—Å—É: "–°–¥–µ–ª–∞—é —Ç–∞–∫, —á—Ç–æ–±—ã —Ç—ã –Ω–µ –≤—Å—Ç—Ä–µ—á–∞–ª—Å—è —Å –¥—Ä—É–≥–∏–º–∏!"
                                <br><br>
                                –û–Ω —Å–º–µ—ë—Ç—Å—è. –¢—ã –Ω–∞—á–∏–Ω–∞–µ—à—å –¥—É—à–∏—Ç—å –µ–≥–æ –ø–æ—è—Å–æ–º - –µ–º—É –Ω—Ä–∞–≤–∏—Ç—Å—è.
                                –û–Ω –ø—Ä–æ—Å–∏—Ç –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å...
                            </div>
                        </div>
                    </div>
                `;

                this.choicesContainer.innerHTML = '';
                this.addChoice('‚ö∞Ô∏è 18 –º–∞—è - —Ä–æ–∫–æ–≤–∞—è –Ω–æ—á—å', () => {
                    this.fatalNight();
                }, true, '–ü—É—Ç—å –∫ —Ç—Ä–∞–≥–µ–¥–∏–∏');
                this.addChoice('üõë –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –∏ —É–π—Ç–∏', () => {
                    this.stopAndLeave();
                }, false, '–ü–æ—Å–ª–µ–¥–Ω–∏–π —à–∞–Ω—Å');
            }

            fatalNight() {
                this.stopTimer();
                
                this.gameContent.innerHTML = `
                    <div style="padding: 15px;">
                        <div class="story-entry danger">
                            <div class="story-header">
                                <span>‚ö∞Ô∏è 18 –º–∞—è 1936, 2:00</span>
                                <span>–¢–†–ê–ì–ï–î–ò–Ø</span>
                            </div>
                            <div class="story-text">
                                –ò—Å–∏–¥–∞ –ø—Ä–∏–Ω—è–ª 30 —Ç–∞–±–ª–µ—Ç–æ–∫ —É—Å–ø–æ–∫–æ–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∏ –∑–∞—Å–Ω—É–ª.
                                <br><br>
                                –ï–≥–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–ª–æ–≤–∞: <em>"–û–±–º–æ—Ç–∞–π –ø–æ—è—Å –≤–æ–∫—Ä—É–≥ –º–æ–µ–π —à–µ–∏ 
                                –∏ –∑–∞—Ç—è–Ω–∏ –µ–≥–æ, –∫–æ–≥–¥–∞ —è –±—É–¥—É —Å–ø–∞—Ç—å... –ï—Å–ª–∏ –Ω–∞—á–Ω—ë—à—å –¥—É—à–∏—Ç—å, 
                                —Ç–æ –Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Å—è, –ø–æ—Ç–æ–º—É —á—Ç–æ –ø–æ—Ç–æ–º –æ—á–µ–Ω—å –±–æ–ª—å–Ω–æ."</em>
                                <br><br>
                                <span style="color: var(--accent-red);">
                                –¢—ã –∑–∞–¥—É—à–∏–ª–∞ –µ–≥–æ –Ω–∞—Å–º–µ—Ä—Ç—å.
                                </span>
                            </div>
                        </div>

                        <div class="story-entry system">
                            <div class="story-header">
                                <span>ü©∏ –ü–û–°–õ–ï</span>
                                <span>18-20 –º–∞—è</span>
                            </div>
                            <div class="story-text">
                                <em>"–ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ —è —É–±–∏–ª–∞ –ò—Å–∏–¥—É, —è –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–ª–∞ –æ–±–ª–µ–≥—á–µ–Ω–∏–µ, 
                                –∫–∞–∫ –µ—Å–ª–∏ –±—ã –Ω–µ–ø–æ—Å–∏–ª—å–Ω—ã–π –≥—Ä—É–∑ –±—ã–ª —Å–Ω—è—Ç —Å –º–æ–∏—Ö –ø–ª–µ—á."</em>
                                <br><br>
                                –¢—ã –æ—Ç—Ä–µ–∑–∞–ª–∞ –µ–≥–æ –≥–µ–Ω–∏—Ç–∞–ª–∏–∏, –Ω–∞–ø–∏—Å–∞–ª–∞ –∫—Ä–æ–≤—å—é –Ω–∞ –ø—Ä–æ—Å—Ç—ã–Ω—è—Ö 
                                "–°–∞–¥–∞ –∏ –ö–∏—Ç–∏ –≤–º–µ—Å—Ç–µ", –Ω–∞—Ü–∞—Ä–∞–ø–∞–ª–∞ —Å–≤–æ—ë –∏–º—è –Ω–∞ –µ–≥–æ —Ä—É–∫–µ...
                                <br><br>
                                –¢—Ä–∏ –¥–Ω—è —Ç—ã –Ω–æ—Å–∏–ª–∞ –∏—Ö —Å —Å–æ–±–æ–π, –ø–æ–∫–∞ –ø–æ–ª–∏—Ü–∏—è –Ω–µ –∞—Ä–µ—Å—Ç–æ–≤–∞–ª–∞ —Ç–µ–±—è 20 –º–∞—è.
                            </div>
                        </div>
                    </div>
                `;

                this.choicesContainer.innerHTML = '';
                this.addChoice('‚öñÔ∏è –£–≤–∏–¥–µ—Ç—å —Å—É–¥ –∏ –ø—Ä–∏–≥–æ–≤–æ—Ä', () => {
                    this.showTrial();
                });
                this.addChoice('üì∞ –£–∑–Ω–∞—Ç—å –æ —Ä–µ–∞–∫—Ü–∏–∏ –æ–±—â–µ—Å—Ç–≤–∞', () => {
                    this.showReaction();
                });
            }

            showTrial() {
                this.gameContent.innerHTML = `
                    <div style="padding: 15px;">
                        <div style="text-align: center; margin-bottom: 20px;">
                            <div style="font-size: 16px; color: var(--accent-red);">
                                ‚öñÔ∏è –°–£–î –ò –ù–ê–°–õ–ï–î–ò–ï
                            </div>
                        </div>

                        <div class="story-entry system">
                            <div class="story-header">
                                <span>‚öñÔ∏è –ü—Ä–∏–≥–æ–≤–æ—Ä</span>
                                <span>21 –¥–µ–∫–∞–±—Ä—è 1936</span>
                            </div>
                            <div class="story-text">
                                <strong>–û–±–≤–∏–Ω–µ–Ω–∏–µ:</strong> –£–±–∏–π—Å—Ç–≤–æ –≤—Ç–æ—Ä–æ–π —Å—Ç–µ–ø–µ–Ω–∏ –∏ —Ä–∞—Å—á–ª–µ–Ω–µ–Ω–∏–µ —Ç—Ä—É–ø–∞<br>
                                <strong>–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∫—É—Ä–æ—Ä–∞:</strong> 10 –ª–µ—Ç<br>
                                <strong>–¢–≤–æ—è –ø—Ä–æ—Å—å–±–∞:</strong> –°–º–µ—Ä—Ç–Ω–∞—è –∫–∞–∑–Ω—å<br>
                                <strong>–ü—Ä–∏–≥–æ–≤–æ—Ä:</strong> 6 –ª–µ—Ç —Ç—é—Ä—å–º—ã<br><br>
                                –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∞ –¥–æ—Å—Ä–æ—á–Ω–æ 15 –º–∞—è 1941 –≥–æ–¥–∞ –ø–æ –∞–º–Ω–∏—Å—Ç–∏–∏.
                            </div>
                        </div>

                        <div class="story-entry normal">
                            <div class="story-header">
                                <span>üìö –ö–£–õ–¨–¢–£–†–ù–û–ï –í–õ–ò–Ø–ù–ò–ï</span>
                                <span>1936-2025</span>
                            </div>
                            <div class="story-text">
                                –¢–≤–æ—è –∏—Å—Ç–æ—Ä–∏—è —Å—Ç–∞–ª–∞ –Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π —Å–µ–Ω—Å–∞—Ü–∏–µ–π –≤ –Ø–ø–æ–Ω–∏–∏.
                                <br><br>
                                ‚Ä¢ –ú–Ω–æ–∂–µ—Å—Ç–≤–æ —Ñ–∏–ª—å–º–æ–≤ (–≤–∫–ª—é—á–∞—è "–ò–º–ø–µ—Ä–∏—é —á—É–≤—Å—Ç–≤" –û—Å–∏–º—ã)<br>
                                ‚Ä¢ –õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω—ã–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è<br>
                                ‚Ä¢ –°–∏–º–≤–æ–ª –æ–ø–∞—Å–Ω–æ–π –∂–µ–Ω—Å–∫–æ–π —Å–µ–∫—Å—É–∞–ª—å–Ω–æ—Å—Ç–∏<br>
                                ‚Ä¢ –ö—Ä–∏—Ç–∏–∫–∞ –ø–∞—Ç—Ä–∏–∞—Ä—Ö–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã<br><br>
                                <span style="color: var(--text-primary);">
                                –¢—ã —Å—Ç–∞–ª–∞ –ª–µ–≥–µ–Ω–¥–æ–π, –∫–æ—Ç–æ—Ä–∞—è –∂–∏–≤—ë—Ç –¥–æ —Å–∏—Ö –ø–æ—Ä.
                                </span>
                            </div>
                        </div>
                    </div>
                `;

                this.choicesContainer.innerHTML = '';
                this.addChoice('üîÑ –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π –ø—É—Ç—å', () => {
                    location.reload();
                });
                this.addChoice('üì± –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –∏—Å—Ç–æ—Ä–∏–µ–π', () => {
                    if (tg) {
                        tg.switchInlineQuery('–ü—Ä–æ—à—ë–ª –ø—É—Ç—å –°–∞–¥—ã –ê–±—ç - –ª–µ–≥–µ–Ω–¥—ã —Å—Ç—Ä–∞—Å—Ç–∏ –∏ —Ç—Ä–∞–≥–µ–¥–∏–∏ üíî');
                    }
                });
            }

            stopAndLeave() {
                this.gameContent.innerHTML = `
                    <div style="padding: 15px;">
                        <div style="text-align: center; margin-bottom: 20px;">
                            <div style="font-size: 16px; color: var(--text-primary);">
                                ‚úì –ú–£–î–†–û–ï –†–ï–®–ï–ù–ò–ï
                            </div>
                        </div>

                        <div class="story-entry normal">
                            <div class="story-text">
                                –¢—ã –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—à—å—Å—è –Ω–∞ –≥—Ä–∞–Ω–∏ –ø—Ä–æ–ø–∞—Å—Ç–∏. 
                                –ü–æ–Ω–∏–º–∞–µ—à—å, —á—Ç–æ –∏–≥—Ä—ã —Å –∂–∏–∑–Ω—å—é –∏ —Å–º–µ—Ä—Ç—å—é –∑–∞—à–ª–∏ —Å–ª–∏—à–∫–æ–º –¥–∞–ª–µ–∫–æ.
                                <br><br>
                                –¢—ã –ø–æ–∫–∏–¥–∞–µ—à—å –ò—Å–∏–¥—É –∏ –Ω–∞—á–∏–Ω–∞–µ—à—å –Ω–æ–≤—É—é –∂–∏–∑–Ω—å. 
                                –ë–æ–ª—å –æ—Ç —Ä–∞–∑—Ä—ã–≤–∞ –≤–µ–ª–∏–∫–∞, –Ω–æ —Ç—ã –Ω–∞—Ö–æ–¥–∏—à—å —Å–∏–ª—ã –¥–≤–∏–≥–∞—Ç—å—Å—è –¥–∞–ª—å—à–µ.
                                <br><br>
                                <span style="color: var(--text-primary);">
                                –ò—Å—Ç–æ—Ä–∏—è –º–æ–≥–ª–∞ –±—ã—Ç—å —Å–æ–≤—Å–µ–º –∏–Ω–æ–π, –µ—Å–ª–∏ –±—ã —Å—Ç—Ä–∞—Å—Ç—å –Ω–µ –∑–∞—Ç–º–∏–ª–∞ —Ä–∞–∑—É–º.
                                </span>
                            </div>
                        </div>

                        <div class="story-entry system">
                            <div class="story-text">
                                <strong>–ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–ù–ê–Ø –ò–°–¢–û–†–ò–Ø:</strong><br>
                                –í —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ –°–∞–¥–∞ —É–±–∏–ª–∞ –ò—Å–∏–¥—É –∏ —Å—Ç–∞–ª–∞ –ª–µ–≥–µ–Ω–¥–æ–π. 
                                –¢–≤–æ–π –≤—ã–±–æ—Ä –∏–∑–º–µ–Ω–∏–ª —Å—É–¥—å–±—É.
                            </div>
                        </div>
                    </div>
                `;

                this.choicesContainer.innerHTML = '';
                this.addChoice('üîÑ –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π —Å—Ü–µ–Ω–∞—Ä–∏–π', () => {
                    location.reload();
                });
            }

            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–µ—Ç–∫–∏ —Ä–∞–∑–≤–∏—Ç–∏—è —Å—é–∂–µ—Ç–∞

            stayWithFamily() {
                this.gameContent.innerHTML = `
                    <div style="padding: 15px;">
                        <div class="story-entry normal">
                            <div class="story-text">
                                –¢—ã –ø–æ–¥—á–∏–Ω—è–µ—à—å—Å—è –≤–æ–ª–µ —Å–µ–º—å–∏ –∏ –æ—Ç–∫–∞–∑—ã–≤–∞–µ—à—å—Å—è –æ—Ç –º–µ—á—Ç—ã —Å—Ç–∞—Ç—å –≥–µ–π—à–µ–π.
                                <br><br>
                                –ñ–∏–≤—ë—à—å –æ–±—ã—á–Ω–æ–π –∂–∏–∑–Ω—å—é –¥–æ—á–µ—Ä–∏ –∏–∑ —Å—Ä–µ–¥–Ω–µ–≥–æ –∫–ª–∞—Å—Å–∞, 
                                –Ω–æ –º–µ—á—Ç—ã –æ —Å–≤–æ–±–æ–¥–µ –∏ —Å—Ç—Ä–∞—Å—Ç–∏ –Ω–µ –ø–æ–∫–∏–¥–∞—é—Ç —Ç–µ–±—è...
                                <br><br>
                                <span style="color: var(--text-secondary);">
                                –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π, –Ω–æ —Å–∫—É—á–Ω—ã–π –ø—É—Ç—å. –ò—Å—Ç–æ—Ä–∏—è –Ω–µ –∑–Ω–∞–µ—Ç —Ç–≤–æ–µ–≥–æ –∏–º–µ–Ω–∏.
                                </span>
                            </div>
                        </div>
                    </div>
                `;

                this.choicesContainer.innerHTML = '';
                this.addChoice('üîÑ –ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ', () => {
                    location.reload();
                });
            }

            runAway() {
                this.gameContent.innerHTML = `
                    <div style="padding: 15px;">
                        <div class="story-entry danger">
                            <div class="story-text">
                                –¢—ã —Å–±–µ–≥–∞–µ—à—å –∏–∑ –¥–æ–º–∞ –≤ 17 –ª–µ—Ç –±–µ–∑ –¥–µ–Ω–µ–≥ –∏ —Å–≤—è–∑–µ–π.
                                <br><br>
                                –ñ–∏–∑–Ω—å –Ω–∞ —É–ª–∏—Ü–µ –∂–µ—Å—Ç–æ–∫–∞. –¢—ã –±—ã—Å—Ç—Ä–æ —Å–∫–∞—Ç—ã–≤–∞–µ—à—å—Å—è –≤ –∫—Ä–∏–º–∏–Ω–∞–ª—å–Ω—ã–π –º–∏—Ä,
                                –Ω–æ —Ç–∞–∫ –∏ –Ω–µ –Ω–∞—Ö–æ–¥–∏—à—å —Å–≤–æ–µ–≥–æ –ø—É—Ç–∏...
                                <br><br>
                                <span style="color: var(--accent-red);">
                                –°–≤–æ–±–æ–¥–∞ –±–µ–∑ –ø–ª–∞–Ω–∞ –≤–µ–¥—ë—Ç –∫ —Ä–∞–∑—Ä—É—à–µ–Ω–∏—é.
                                </span>
                            </div>
                        </div>
                    </div>
                `;

                this.choicesContainer.innerHTML = '';
                this.addChoice('üîÑ –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞', () => {
                    location.reload();
                });
            }

            addChoice(text, callback, dangerous = false, description = '') {
                const button = document.createElement('button');
                button.className = `choice-button ${dangerous ? 'dangerous' : ''}`;
                button.innerHTML = `
                    ${text}
                    ${description ? `<div style="font-size: 10px; opacity: 0.7; margin-top: 4px;">${description}</div>` : ''}
                `;
                button.onclick = callback;
                this.choicesContainer.appendChild(button);
            }
        }

        let game;
        document.addEventListener('DOMContentLoaded', () => {
            game = new SadaAbeGame();
        });

        // –ì–ª–∏—Ç—á —ç—Ñ—Ñ–µ–∫—Ç—ã
        setInterval(() => {
            if (Math.random() < 0.02) {
                document.body.style.filter = `hue-rotate(${Math.random() * 360}deg) saturate(${1 + Math.random()})`;
                setTimeout(() => { document.body.style.filter = 'none'; }, 100);
            }
        }, 3000);
    </script>
</body>
</html>

