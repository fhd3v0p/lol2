<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–ï–†–¢–í–ê–Ø –°–¢–£–î–ò–Ø | Ê≠ªÈúäË®òÊÜ∂ glitch memories</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Share Tech Mono', monospace;
            background: #000;
            color: #ff0096;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Cyberpunk scanlines effect */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                repeating-linear-gradient(
                    0deg,
                    transparent,
                    transparent 2px,
                    rgba(255, 0, 150, 0.03) 2px,
                    rgba(255, 0, 150, 0.03) 4px
                );
            pointer-events: none;
            z-index: 1000;
            animation: scanlines 0.1s linear infinite;
        }
        
        @keyframes scanlines {
            0% { transform: translateY(0); }
            100% { transform: translateY(4px); }
        }
        
        .phone-container {
            max-width: 320px;
            margin: 20px auto;
            background: #111;
            border: 2px solid #333;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 0 30px rgba(255, 0, 150, 0.3);
            position: relative;
        }

        .phone-header {
            background: #1a1a1a;
            padding: 10px;
            text-align: center;
            border-bottom: 1px solid #333;
            font-size: 10px;
        }
        
        .phone-screen {
            background: #000;
            min-height: 500px;
            padding: 15px;
            position: relative;
        }
        
        .boot-screen {
            text-align: center;
            padding: 40px 20px;
        }

        .htc-logo {
            font-size: 24px;
            color: #ff0096;
            margin-bottom: 20px;
            text-shadow: 0 0 10px #ff0096;
            animation: cyber-glow 2s ease-in-out infinite alternate;
        }
        
        @keyframes cyber-glow {
            0% { text-shadow: 0 0 10px #ff0096; }
            100% { text-shadow: 0 0 20px #ff0096, 0 0 30px #ff0096; }
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: #222;
            border: 1px solid #444;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff0096, #ff4fc7);
            width: 0%;
            transition: width 2s ease-in-out;
            box-shadow: 0 0 10px #ff0096;
        }
        
        .desktop {
            display: none;
        }
        
        .desktop-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .app-icon {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 15px 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .app-icon:hover {
            background: #2a2a2a;
            border-color: #ff0096;
            box-shadow: 0 0 15px rgba(255, 0, 150, 0.5);
        }
        
        .app-icon.disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .app-emoji {
            font-size: 24px;
            margin-bottom: 5px;
            display: block;
        }
        
        .app-name {
            font-size: 10px;
            color: #888;
        }
        
        .badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ff4444;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 8px;
            font-weight: bold;
        }
        
        .badge.new {
            background: #ff0096;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.7; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .content-screen {
            display: none;
        }
        
        .content-header {
            background: #1a1a1a;
            padding: 10px;
            border-bottom: 1px solid #333;
            margin: -15px -15px 15px -15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .back-btn {
            background: none;
            border: none;
            color: #ff0096;
            cursor: pointer;
            font-size: 16px;
        }
        
        .message {
            background: #1a1a1a;
            margin: 10px 0;
            padding: 10px;
            border-radius: 8px;
            border-left: 3px solid #ff0096;
            position: relative;
        }
        
        .message.system {
            border-left-color: #ff6b6b;
            background: #2a1a1a;
        }
        
        .message.corrupted {
            border-left-color: #ff4444;
            background: #1a0000;
            animation: glitch 0.5s infinite alternate;
        }
        
        @keyframes glitch {
            0% { transform: translateX(0); filter: hue-rotate(0deg); }
            25% { transform: translateX(-2px); filter: hue-rotate(90deg); }
            50% { transform: translateX(2px); filter: hue-rotate(180deg); }
            75% { transform: translateX(-1px); filter: hue-rotate(270deg); }
            100% { transform: translateX(1px); filter: hue-rotate(360deg); }
        }
        
        .message-header {
            font-size: 10px;
            color: #888;
            margin-bottom: 5px;
        }
        
        .message-content {
            font-size: 12px;
            line-height: 1.4;
        }
        
        .choice-btn {
            display: block;
            width: 100%;
            background: #1a1a1a;
            border: 1px solid #333;
            color: #ff0096;
            padding: 12px;
            margin: 8px 0;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: inherit;
            font-size: 11px;
        }
        
        .choice-btn:hover {
            background: #2a2a2a;
            border-color: #ff0096;
            box-shadow: 0 0 10px rgba(255, 0, 150, 0.3);
        }
        
        .horror-meter {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 10px;
            font-size: 10px;
            z-index: 100;
        }
        
        .horror-bar {
            width: 100px;
            height: 8px;
            background: #222;
            border: 1px solid #444;
            margin-top: 5px;
            overflow: hidden;
        }
        
        .horror-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff0096, #ff6b6b, #ff4444);
            width: 0%;
            transition: width 1s ease;
        }
        
        /* Japanese symbols styling */
        .japanese-symbol {
            color: #ff0096;
            font-size: 16px;
            text-shadow: 0 0 10px #ff0096;
            font-weight: bold;
        }
        
        /* Anime-inspired glitch effects */
        .anime-glitch {
            animation: anime-distortion 2s infinite;
        }
        
        @keyframes anime-distortion {
            0% { filter: hue-rotate(0deg) saturate(1); }
            25% { filter: hue-rotate(90deg) saturate(1.5); }
            50% { filter: hue-rotate(180deg) saturate(0.8); }
            75% { filter: hue-rotate(270deg) saturate(1.2); }
            100% { filter: hue-rotate(360deg) saturate(1); }
        }
        
        /* Evidence and investigation styling */
        .evidence-card {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .evidence-card:hover {
            border-color: #ff0096;
            box-shadow: 0 0 15px rgba(255, 0, 150, 0.3);
        }
        
        .evidence-title {
            color: #ff0096;
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .evidence-content {
            font-size: 11px;
            color: #ccc;
            line-height: 1.4;
        }

        /* Course integration styles */
        .course-hint {
            background: linear-gradient(135deg, #2a1a1a, #1a2a1a);
            border: 1px solid #ff0096;
            border-radius: 8px;
            padding: 12px;
            margin: 15px 0;
            font-size: 11px;
            color: #ccc;
        }
        
        .course-hint-title {
            color: #ff0096;
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .hidden-scroll {
            background: #0a0a0a;
            border: 1px solid #ff6b6b;
            border-radius: 6px;
            padding: 10px;
            margin: 10px 0;
            font-size: 10px;
            font-style: italic;
            color: #ff6b6b;
        }
        
        /* Tattoo Academy styles */
        .course-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-top: 15px;
        }
        
        .course-card {
            background: linear-gradient(135deg, #1a1a1a, #2a2a2a);
            border: 1px solid #333;
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .course-card:hover {
            border-color: #ff0096;
            box-shadow: 0 0 20px rgba(255, 0, 150, 0.3);
            transform: translateY(-2px);
        }
        
        .course-title {
            font-size: 14px;
            color: #ff0096;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .course-price {
            text-align: right;
        }
        
        .price-old {
            font-size: 10px;
            color: #666;
            text-decoration: line-through;
        }
        
        .price-new {
            font-size: 14px;
            color: #ff6b6b;
            font-weight: bold;
        }
        
        .promo-code {
            background: #2a1a1a;
            border: 1px solid #ff6b6b;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
        }
        
        .promo-highlight {
            background: #ff4444;
            color: white;
            padding: 8px 15px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
            letter-spacing: 2px;
        }
        
        .pay-button {
            width: 100%;
            background: linear-gradient(135deg, #ff0096, #ff4fc7);
            color: #000;
            border: none;
            padding: 15px;
            border-radius: 8px;
            font-family: inherit;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }
        
        .pay-button:hover {
            background: linear-gradient(135deg, #e6008a, #ff0096);
            box-shadow: 0 0 20px rgba(255, 0, 150, 0.5);
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <div class="horror-meter">
        <div>ÊÅêÊÄñ„É¨„Éô„É´</div>
        <div class="horror-bar">
            <div class="horror-fill" id="horrorFill"></div>
        </div>
    </div>

    <div class="phone-container">
            <div class="phone-header">
            <span style="color: #ff0096;">‚óè</span> NeoTokyo System | 
            <span style="color: #888;">02:47</span> | 
            <span style="color: #ff6b6b;">üîã 18%</span>
                </div>
        
        <div class="phone-screen">
            <!-- Boot Screen -->
            <div id="bootScreen" class="boot-screen">
                <div class="htc-logo anime-glitch">
                    ‚óâ <span class="japanese-symbol">Ê≠ª</span> –ù–ê–ô–î–ï–ù –î–ï–í–ê–ô–°
                </div>
                <div style="font-size: 11px; color: #888; margin: 10px 0;">
                    –ú–æ–¥–µ–ª—å: HTC P3300<br>
                    –í–ª–∞–¥–µ–ª–µ—Ü: –Æ–∫–∏ –¢–∞–Ω–∞–∫–∞ (Áî∞‰∏≠Èõ™)<br>
                    –ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥: <span class="japanese-symbol">ÔºìÊó•Ââç</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="bootProgress"></div>
                </div>
                <div style="font-size: 10px; color: #ff6b6b; margin-top: 15px;" class="anime-glitch">
                    ‚ö† –î–ê–ù–ù–´–ï –ü–û–í–†–ï–ñ–î–ï–ù–´ ‚ö†<br>
                    –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏...
                </div>
                <div style="font-size: 9px; color: #444; margin-top: 20px;">
                    [–ù–ê–ñ–ú–ò–¢–ï –ß–¢–û–ë–´ –†–ê–°–°–õ–ï–î–û–í–ê–¢–¨]
                </div>
            </div>

            <!-- Desktop Screen -->
            <div id="desktopScreen" class="desktop">
                <div style="display: flex; justify-content: space-between; padding: 5px 0; font-size: 9px; color: #666; border-bottom: 1px solid #333; margin-bottom: 15px;">
                    <span>üìÖ 15 –¥–µ–∫–∞–±—Ä—è 2005</span>
                    <span style="color: #ff4444;">Êé•Á∂ö„Ç®„É©„Éº</span>
                </div>
                
                <div style="text-align: center; margin-bottom: 20px;">
                    <div style="color: #ff0096; font-size: 12px; font-weight: bold;" class="anime-glitch">
                        –ú–ï–†–¢–í–ê–Ø –°–¢–£–î–ò–Ø | <span class="japanese-symbol">Ê≠ªÈúäË®òÊÜ∂</span>
            </div>
                    <div style="font-size: 9px; color: #888; margin-top: 5px;">
                        üíÄ –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –ø—Ä–æ–ø–∞–≤—à–µ–π –º–∞—Å—Ç–µ—Ä–∞ –Æ–∫–∏<br>
                        üñ§ –ü—Å–∏—Ö–æ–¥–µ–ª–∏—á–µ—Å–∫–∏–π —Ö–æ—Ä—Ä–æ—Ä | –¢–∞—Ç—É-–∏—Å–∫—É—Å—Å—Ç–≤–æ<br>
                        ‚ö° –ù–∞–π–¥–∏ —É–±–∏–π—Ü—É, —Ä–∞—Å–∫—Ä–æ–π —Ç–∞–π–Ω—É<br>
                        <span style="color: #ff0096;">‚ú® –¢–æ–ª—å–∫–æ –¥–ª—è 18+</span>
        </div>
                </div>
                
                <div class="desktop-grid" id="desktopApps">
                    <!-- Apps will be populated by JavaScript -->
                </div>
                
                <div style="text-align: center; font-size: 9px; color: #444; margin-top: 20px;">
                    –í–Ω–∏–∑—É: <span style="color: #ff4444; animation: pulse 1s infinite;">‚óè</span> –º–µ—Ä—Ü–∞—é—â–∏–π –∫—Ä–∞—Å–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä<br>
                    "MEMORY CARD ERROR - <span class="japanese-symbol">Á†¥Êêç</span> DATA"
                </div>
            </div>

            <!-- Content screens will be populated by JavaScript -->
            <div id="contentArea"></div>
        </div>
    </div>

    <div style="text-align: center; padding: 20px; font-size: 10px; color: #444; border-top: 1px solid #333; margin-top: 30px;">
        –ú–ï–†–¢–í–ê–Ø –°–¢–£–î–ò–Ø ¬© 2005-2025 | <span class="japanese-symbol">Áæé„Åó„ÅÑÁ†¥ÊªÖ</span>
    </div>

    <script>
        // Telegram Web App initialization
        let tg = window.Telegram?.WebApp || {
            ready: () => {},
            expand: () => {},
            MainButton: { show: () => {}, hide: () => {}, setText: () => {}, onClick: () => {} },
            sendData: () => {}
        };
        
        tg.ready();
        tg.expand();

        // Game state
        let gameState = {
            currentScreen: 'boot',
            horrorLevel: 0,
            investigationProgress: 0,
            discoveredClues: [],
            visitedLocations: [],
            skillsViewed: false,
            telegramUser: tg.initDataUnsafe?.user || null,
            currentCourse: null
        };

        // Tattoo course data
        const tattooAcademyData = {
            full_course: {
                title: "–ü–æ–ª–Ω—ã–π –∫—É—Ä—Å —Ç–∞—Ç—É-–º–∞—Å—Ç–µ—Ä–∞",
                originalPrice: 45000,
                currentPrice: 22500,
                description: "–ü–æ–ª–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –∏—Å–∫—É—Å—Å—Ç–≤—É —Ç–∞—Ç—É–∏—Ä–æ–≤–∫–∏ –æ—Ç –æ—Å–Ω–æ–≤ –¥–æ –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–∞. –¢–µ–æ—Ä–∏—è, –ø—Ä–∞–∫—Ç–∏–∫–∞, —Ä–∞–±–æ—Ç–∞ —Å –∫–æ–∂–µ–π –∏ –ø–∏–≥–º–µ–Ω—Ç–∞–º–∏.",
                skills: ["–¢–µ–æ—Ä–∏—è —Ç–∞—Ç—É–∏—Ä–æ–≤–∫–∏", "–†–∞–±–æ—Ç–∞ —Å –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ–º", "–¢–µ—Ö–Ω–∏–∫–∏ –Ω–∞–Ω–µ—Å–µ–Ω–∏—è", "–≠—Å–∫–∏–∑—ã –∏ –¥–∏–∑–∞–π–Ω", "–ü—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ –≤ —Å–æ—Ü—Å–µ—Ç—è—Ö"],
                duration: "1-2 –º–µ—Å—è—Ü–∞"
            },
            basic_course: {
                title: "–ë–∞–∑–æ–≤—ã–π –∫—É—Ä—Å —Å –≤–∏–¥–µ–æ",
                originalPrice: 25000,
                currentPrice: 12500,
                description: "–û—Å–Ω–æ–≤—ã —Ç–∞—Ç—É–∏—Ä–æ–≤–∫–∏ —Å –≤–∏–¥–µ–æ-—É—Ä–æ–∫–∞–º–∏ –∏ —Å–æ–∑–≤–æ–Ω–∞–º–∏. –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö –º–∞—Å—Ç–µ—Ä–æ–≤.",
                skills: ["–û—Å–Ω–æ–≤—ã —Ç–µ–æ—Ä–∏–∏", "–í–∏–¥–µ–æ-—É—Ä–æ–∫–∏", "–†–∞–±–æ—Ç–∞ —Å —ç—Å–∫–∏–∑–∞–º–∏", "–§–∏–Ω–∞–ª—å–Ω—ã–π —Å–æ–∑–≤–æ–Ω"],
                duration: "1-2 –º–µ—Å—è—Ü–∞"
            },
            text_course: {
                title: "–¢–µ–∫—Å—Ç–æ–≤—ã–π –∫—É—Ä—Å",
                originalPrice: 11000,
                currentPrice: 5500,
                description: "–ö–æ–º–ø–∞–∫—Ç–Ω—ã–π –∫—É—Ä—Å –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ñ–æ—Ä–º–∞—Ç–µ —Å –æ—Å–Ω–æ–≤–∞–º–∏ –ø—Ä–∞–∫—Ç–∏–∫–∏ –∏ —Å–æ–∑–≤–æ–Ω–æ–º –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤.",
                skills: ["–¢–µ–æ—Ä–∏—è –≤ —Ç–µ–∫—Å—Ç–µ", "–û—Å–Ω–æ–≤—ã –ø—Ä–∞–∫—Ç–∏–∫–∏", "–†–∞–±–æ—Ç–∞ —Å —ç—Å–∫–∏–∑–∞–º–∏", "–°–æ–∑–≤–æ–Ω —Å –º–∞—Å—Ç–µ—Ä–æ–º"],
                duration: "~2 –Ω–µ–¥–µ–ª–∏"
            },
            smm_course: {
                title: "–í–µ–¥–µ–Ω–∏–µ —Å–æ—Ü—Å–µ—Ç–µ–π –¥–ª—è —Ç–∞—Ç—É",
                originalPrice: 25000,
                currentPrice: 12500,
                description: "–ü–æ–ª–Ω—ã–π –∫—É—Ä—Å –ø–æ –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏—é —Ç–∞—Ç—É-–º–∞—Å—Ç–µ—Ä–∞ –≤ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç—è—Ö –∏ –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏—é –∫–ª–∏–µ–Ω—Ç–æ–≤.",
                skills: ["–ë—Ä–µ–Ω–¥ –º–∞—Å—Ç–µ—Ä–∞", "–ö–æ–Ω—Ç–µ–Ω—Ç-–ø–ª–∞–Ω—ã", "Reels –∏ TikTok", "–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ", "–ü—Ä–æ–¥–∞–∂–∏"],
                duration: "3 –Ω–µ–¥–µ–ª–∏"
            },
            procreate_course: {
                title: "–†–∏—Å–æ–≤–∞–Ω–∏–µ –≤ Procreate",
                originalPrice: 15000,
                currentPrice: 7500,
                description: "–°–æ–∑–¥–∞–Ω–∏–µ —Ü–∏—Ñ—Ä–æ–≤—ã—Ö —ç—Å–∫–∏–∑–æ–≤ –¥–ª—è —Ç–∞—Ç—É–∏—Ä–æ–≤–æ–∫ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ Procreate.",
                skills: ["–†–∞–±–æ—Ç–∞ –≤ Procreate", "–¶–∏—Ñ—Ä–æ–≤—ã–µ —ç—Å–∫–∏–∑—ã", "–¢–µ—Ö–Ω–∏–∫–∏ —Ä–∏—Å–æ–≤–∞–Ω–∏—è", "–°—Ç–∏–ª–∏ —Ç–∞—Ç—É–∏—Ä–æ–≤–æ–∫"],
                duration: "2-3 –Ω–µ–¥–µ–ª–∏"
            },
            consultation: {
                title: "–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è —Ç–∞—Ç—É-–º–∞—Å—Ç–µ—Ä–∞",
                originalPrice: 6000,
                currentPrice: 3000,
                description: "–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è —Å –æ–ø—ã—Ç–Ω—ã–º –º–∞—Å—Ç–µ—Ä–æ–º –ø–æ –ª—é–±—ã–º –≤–æ–ø—Ä–æ—Å–∞–º —Ç–∞—Ç—É–∏—Ä–æ–≤–∫–∏.",
                skills: ["–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Ä–∞–∑–±–æ—Ä", "–û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã", "–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–≤–∏—Ç–∏—è", "–°–æ–≤–µ—Ç—ã –ø–æ —Ç–µ—Ö–Ω–∏–∫–µ"],
                duration: "1 —á–∞—Å"
            }
        };

        // Investigation data
        const investigationData = {
            evidence: [
                {
                    id: 'phone_found',
                    title: 'üì± –ù–∞–π–¥–µ–Ω —Ç–µ–ª–µ—Ñ–æ–Ω',
                    content: '–¢–µ–ª–µ—Ñ–æ–Ω –Æ–∫–∏ –¢–∞–Ω–∞–∫–∞ –Ω–∞–π–¥–µ–Ω –≤ —Å—Ç—É–¥–∏–∏ —Ç–∞—Ç—É–∏—Ä–æ–≤–∫–∏. –ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥ 3 –¥–Ω—è –Ω–∞–∑–∞–¥. –í–ª–∞–¥–µ–ª–∏—Ü–∞ –ø—Ä–æ–ø–∞–ª–∞ –±–µ–∑ –≤–µ—Å—Ç–∏.',
                    clue: '–Æ–∫–∏ –∏—Å—á–µ–∑–ª–∞ –ø—Ä–∏ –∑–∞–≥–∞–¥–æ—á–Ω—ã—Ö –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤–∞—Ö',
                    courseHint: null
                },
                {
                    id: 'tattoo_symbols',
                    title: 'üñ§ –°—Ç—Ä–∞–Ω–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã',
                    content: '–í –∑–∞–ø–∏—Å—è—Ö –Æ–∫–∏ —É–ø–æ–º–∏–Ω–∞—é—Ç—Å—è –æ—Å–æ–±—ã–µ —Ç–∞—Ç—É–∏—Ä–æ–≤–∫–∏ —Å –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏. –û–Ω–∞ –∏–∑—É—á–∞–ª–∞ –∏—Ö –∑–Ω–∞—á–µ–Ω–∏–µ –∏ –º–µ—á—Ç–∞–ª–∞ –æ—Å–≤–æ–∏—Ç—å —ç—Ç–æ –∏—Å–∫—É—Å—Å—Ç–≤–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ.',
                    clue: '–°–∏–º–≤–æ–ª—ã –º–æ–≥—É—Ç –±—ã—Ç—å –∫–ª—é—á–æ–º –∫ —Ä–∞–∑–≥–∞–¥–∫–µ',
                    courseHint: 'full_course'
                },
                {
                    id: 'social_posts',
                    title: 'üì± –ü–æ—Å—Ç—ã –≤ —Å–æ—Ü—Å–µ—Ç—è—Ö',
                    content: '–ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø–æ—Å—Ç—ã –Æ–∫–∏ –≤ Instagram –ø–æ–ª–Ω—ã –∫—Ä–∏–ø—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∏ —Ñ–æ—Ç–æ —Ç–∞—Ç—É–∏—Ä–æ–≤–æ–∫ —Å —Ä—É–Ω–∞–º–∏. –û–Ω–∞ –ø—ã—Ç–∞–ª–∞—Å—å –ø—Ä–æ–¥–≤–∏–≥–∞—Ç—å —Å–≤–æ–µ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ.',
                    clue: '–°–æ—Ü—Å–µ—Ç–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏',
                    courseHint: 'smm_course'
                },
                {
                    id: 'sketch_collection',
                    title: 'üé® –ö–æ–ª–ª–µ–∫—Ü–∏—è —ç—Å–∫–∏–∑–æ–≤',
                    content: '–ù–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –ø–∞–ø–∫–∞ —Å —Å–æ—Ç–Ω—è–º–∏ —ç—Å–∫–∏–∑–æ–≤ —Ç–∞—Ç—É–∏—Ä–æ–≤–æ–∫, —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –≤ Procreate. –ú–Ω–æ–≥–∏–µ –Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω—ã, –Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –≤—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–∞.',
                    clue: '–≠—Å–∫–∏–∑—ã –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–∫—Ä—ã—Ç–æ–µ –ø–æ—Å–ª–∞–Ω–∏–µ',
                    courseHint: 'procreate_course'
                },
                {
                    id: 'master_notes',
                    title: 'üìù –ó–∞–ø–∏—Å–∏ –º–∞—Å—Ç–µ—Ä–∞',
                    content: '–î–Ω–µ–≤–Ω–∏–∫ –Æ–∫–∏ –ø–æ–ª–æ–Ω –∑–∞–º–µ—Ç–æ–∫ –æ —Ç–µ—Ö–Ω–∏–∫–∞—Ö —Ç–∞—Ç—É–∏—Ä–æ–≤–∫–∏ –∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞—Ö —Å –Ω–æ–≤—ã–º–∏ —Å—Ç–∏–ª—è–º–∏. –û–Ω–∞ –º–µ—á—Ç–∞–ª–∞ —Å—Ç–∞—Ç—å –ª—É—á—à–∏–º –º–∞—Å—Ç–µ—Ä–æ–º –≤ –≥–æ—Ä–æ–¥–µ.',
                    clue: '–ú–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ –Æ–∫–∏ –¥–æ—Å—Ç–∏–≥–ª–æ –æ–ø–∞—Å–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è',
                    courseHint: 'text_course'
                },
                {
                    id: 'client_mystery',
                    title: 'üë§ –ó–∞–≥–∞–¥–æ—á–Ω—ã–π –∫–ª–∏–µ–Ω—Ç',
                    content: '–ü–æ—Å–ª–µ–¥–Ω–µ–π –∑–∞–ø–∏—Å—å—é –±—ã–ª–∞ –≤—Å—Ç—Ä–µ—á–∞ —Å –∫–ª–∏–µ–Ω—Ç–æ–º, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–∫–∞–∑–∞–ª "—Å–∏–º–≤–æ–ª –ø–µ—Ä–µ—Ö–æ–¥–∞". –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –Æ–∫–∏ –ø—Ä–æ–ø–∞–ª–∞. –ö–ª–∏–µ–Ω—Ç –æ–±–µ—â–∞–ª –Ω–∞—É—á–∏—Ç—å –µ–µ "–∏—Å—Ç–∏–Ω–Ω–æ–º—É –∏—Å–∫—É—Å—Å—Ç–≤—É".',
                    clue: '–ö–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–≤—è–∑–∞–Ω —Å –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ–º',
                    courseHint: 'consultation'
                }
            ]
        };

        function updateHorrorMeter(level) {
            gameState.horrorLevel = Math.min(100, level);
            document.getElementById('horrorFill').style.width = gameState.horrorLevel + '%';
        }

        function increaseHorror(amount = 10) {
            updateHorrorMeter(gameState.horrorLevel + amount);
        }

        function showBootScreen() {
            gameState.currentScreen = 'boot';
            document.getElementById('bootScreen').style.display = 'block';
            document.getElementById('desktopScreen').style.display = 'none';
            document.getElementById('contentArea').innerHTML = '';
            
            setTimeout(() => {
                document.getElementById('bootProgress').style.width = '100%';
            }, 500);
            
            document.getElementById('bootScreen').onclick = () => {
                increaseHorror(15);
                setTimeout(showDesktop, 1000);
            };
        }

        function showDesktop() {
            gameState.currentScreen = 'desktop';
            document.getElementById('bootScreen').style.display = 'none';
            document.getElementById('desktopScreen').style.display = 'block';
            document.getElementById('contentArea').innerHTML = '';
            
            updateDesktopApps();
        }

        function updateDesktopApps() {
            const apps = [
                { emoji: 'üìù', name: '–ó–∞–º–µ—Ç–∫–∏', id: 'notes', enabled: true, isNew: true },
                { emoji: 'üí¨', name: '–°–æ–æ–±—â–µ–Ω–∏—è', id: 'messages', enabled: true, isNew: true },
                { emoji: 'üîç', name: '–†–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ', id: 'investigation', enabled: gameState.investigationProgress >= 1, isNew: gameState.investigationProgress >= 1 },
                { emoji: 'üì∑', name: '–ö–∞–º–µ—Ä–∞', id: 'camera', enabled: gameState.investigationProgress >= 2, isNew: false },
                { emoji: 'üéµ', name: '–ü–ª–µ–µ—Ä', id: 'player', enabled: gameState.investigationProgress >= 3, isNew: false },
                { emoji: 'üó∫Ô∏è', name: '–ö–∞—Ä—Ç–∞', id: 'map', enabled: true, isNew: false },
                { emoji: 'üñ§', name: '–¢–∞—Ç—É –ê–∫–∞–¥–µ–º–∏—è', id: 'tattoo_academy', enabled: gameState.skillsViewed, isNew: gameState.skillsViewed },
                { emoji: '‚öôÔ∏è', name: '–ù–∞—Å—Ç—Ä–æ–π–∫–∏', id: 'settings', enabled: true, isNew: false }
            ];

            const grid = document.getElementById('desktopApps');
            grid.innerHTML = apps.map(app => `
                <div class="app-icon ${!app.enabled ? 'disabled' : ''}" ${app.enabled ? `onclick="openApp('${app.id}')"` : ''}>
                    <span class="app-emoji">${app.emoji}</span>
                    <div class="app-name">${app.name}</div>
                    ${app.isNew && app.enabled ? '<div class="badge new">NEW</div>' : ''}
                    ${!app.enabled ? '<div class="badge">üîí</div>' : ''}
                </div>
            `).join('');
        }

        function openApp(appId) {
            document.getElementById('desktopScreen').style.display = 'none';
            
            switch(appId) {
                case 'notes':
                    showNotesApp();
                    break;
                case 'messages':
                    showMessagesApp();
                    break;
                case 'investigation':
                    showInvestigationApp();
                    break;
                case 'tattoo_academy':
                    showTattooAcademy();
                    break;
                case 'camera':
                    showCameraApp();
                    break;
                case 'player':
                    showPlayerApp();
                    break;
                case 'map':
                    showMapApp();
                    break;
                case 'settings':
                    showSettingsApp();
                    break;
            }
        }

        function showNotesApp() {
            increaseHorror(10);
            const content = `
                <div class="content-screen" style="display: block;">
                    <div class="content-header">
                        <button class="back-btn" onclick="showDesktop()">‚Üê</button>
                        <span>üìù –ó–∞–º–µ—Ç–∫–∏ –Æ–∫–∏ | <span class="japanese-symbol">Ë®òÈå≤</span></span>
                    </div>
                    
                    <div style="max-height: 400px; overflow-y: auto;">
                        <div class="message">
                            <div class="message-header">15.12.05 - 23:42</div>
                            <div class="message-content">
                                –°–µ–≥–æ–¥–Ω—è —Å–¥–µ–ª–∞–ª–∞ –æ—Å–æ–±—É—é —Ç–∞—Ç—É–∏—Ä–æ–≤–∫—É –∫–ª–∏–µ–Ω—Ç—É. –°–∏–º–≤–æ–ª –±—ã–ª... —Å—Ç—Ä–∞–Ω–Ω—ã–π. 
                                –û–Ω –ø–æ–∫–∞–∑–∞–ª —Ä–∏—Å—É–Ω–æ–∫ —Å —Ç–µ–ª–µ—Ñ–æ–Ω–∞, –Ω–æ —è –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –≤–∏–¥–µ–ª–∞ —Ç–∞–∫–∏—Ö –∑–Ω–∞–∫–æ–≤.
                                <br><br>
                                <span class="japanese-symbol">È≠Ç</span> - —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç "–¥—É—à–∞" –ø–æ-—è–ø–æ–Ω—Å–∫–∏. 
                                –ù–æ —Å–∏–º–≤–æ–ª –∫–ª–∏–µ–Ω—Ç–∞ –±—ã–ª –¥—Ä—É–≥–æ–π. –ë–æ–ª–µ–µ –¥—Ä–µ–≤–Ω–∏–π. –ë–æ–ª–µ–µ... –∂–∏–≤–æ–π.
                                <br><br>
                                –Ø –º–µ—á—Ç–∞—é –æ—Å–≤–æ–∏—Ç—å –≤—Å–µ —Ç–µ—Ö–Ω–∏–∫–∏ —Ç–∞—Ç—É–∏—Ä–æ–≤–∫–∏. –•–æ—á—É —Å—Ç–∞—Ç—å –Ω–∞—Å—Ç–æ—è—â–∏–º –º–∞—Å—Ç–µ—Ä–æ–º!
                            </div>
                        </div>
                        
                        <div class="message system">
                            <div class="message-header">16.12.05 - 03:15</div>
                            <div class="message-content">
                                –ù–µ –º–æ–≥—É —Å–ø–∞—Ç—å. –¢–∞—Ç—É–∏—Ä–æ–≤–∫–∞ –Ω–∞ —Ä—É–∫–µ –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞—á–∞–ª–∞... —Å–≤–µ—Ç–∏—Ç—å—Å—è? 
                                –≠—Ç–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ, –Ω–æ —è –≤–∏–¥–µ–ª–∞ —ç—Ç–æ —Å–≤–æ–∏–º–∏ –≥–ª–∞–∑–∞–º–∏.
                                <br><br>
                                –ù—É–∂–Ω–æ –∏–∑—É—á–∏—Ç—å –±–æ–ª—å—à–µ –æ –¥—Ä–µ–≤–Ω–∏—Ö —Å–∏–º–≤–æ–ª–∞—Ö —Ç–∞—Ç—É–∏—Ä–æ–≤–∫–∏. 
                                –ú–æ–∂–µ—Ç –±—ã—Ç—å, —Å—Ç–æ–∏—Ç –∑–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã?
                            </div>
                        </div>
                        
                        <div class="message corrupted">
                            <div class="message-header">17.12.05 - [–î–ê–ù–ù–´–ï –ü–û–í–†–ï–ñ–î–ï–ù–´]</div>
                            <div class="message-content">
                                –ö–ª–∏–µ–Ω—Ç –≤–µ—Ä–Ω—É–ª—Å—è. –ì–æ–≤–æ—Ä–∏—Ç, —á—Ç–æ —Å–∏–º–≤–æ–ª "–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–ª—Å—è". 
                                –Ø –±–æ—é—Å—å. –û–Ω –ø—Ä–µ–¥–ª–æ–∂–∏–ª –º–Ω–µ —Å—Ç–∞—Ç—å —á–∞—Å—Ç—å—é —á–µ–≥–æ-—Ç–æ –±–æ–ª—å—à–µ–≥–æ.
                                –û–±–µ—â–∞–µ—Ç –Ω–∞—É—á–∏—Ç—å "–∏—Å—Ç–∏–Ω–Ω–æ–º—É –∏—Å–∫—É—Å—Å—Ç–≤—É —Ç–∞—Ç—É–∏—Ä–æ–≤–∫–∏".
                                <br><br>
                                –ï—Å–ª–∏ —Å–æ –º–Ω–æ–π —á—Ç–æ-—Ç–æ —Å–ª—É—á–∏—Ç—Å—è - –ù–ï –ò–©–ò–¢–ï –ú–ï–ù–Ø.
                                <span class="japanese-symbol">Âç±Èô∫</span> –û–ü–ê–°–ù–û
                                <br><br>
                                –ù–æ –µ—Å–ª–∏ –∫—Ç–æ-—Ç–æ –Ω–∞–π–¥–µ—Ç —ç—Ç–æ... –∏–∑—É—á–∞–π—Ç–µ —Ç–∞—Ç—É –ø—Ä–∞–≤–∏–ª—å–Ω–æ. 
                                –ß–µ—Ä–µ–∑ –Ω–∞—Å—Ç–æ—è—â–∏—Ö –º–∞—Å—Ç–µ—Ä–æ–≤. –ë–µ–∑–æ–ø–∞—Å–Ω–æ.
                            </div>
                        </div>
                    </div>
                    
                    <div class="course-hint" style="margin-top: 20px;">
                        <div class="course-hint-title">üîÆ –ù–∞–π–¥–µ–Ω–∞ —Å–∫—Ä—ã—Ç–∞—è –∑–∞–ø–∏—Å—å:</div>
                        "–ò–∑—É—á–∞—é –¥—Ä–µ–≤–Ω–∏–µ —Ç–µ—Ö–Ω–∏–∫–∏ —Ç–∞—Ç—É–∏—Ä–æ–≤–∫–∏. –ï—Å–ª–∏ —Ö–æ—á–µ—à—å –ø–æ–Ω—è—Ç—å –º–∞–≥–∏—é —Å–∏–º–≤–æ–ª–æ–≤ - 
                        –Ω—É–∂–Ω–æ –ø—Ä–æ–π—Ç–∏ –ø–æ–ª–Ω—ã–π –∫—É—Ä—Å –æ–±—É—á–µ–Ω–∏—è —É –Ω–∞—Å—Ç–æ—è—â–∏—Ö –º–∞—Å—Ç–µ—Ä–æ–≤. 
                        –¢–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞ –æ—Ç–∫—Ä–æ—é—Ç—Å—è –∏—Å—Ç–∏–Ω–Ω—ã–µ –∑–Ω–∞–Ω–∏—è –ë–ï–ó –û–ü–ê–°–ù–û–°–¢–ò..."
                        <div style="margin-top: 10px;">
                            <button class="choice-btn" onclick="gameState.skillsViewed = true; showTattooAcademy();">
                                üñ§ –û—Ç–∫—Ä—ã—Ç—å –¢–∞—Ç—É –ê–∫–∞–¥–µ–º–∏—é
                            </button>
                        </div>
                    </div>
                    </div>
                `;

            document.getElementById('contentArea').innerHTML = content;
            
            if (!gameState.discoveredClues.includes('notes_read')) {
                gameState.discoveredClues.push('notes_read');
                gameState.investigationProgress = Math.max(1, gameState.investigationProgress);
                updateDesktopApps();
            }
        }

        function showMessagesApp() {
            increaseHorror(15);
            const content = `
                <div class="content-screen" style="display: block;">
                    <div class="content-header">
                        <button class="back-btn" onclick="showDesktop()">‚Üê</button>
                        <span>üí¨ –°–æ–æ–±—â–µ–Ω–∏—è | <span class="japanese-symbol">„É°„ÉÉ„Çª„Éº„Ç∏</span></span>
                    </div>
                    
                    <div style="max-height: 400px; overflow-y: auto;">
                        <div class="message">
                            <div class="message-header">–û—Ç: –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –Ω–æ–º–µ—Ä (+81-XXX-XXXX)</div>
                            <div class="message-content">
                                –Æ–∫–∏, —è –≤–∏–¥–µ–ª —Ç–≤–æ–∏ —Ä–∞–±–æ—Ç—ã –≤ Instagram. –¢—ã —Ç–∞–ª–∞–Ω—Ç–ª–∏–≤–∞. 
                                –£ –º–µ–Ω—è –µ—Å—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ - –æ—Å–æ–±—ã–π –∑–∞–∫–∞–∑. 
                                –í—Å—Ç—Ä–µ—Ç–∏–º—Å—è –≤ –∫–∞—Ñ–µ –Ω–∞ —É–≥–ª—É. 
                                <br><br>
                                –Ø –Ω–∞—É—á—É —Ç–µ–±—è –∏—Å—Ç–∏–Ω–Ω–æ–º—É –∏—Å–∫—É—Å—Å—Ç–≤—É —Ç–∞—Ç—É–∏—Ä–æ–≤–∫–∏.
                                <span class="japanese-symbol">ÈÅãÂëΩ</span> - —Å—É–¥—å–±–∞ –∑–æ–≤–µ—Ç.
                            </div>
                        </div>
                        
                        <div class="message system">
                            <div class="message-header">–Æ–∫–∏ ‚Üí –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π</div>
                            <div class="message-content">
                                –ö—Ç–æ —Ç—ã? –û—Ç–∫—É–¥–∞ –∑–Ω–∞–µ—à—å –ø—Ä–æ –º–æ–∏ —Ä–∞–±–æ—Ç—ã?
                                –ö–∞–∫–æ–µ "–∏—Å—Ç–∏–Ω–Ω–æ–µ –∏—Å–∫—É—Å—Å—Ç–≤–æ"?
                        </div>
                    </div>
                        
                        <div class="message">
                            <div class="message-header">–û—Ç: –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π</div>
                            <div class="message-content">
                                –Ø –∫–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–µ—Ä —Ä–µ–¥–∫–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤. –¢–≤–æ–µ –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ –ø—Ä–∏–≤–ª–µ–∫–ª–æ –º–æ–µ –≤–Ω–∏–º–∞–Ω–∏–µ.
                                –°–∏–º–≤–æ–ª—ã - —ç—Ç–æ –º–æ—Å—Ç—ã –º–µ–∂–¥—É –º–∏—Ä–∞–º–∏. –¢—ã –º–æ–∂–µ—à—å —Å—Ç–∞—Ç—å –ø—Ä–æ–≤–æ–¥–Ω–∏–∫–æ–º.
                                <br><br>
                                –ù–æ —Å–Ω–∞—á–∞–ª–∞ –¥–æ–∫–∞–∂–∏ —Å–≤–æ—é –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å. 
                                –°–æ–∑–¥–∞–π —à–µ–¥–µ–≤—Ä. –ò—Å–ø–æ–ª—å–∑—É–π –í–°–ï —Å–≤–æ–∏ –Ω–∞–≤—ã–∫–∏.
                            </div>
                        </div>
                        
                        <div class="message corrupted">
                            <div class="message-header">–ü–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ - [–ü–û–í–†–ï–ñ–î–ï–ù–û]</div>
                            <div class="message-content">
                                "–ï—Å–ª–∏ —á–∏—Ç–∞–µ—à—å —ç—Ç–æ - –∑–Ω–∞—á–∏—Ç, —è –∏—Å—á–µ–∑–ª–∞. 
                                –ù–µ –ø–æ–≤—Ç–æ—Ä—è–π –º–æ–∏—Ö –æ—à–∏–±–æ–∫. 
                                <br><br>
                                –ò–∑—É—á–∞–π —Ç–∞—Ç—É–∏—Ä–æ–≤–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ, —á–µ—Ä–µ–∑ –Ω–∞—Å—Ç–æ—è—â–∏—Ö –º–∞—Å—Ç–µ—Ä–æ–≤. 
                                –ï—Å—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –æ—Å–≤–æ–∏—Ç—å —ç—Ç–æ –∏—Å–∫—É—Å—Å—Ç–≤–æ.
                                –ü—Ä–æ–º–æ–∫–æ–¥ –¥–ª—è —Å–∫–∏–¥–∫–∏: TATTOO50"
                                <br><br>
                                <span class="japanese-symbol">Ê∞ó„Çí„Å§„Åë„Å¶</span> - –ë—É–¥—å –æ—Å—Ç–æ—Ä–æ–∂–Ω–∞...
                        </div>
                                </div>
                    </div>
                    
                    <div class="hidden-scroll">
                        <span class="japanese-symbol">ÁßòÂØÜ</span> –°–∫—Ä—ã—Ç–∞—è –∑–∞–ø–∏—Å—å: 
                        "–õ—É—á—à–∏–µ –∫—É—Ä—Å—ã –ø–æ —Ç–∞—Ç—É–∏—Ä–æ–≤–∫–µ –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ —É –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö –º–∞—Å—Ç–µ—Ä–æ–≤. 
                        –û–Ω–∏ –Ω–∞—É—á–∞—Ç –Ω–∞—Å—Ç–æ—è—â–µ–º—É –∏—Å–∫—É—Å—Å—Ç–≤—É –±–µ–∑ –æ–ø–∞—Å–Ω–æ—Å—Ç–∏. 
                        50% —Å–∫–∏–¥–∫–∞ –ø–æ –∫–æ–¥—É TATTOO50."
                        </div>
                    </div>
                `;
            
            document.getElementById('contentArea').innerHTML = content;
            
            if (!gameState.discoveredClues.includes('messages_read')) {
                gameState.discoveredClues.push('messages_read');
                gameState.investigationProgress = Math.max(2, gameState.investigationProgress);
                updateDesktopApps();
            }
        }

        function showInvestigationApp() {
            const discoveredCount = gameState.discoveredClues.length;
            const totalClues = investigationData.evidence.length;
            
            const content = `
                <div class="content-screen" style="display: block;">
                    <div class="content-header">
                        <button class="back-btn" onclick="showDesktop()">‚Üê</button>
                        <span>üîç –î–æ—Å—å–µ —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è</span>
                    </div>
                    
                    <div style="margin: 15px 0;">
                        <div style="color: #ff0096; font-size: 14px; font-weight: bold; margin-bottom: 10px;">
                            –î–µ–ª–æ: –ò—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ –Æ–∫–∏ –¢–∞–Ω–∞–∫–∞
                        </div>
                        <div style="font-size: 11px; color: #ccc; margin-bottom: 15px;">
                            –¢–∞—Ç—É-–º–∞—Å—Ç–µ—Ä, 22 –≥–æ–¥–∞. –ü—Ä–æ–ø–∞–ª–∞ 3 –¥–Ω—è –Ω–∞–∑–∞–¥ –ø—Ä–∏ –∑–∞–≥–∞–¥–æ—á–Ω—ã—Ö –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤–∞—Ö.
                            –ü–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–∑ –≤–∏–¥–µ–ª–∏ –≤ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π —Å—Ç—É–¥–∏–∏.
                            </div>
                        
                        <div style="background: #1a1a1a; border: 1px solid #333; padding: 10px; border-radius: 6px; margin-bottom: 15px;">
                            <div style="color: #ff0096; font-size: 12px; margin-bottom: 8px;">–ü—Ä–æ–≥—Ä–µ—Å—Å —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è:</div>
                            <div style="font-size: 11px;">–£–ª–∏–∫–∏ –Ω–∞–π–¥–µ–Ω–æ: ${discoveredCount}/${totalClues}</div>
                            <div style="font-size: 11px;">–£—Ä–æ–≤–µ–Ω—å –æ–ø–∞—Å–Ω–æ—Å—Ç–∏: ${Math.round(gameState.horrorLevel)}%</div>
                            </div>
                        
                        <div style="color: #ff0096; font-size: 12px; margin-bottom: 10px;">–ù–∞–π–¥–µ–Ω–Ω—ã–µ —É–ª–∏–∫–∏:</div>
                        ${gameState.discoveredClues.map(clueId => {
                            const evidence = investigationData.evidence.find(e => e.id === clueId);
                            return evidence ? `
                                <div class="evidence-card" style="margin: 8px 0; padding: 10px; cursor: pointer;" onclick="examineEvidence('${evidence.id}')">
                                    <div style="font-size: 11px; color: #ff0096; font-weight: bold;">${evidence.title}</div>
                                    <div style="font-size: 10px; color: #888; margin-top: 5px;">${evidence.clue}</div>
                            </div>
                            ` : '';
                        }).join('')}
                        
                        ${discoveredCount >= 2 ? `
                            <div class="course-hint" style="margin-top: 20px;">
                                <div class="course-hint-title">üéì –ù–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞:</div>
                                <div style="margin: 8px 0; font-size: 11px;">
                                    –í –∑–∞–ø–∏—Å—è—Ö –Æ–∫–∏ –Ω–∞–π–¥–µ–Ω—ã —Å—Å—ã–ª–∫–∏ –Ω–∞ –∫—É—Ä—Å—ã —Ç–∞—Ç—É–∏—Ä–æ–≤–∫–∏. 
                                    –í–æ–∑–º–æ–∂–Ω–æ, –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –ø–æ–º–æ–∂–µ—Ç –ø–æ–Ω—è—Ç—å, —á—Ç–æ —Å –Ω–µ–π —Å–ª—É—á–∏–ª–æ—Å—å,
                                    –∏ –∏–∑–±–µ–∂–∞—Ç—å –ø–æ–¥–æ–±–Ω—ã—Ö –æ–ø–∞—Å–Ω–æ—Å—Ç–µ–π.
                        </div>
                                <button class="choice-btn" onclick="gameState.skillsViewed = true; showTattooAcademy();">
                                    üñ§ –ò–∑—É—á–∏—Ç—å –¢–∞—Ç—É –ê–∫–∞–¥–µ–º–∏—é
                                </button>
                            </div>
                        ` : ''}
                        </div>
                    </div>
                `;
            
            document.getElementById('contentArea').innerHTML = content;
        }

        function examineEvidence(evidenceId) {
            const evidence = investigationData.evidence.find(e => e.id === evidenceId);
            if (!evidence) return;

            if (!gameState.discoveredClues.includes(evidenceId)) {
                gameState.discoveredClues.push(evidenceId);
                increaseHorror(8);
            }

            let courseHintHTML = '';
            if (evidence.courseHint && tattooAcademyData[evidence.courseHint]) {
                const course = tattooAcademyData[evidence.courseHint];
                courseHintHTML = `
                    <div class="course-hint">
                        <div class="course-hint-title">üîÆ –°–≤—è–∑–∞–Ω–Ω—ã–µ –∑–Ω–∞–Ω–∏—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã:</div>
                        <div style="margin: 8px 0;">"${course.title}" - ${course.description}</div>
                        <div style="font-size: 10px; color: #888; margin-bottom: 10px;">
                            –í–æ–∑–º–æ–∂–Ω–æ, —ç—Ç–æ—Ç –∫—É—Ä—Å –ø–æ–º–æ–≥ –±—ã –Æ–∫–∏ –∏–∑–±–µ–∂–∞—Ç—å –æ–ø–∞—Å–Ω–æ—Å—Ç–∏...
                        </div>
                        <button class="choice-btn" onclick="gameState.skillsViewed = true; showCourse('${evidence.courseHint}');">
                            üñ§ –ò–∑—É—á–∏—Ç—å –∫—É—Ä—Å
                        </button>
                    </div>
                `;
            }

            const content = `
                <div class="content-screen" style="display: block;">
                    <div class="content-header">
                        <button class="back-btn" onclick="showInvestigationApp()">‚Üê</button>
                        <span>üîç –ê–Ω–∞–ª–∏–∑ —É–ª–∏–∫–∏</span>
                    </div>
                    
                    <div class="evidence-card" style="margin: 15px 0;">
                        <div class="evidence-title">${evidence.title}</div>
                        <div class="evidence-content" style="margin: 10px 0; line-height: 1.6;">
                            ${evidence.content}
                        </div>
                        <div style="margin-top: 15px; padding: 10px; background: #0a0a0a; border-radius: 6px; border: 1px solid #ff0096;">
                            <div style="color: #ff0096; font-weight: bold; margin-bottom: 5px;">üí° –í—ã–≤–æ–¥:</div>
                            <div style="color: #ccc; font-size: 11px;">${evidence.clue}</div>
                        </div>
                    </div>
                    
                    ${courseHintHTML}
                </div>
            `;
            
            document.getElementById('contentArea').innerHTML = content;
        }

        function showTattooAcademy() {
            gameState.skillsViewed = true;
            updateDesktopApps();
            
            const courses = Object.entries(tattooAcademyData);
            
            const content = `
                <div class="content-screen" style="display: block;">
                    <div class="content-header">
                        <button class="back-btn" onclick="showDesktop()">‚Üê</button>
                        <span>üñ§ –¢–∞—Ç—É –ê–∫–∞–¥–µ–º–∏—è | <span class="japanese-symbol">Âà∫ÈùíÂ≠¶Èô¢</span></span>
                        </div>
                    
                    <div style="margin: 15px 0; text-align: center;">
                        <div style="color: #ff0096; font-size: 14px; font-weight: bold; margin-bottom: 10px;">
                            –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –∏—Å–∫—É—Å—Å—Ç–≤—É —Ç–∞—Ç—É–∏—Ä–æ–≤–∫–∏
                            </div>
                        <div style="font-size: 10px; color: #888; margin-bottom: 15px;">
                            –ò–∑—É—á–∏ —Ç–∞–π–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–∫–∞–ª–∞ –Æ–∫–∏, –Ω–æ –±–µ–∑ –æ–ø–∞—Å–Ω–æ—Å—Ç–∏<br>
                            <span class="japanese-symbol">ÂÆâÂÖ®„Å™Â≠¶Áøí</span> - –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ
                            </div>
                        
                        <div class="promo-code">
                            <div style="color: #ff6b6b; font-size: 14px; font-weight: bold; margin-bottom: 10px;">
                                üî• –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è —Å–∫–∏–¥–∫–∞ –≤ –ø–∞–º—è—Ç—å –æ –Æ–∫–∏
                            </div>
                            <div style="font-size: 12px; color: #ccc; margin-bottom: 10px;">
                                50% —Å–∫–∏–¥–∫–∞ –Ω–∞ –≤—Å–µ –∫—É—Ä—Å—ã + –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è
                            </div>
                            <div class="promo-highlight">TATTOO50</div>
                            <div style="font-size: 9px; color: #888; margin-top: 8px;">
                                –£—á–∏—Å—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –∏–∑–±–µ–≥–∞–π –æ–ø–∞—Å–Ω–æ—Å—Ç–µ–π
                            </div>
                        </div>
                    </div>
                    
                    <div class="course-grid">
                        ${courses.map(([courseId, course]) => `
                            <div class="course-card" onclick="showCourse('${courseId}')">
                                <div style="position: absolute; top: 10px; right: 10px; background: #ff4444; color: white; padding: 5px 8px; border-radius: 4px; font-size: 10px; font-weight: bold;">
                                    -50%
                                </div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                    <div>
                                        <div class="course-title">${course.title}</div>
                                        <div style="font-size: 9px; color: #888;">${course.duration}</div>
                                    </div>
                                    <div class="course-price">
                                        <div class="price-old">${course.originalPrice.toLocaleString()}‚ÇΩ</div>
                                        <div class="price-new">${course.currentPrice.toLocaleString()}‚ÇΩ</div>
                                    </div>
                                </div>
                                <div style="font-size: 11px; color: #ccc; margin-bottom: 10px;">
                                    ${course.description}
                                </div>
                                <div style="display: flex; flex-wrap: wrap; gap: 5px;">
                                    ${course.skills.slice(0, 3).map(skill => `
                                        <span style="background: #333; color: #ff0096; padding: 3px 8px; border-radius: 4px; font-size: 9px;">
                                            ${skill}
                                        </span>
                                    `).join('')}
                                    ${course.skills.length > 3 ? `<span style="background: #333; color: #888; padding: 3px 8px; border-radius: 4px; font-size: 9px;">+${course.skills.length - 3}</span>` : ''}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div style="margin-top: 20px; text-align: center; font-size: 9px; color: #666;">
                        <span class="japanese-symbol">Áü•Ë≠ò„ÅØÂäõ„Å™„Çä</span> - –ó–Ω–∞–Ω–∏–µ - —ç—Ç–æ —Å–∏–ª–∞<br>
                        –í –ø–∞–º—è—Ç—å –æ –Æ–∫–∏ –¢–∞–Ω–∞–∫–∞, –º–∞—Å—Ç–µ—Ä–µ —Ç–∞—Ç—É–∏—Ä–æ–≤–∫–∏ (2003-2005)
                        </div>
                    </div>
                `;
            
            document.getElementById('contentArea').innerHTML = content;
        }

        function showCourse(courseId) {
            const course = tattooAcademyData[courseId];
            if (!course) return;
            
            gameState.currentCourse = courseId;
            
            let specialMessage = '';
            if (courseId === 'full_course') {
                specialMessage = `
                    <div class="course-hint">
                        <div class="course-hint-title">üîÆ –ü–æ—Å–ª–∞–Ω–∏–µ –æ—Ç –Æ–∫–∏:</div>
                        <div style="font-size: 11px; font-style: italic;">
                            "–≠—Ç–æ—Ç –∫—É—Ä—Å —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –∑–Ω–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ —è –∏—Å–∫–∞–ª–∞. –ï—Å–ª–∏ –±—ã —è –ø—Ä–æ—à–ª–∞ –µ–≥–æ —Ä–∞–Ω—å—à–µ, 
                            —Ç–æ –∏–∑—É—á–∏–ª–∞ –±—ã —Å–∏–º–≤–æ–ª—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏ –∏–∑–±–µ–∂–∞–ª–∞ –æ–ø–∞—Å–Ω–æ—Å—Ç–µ–π. 
                            –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø—Ä–µ–≤—ã—à–µ –≤—Å–µ–≥–æ."
                        </div>
                    </div>
                `;
            }
            
            const content = `
                <div class="content-screen" style="display: block;">
                    <div class="content-header">
                        <button class="back-btn" onclick="showTattooAcademy()">‚Üê</button>
                        <span>üñ§ ${course.title}</span>
                        </div>
                    
                    <div style="margin: 15px 0;">
                        <div style="background: linear-gradient(135deg, #1a1a1a, #2a2a2a); border: 1px solid #333; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                <div class="course-title" style="margin: 0;">${course.title}</div>
                                <div style="text-align: right;">
                                    <div class="price-old">${course.originalPrice.toLocaleString()}‚ÇΩ</div>
                                    <div class="price-new">${course.currentPrice.toLocaleString()}‚ÇΩ</div>
                        </div>
                    </div>
                            
                            <div style="font-size: 11px; color: #ccc; margin-bottom: 15px;">${course.description}</div>
                            
                            <div style="margin-bottom: 15px;">
                                <div style="color: #ff0096; font-size: 12px; margin-bottom: 8px;">–ß—Ç–æ –∏–∑—É—á–∏—à—å:</div>
                                <div style="display: flex; flex-wrap: wrap; gap: 5px;">
                                    ${course.skills.map(skill => `
                                        <span style="background: #333; color: #ff0096; padding: 3px 8px; border-radius: 4px; font-size: 9px;">
                                            ${skill}
                                        </span>
                                    `).join('')}
                                </div>
                            </div>
                            
                            <div style="font-size: 11px; color: #888;">
                                –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: ${course.duration}
                            </div>
                        </div>
                        
                        ${specialMessage}
                        
                        <div style="background: #0a0a0a; border: 1px solid #333; padding: 15px; border-radius: 6px; margin: 15px 0;">
                            <div style="color: #ff0096; font-size: 12px; margin-bottom: 10px;">üí∞ –î–µ—Ç–∞–ª–∏ –ø–æ–∫—É–ø–∫–∏:</div>
                            <div style="display: flex; justify-content: space-between; margin: 8px 0; font-size: 12px;">
                                <span>–ö—É—Ä—Å "${course.title}":</span>
                                <span>${course.originalPrice.toLocaleString()}‚ÇΩ</span>
                        </div>
                            <div style="display: flex; justify-content: space-between; margin: 8px 0; font-size: 12px;">
                                <span>–°–∫–∏–¥–∫–∞ TATTOO50:</span>
                                <span style="color: #ff6b6b;">-${(course.originalPrice - course.currentPrice).toLocaleString()}‚ÇΩ</span>
                        </div>
                            <div style="display: flex; justify-content: space-between; margin: 8px 0; font-size: 12px;">
                                <span>–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è:</span>
                                <span style="color: #ff6b6b;">-3,000‚ÇΩ</span>
                        </div>
                            <div style="display: flex; justify-content: space-between; margin-top: 15px; padding-top: 8px; border-top: 1px solid #333; font-weight: bold; color: #ff0096;">
                                <span>–ò—Ç–æ–≥–æ –∫ –æ–ø–ª–∞—Ç–µ:</span>
                                <span>${course.currentPrice.toLocaleString()}‚ÇΩ</span>
                    </div>
                        </div>
                        
                        <button class="pay-button" onclick="showPayment('${courseId}')">
                            üí≥ –ö—É–ø–∏—Ç—å –∫—É—Ä—Å –∑–∞ ${course.currentPrice.toLocaleString()}‚ÇΩ
                        </button>
                        
                        <div style="margin-top: 15px; text-align: center;">
                            <button class="choice-btn" onclick="showPromoCode()">
                                üéÅ –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('contentArea').innerHTML = content;
        }

        function showPayment(courseId) {
            const course = tattooAcademyData[courseId];
            
            const content = `
                <div class="content-screen" style="display: block;">
                    <div class="content-header">
                        <button class="back-btn" onclick="showCourse('${courseId}')">‚Üê</button>
                        <span>üí≥ –û–ø–ª–∞—Ç–∞ –∫—É—Ä—Å–∞</span>
                        </div>
                    
                    <div style="background: #1a1a1a; border: 1px solid #333; border-radius: 8px; padding: 20px; margin: 15px 0;">
                        <div style="color: #ff0096; font-size: 14px; font-weight: bold; margin-bottom: 15px; text-align: center;">
                            –û–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ Telegram
                        </div>
                        
                        <div style="background: #0a0a0a; border: 1px solid #333; padding: 15px; border-radius: 6px; margin-bottom: 15px;">
                            <div style="font-size: 12px; color: #ff0096; margin-bottom: 10px;">–í–∞—à –∑–∞–∫–∞–∑:</div>
                            <div style="font-size: 11px; margin-bottom: 5px;">${course.title}</div>
                            <div style="font-size: 11px; color: #888; margin-bottom: 10px;">${course.duration} –æ–±—É—á–µ–Ω–∏—è</div>
                            <div style="font-size: 14px; color: #ff0096; font-weight: bold;">${course.currentPrice.toLocaleString()}‚ÇΩ</div>
                        </div>
                        
                        <div style="background: #1a2a1a; border: 1px solid #00ff41; padding: 12px; border-radius: 6px; margin-bottom: 15px;">
                            <div style="color: #00ff41; font-size: 11px; font-weight: bold; margin-bottom: 5px;">üéÅ –ë–æ–Ω—É—Å—ã –≤–∫–ª—é—á–µ–Ω—ã:</div>
                            <div style="font-size: 10px; color: #ccc;">‚Ä¢ –ü—Ä–æ–º–æ–∫–æ–¥ TATTOO50 –ø—Ä–∏–º–µ–Ω–µ–Ω (-50%)</div>
                            <div style="font-size: 10px; color: #ccc;">‚Ä¢ –ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è —Å –º–∞—Å—Ç–µ—Ä–æ–º</div>
                            <div style="font-size: 10px; color: #ccc;">‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 24/7</div>
                            <div style="font-size: 10px; color: #ccc;">‚Ä¢ –í –ø–∞–º—è—Ç—å –æ –Æ–∫–∏ –¢–∞–Ω–∞–∫–∞</div>
                        </div>
                        
                        <button class="pay-button" onclick="processTelegramPayment('${courseId}')">
                            üöÄ –û–ø–ª–∞—Ç–∏—Ç—å ${course.currentPrice.toLocaleString()}‚ÇΩ
                        </button>
                        
                        <div style="margin-top: 15px; text-align: center; font-size: 9px; color: #666;">
                            –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ Telegram Payments<br>
                            <span class="japanese-symbol">ÂÆâÂÖ®</span> –ó–∞—â–∏—â–µ–Ω–Ω–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è
                        </div>
                        </div>
                    </div>
                `;

            document.getElementById('contentArea').innerHTML = content;
        }

        function processTelegramPayment(courseId) {
            const course = tattooAcademyData[courseId];
            
            // Simulate Telegram payment
            if (tg.sendData) {
                const purchaseData = {
                    action: 'purchase_course',
                    course_id: courseId,
                    course_title: course.title,
                    price: course.currentPrice,
                    user_id: gameState.telegramUser?.id || 'anonymous',
                    promo_code: 'TATTOO50'
                };
                
                tg.sendData(JSON.stringify(purchaseData));
            }
            
            // Show success screen
            setTimeout(() => showPaymentSuccess(courseId), 1500);
        }

        function showPaymentSuccess(courseId) {
            const course = tattooAcademyData[courseId];
            
            const content = `
                <div class="content-screen" style="display: block;">
                    <div class="content-header">
                        <button class="back-btn" onclick="showDesktop()">‚Üê</button>
                        <span>‚úÖ –ü–æ–∫—É–ø–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞</span>
                        </div>
                    
                    <div style="text-align: center; padding: 20px;">
                        <div style="font-size: 48px; margin: 20px 0;">üéâ</div>
                        <div style="color: #00ff41; font-size: 16px; font-weight: bold; margin-bottom: 15px;">
                            –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º —Å –ø–æ–∫—É–ø–∫–æ–π!
                        </div>
                        <div style="font-size: 12px; color: #ccc; margin-bottom: 20px;">
                            –ö—É—Ä—Å "${course.title}" —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω
                        </div>
                        
                        <div style="background: #1a2a1a; border: 1px solid #00ff41; padding: 15px; border-radius: 8px; margin: 20px 0;">
                            <div style="color: #00ff41; font-size: 12px; font-weight: bold; margin-bottom: 10px;">
                                üìß –ß—Ç–æ –¥–∞–ª—å—à–µ:
                    </div>
                            <div style="font-size: 10px; color: #ccc; text-align: left; line-height: 1.5;">
                                ‚Ä¢ –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –∫—É—Ä—Å–∞ –ø—Ä–∏–¥—É—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ 5 –º–∏–Ω—É—Ç<br>
                                ‚Ä¢ –°—Å—ã–ª–∫–∞ –Ω–∞ –æ–±—É—á–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤ –õ–°<br>
                                ‚Ä¢ –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è —Å –º–∞—Å—Ç–µ—Ä–æ–º —É–∂–µ –¥–æ—Å—Ç—É–ø–Ω–∞<br>
                                ‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∫–∞: @tattoo_master_support
                            </div>
                        </div>
                        
                        <div class="promo-code" style="margin: 20px 0;">
                            <div style="color: #ff6b6b; font-size: 14px; font-weight: bold; margin-bottom: 10px;">
                                üîÆ –ü–æ—Å–ª–∞–Ω–∏–µ –æ—Ç –Æ–∫–∏
                        </div>
                            <div style="font-size: 12px; color: #ccc; margin-bottom: 10px; font-style: italic;">
                                "–¢–µ–ø–µ—Ä—å —Ç—ã –∑–Ω–∞–µ—à—å —Ç–æ, —á—Ç–æ —è –∏—Å–∫–∞–ª–∞. –ò—Å–ø–æ–ª—å–∑—É–π —ç—Ç–∏ –∑–Ω–∞–Ω–∏—è –º—É–¥—Ä–æ. 
                                –ü—É—Ç—å –º–∞—Å—Ç–µ—Ä–∞ —Ç–∞—Ç—É –ø–æ–ª–æ–Ω –∫—Ä–∞—Å–æ—Ç—ã, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ –æ–±—É—á–µ–Ω–∏—è.
                                –ë—É–¥—å –æ—Å—Ç–æ—Ä–æ–∂–Ω–∞ –∏ –ø–æ–º–Ω–∏ –æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏."
                        </div>
                            <div style="margin-top: 10px; color: #ff0096;">
                                <span class="japanese-symbol">È†ëÂºµ„Å£„Å¶</span> - –£–¥–∞—á–∏ –≤ –æ–±—É—á–µ–Ω–∏–∏!
                            </div>
                        </div>
                        
                        <button class="choice-btn" onclick="showDesktop()">
                            üè† –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é
                        </button>
                        </div>
                    </div>
                `;
            
            document.getElementById('contentArea').innerHTML = content;
        }

        function showPromoCode() {
            const content = `
                <div class="content-screen" style="display: block;">
                    <div class="content-header">
                        <button class="back-btn" onclick="history.back()">‚Üê</button>
                        <span>üéÅ –ü—Ä–æ–º–æ–∫–æ–¥</span>
                        </div>
                    
                    <div style="text-align: center; padding: 20px;">
                        <div style="color: #ff0096; font-size: 16px; font-weight: bold; margin-bottom: 15px;">
                            –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –ø—Ä–æ–º–æ–∫–æ–¥ –∞–≥–µ–Ω—Ç–∞
                        </div>
                        
                        <div class="promo-code">
                            <div style="color: #ff6b6b; font-size: 14px; font-weight: bold; margin-bottom: 10px;">
                                üî• –°–∫–∏–¥–∫–∞ 50% + –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è
                        </div>
                            <div style="font-size: 12px; color: #ccc; margin-bottom: 10px;">
                                –í –ø–∞–º—è—Ç—å –æ –Æ–∫–∏ –¢–∞–Ω–∞–∫–∞<br>
                                –î–µ–π—Å—Ç–≤—É–µ—Ç –Ω–∞ –≤—Å–µ –∫—É—Ä—Å—ã —Ç–∞—Ç—É–∏—Ä–æ–≤–∫–∏
                    </div>
                            <div class="promo-highlight">TATTOO50</div>
                            <div style="margin-top: 10px; font-size: 10px; color: #888;">
                                + –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è —Å –º–∞—Å—Ç–µ—Ä–æ–º (3000‚ÇΩ)
                            </div>
                        </div>
                        
                        <div style="background: #1a1a1a; border: 1px solid #333; padding: 15px; border-radius: 8px; margin: 20px 0; text-align: left;">
                            <div style="color: #ff0096; font-size: 12px; margin-bottom: 10px;">–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:</div>
                            <div style="font-size: 10px; color: #ccc; line-height: 1.5;">
                                1. –í—ã–±–µ—Ä–∏—Ç–µ –ª—é–±–æ–π –∫—É—Ä—Å –≤ –¢–∞—Ç—É –ê–∫–∞–¥–µ–º–∏–∏<br>
                                2. –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –æ–ø–ª–∞—Ç—ã –∫–æ–¥ –ø—Ä–∏–º–µ–Ω–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏<br>
                                3. –ü–æ–ª—É—á–∏—Ç–µ 50% —Å–∫–∏–¥–∫—É + –±–µ—Å–ø–ª–∞—Ç–Ω—É—é –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é<br>
                                4. –ò–∑—É—á–∞–π—Ç–µ —Ç–∞—Ç—É-–∏—Å–∫—É—Å—Å—Ç–≤–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ
                        </div>
                        </div>
                        
                        <div style="margin: 15px 0; font-size: 10px; color: #666;">
                            <span class="japanese-symbol">Ë®òÂøµ</span> –í –ø–∞–º—è—Ç—å –æ –º–∞—Å—Ç–µ—Ä–µ –Æ–∫–∏ –¢–∞–Ω–∞–∫–∞<br>
                            –£—á–∏—Å—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –∏–∑–±–µ–≥–∞–π –æ–ø–∞—Å–Ω–æ—Å—Ç–µ–π
                        </div>
                        
                        <button class="choice-btn" onclick="showTattooAcademy()">
                            üñ§ –ü–µ—Ä–µ–π—Ç–∏ –∫ –∫—É—Ä—Å–∞–º
                        </button>
                        </div>
                    </div>
                `;
            
            document.getElementById('contentArea').innerHTML = content;
        }

        // Additional app functions (simplified for space)
        function showCameraApp() {
            increaseHorror(12);
            const content = `
                <div class="content-screen" style="display: block;">
                    <div class="content-header">
                        <button class="back-btn" onclick="showDesktop()">‚Üê</button>
                        <span>üì∑ –ì–∞–ª–µ—Ä–µ—è –Æ–∫–∏</span>
                        </div>
                    <div style="text-align: center; padding: 40px 20px; color: #888;">
                        –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —Å —ç—Å–∫–∏–∑–∞–º–∏ —Ç–∞—Ç—É–∏—Ä–æ–≤–æ–∫ –∏ –∫—É—Ä—Å–∞–º–∏ –æ–±—É—á–µ–Ω–∏—è –Ω–∞–π–¥–µ–Ω—ã...
                        <div style="margin-top: 20px;">
                            <button class="choice-btn" onclick="gameState.investigationProgress = Math.max(4, gameState.investigationProgress); updateDesktopApps(); showDesktop();">
                                –ù–∞–∑–∞–¥
                            </button>
                        </div>
                        </div>
                    </div>
                `;
            document.getElementById('contentArea').innerHTML = content;
        }

        function showPlayerApp() {
            increaseHorror(8);
            const content = `
                <div class="content-screen" style="display: block;">
                    <div class="content-header">
                        <button class="back-btn" onclick="showDesktop()">‚Üê</button>
                        <span>üéµ –ü–æ—Å–ª–µ–¥–Ω—è—è –∑–∞–ø–∏—Å—å</span>
                        </div>
                    <div style="padding: 20px;">
                        <div class="message corrupted">
                            <div class="message-content">
                                "–ü–æ–º–Ω–∏ –∫–æ–¥: TATTOO50... –ò–∑—É—á–∞–π —Ç–∞—Ç—É–∏—Ä–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ..."
                                <br><br><span class="japanese-symbol">„Åï„Çà„Å™„Çâ</span> - –ü—Ä–æ—â–∞–π...
                            </div>
                        </div>
                        <button class="choice-btn" onclick="gameState.investigationProgress = Math.max(5, gameState.investigationProgress); updateDesktopApps(); showDesktop();">
                            –ù–∞–∑–∞–¥
                        </button>
                        </div>
                    </div>
                `;
            document.getElementById('contentArea').innerHTML = content;
        }

        function showMapApp() {
            const content = `
                <div class="content-screen" style="display: block;">
                    <div class="content-header">
                        <button class="back-btn" onclick="showDesktop()">‚Üê</button>
                        <span>üó∫Ô∏è –ú–µ—Å—Ç–∞ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è</span>
                    </div>
                    <div style="text-align: center; padding: 40px 20px; color: #888;">
                        GPS –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ –ª–æ–∫–∞—Ü–∏–∏ –Æ–∫–∏...
                        <br><br>–í—Å–µ –≤–µ–¥–µ—Ç –∫ –æ–¥–Ω–æ–º—É - –æ–Ω–∞ –∏–∑—É—á–∞–ª–∞ –∫—É—Ä—Å—ã —Ç–∞—Ç—É–∏—Ä–æ–≤–∫–∏.
                        <div style="margin-top: 20px;">
                            <button class="choice-btn" onclick="showDesktop()">–ù–∞–∑–∞–¥</button>
                        </div>
                    </div>
                    </div>
                `;
            document.getElementById('contentArea').innerHTML = content;
        }

        function showSettingsApp() {
            const content = `
                <div class="content-screen" style="display: block;">
                    <div class="content-header">
                        <button class="back-btn" onclick="showDesktop()">‚Üê</button>
                        <span>‚öôÔ∏è –û —Å–∏—Å—Ç–µ–º–µ</span>
                    </div>
                    <div style="padding: 20px; text-align: center;">
                        <div style="color: #ff0096; margin-bottom: 15px;">
                            –ú–ï–†–¢–í–ê–Ø –°–¢–£–î–ò–Ø | <span class="japanese-symbol">Ê≠ªÈúäË®òÊÜ∂</span>
                        </div>
                        <div style="font-size: 10px; color: #888;">
                            –í –ø–∞–º—è—Ç—å –æ –Æ–∫–∏ –¢–∞–Ω–∞–∫–∞<br>
                            –ú–∞—Å—Ç–µ—Ä —Ç–∞—Ç—É–∏—Ä–æ–≤–∫–∏ (2003-2005)<br><br>
                            <span class="japanese-symbol">Áæé„Åó„ÅÑÁ†¥ÊªÖ</span><br>
                            –ü—Ä–µ–∫—Ä–∞—Å–Ω–æ–µ —Ä–∞–∑—Ä—É—à–µ–Ω–∏–µ
                        </div>
                        <button class="choice-btn" onclick="showDesktop()">–ù–∞–∑–∞–¥</button>
                    </div>
                    </div>
                `;
            document.getElementById('contentArea').innerHTML = content;
        }

        // Initialize game
        function initGame() {
            updateHorrorMeter(0);
            showBootScreen();
        }

        // Start game when page loads
        window.addEventListener('load', initGame);
    </script>
</body>
</html>

